"use strict";document.addEventListener("DOMContentLoaded",()=>{["team","advs"].some(e=>{if(document.querySelector("."+e))return gsap.registerPlugin(ScrollTrigger),!0});const r=new LazyLoad({use_native:!0}),a=new LazyLoad({});function i(e,t,r){e=e.querySelector(t);e&&e.classList.remove(r)}var e=document.querySelectorAll(".p-select"),e=(e[0]&&e.forEach(t=>{var e=t.querySelector(".p-select__current");const r=e.querySelector(".p-select__current-item"),a=t.querySelector(".p-select__abs"),n=e.querySelector("input");var o=a.querySelectorAll(".p-select__abs-item");e.addEventListener("click",()=>{t.classList.toggle("active")}),o.forEach(e=>{e.addEventListener("click",()=>{i(a,".p-select__abs-item.active","active"),n.value=e.dataset.value,r.textContent=e.dataset.value,t.classList.remove("active"),e.classList.add("active")})})}),document.querySelectorAll(".why")),e=(e[0]&&e.forEach(r=>{var e=r.querySelectorAll(".why__tabs .why__tab");const a=r.querySelectorAll(".why__contents .why__content");e.forEach((e,t)=>{e.addEventListener("click",()=>{i(r,".why__tabs .why__tab.active","active"),i(r,".why__contents .why__content.active","active"),e.classList.add("active"),a[t].classList.add("active")})}),a.forEach(n=>{var e=n.querySelectorAll(".why__content-tabs .why__content-tab");const o=n.querySelectorAll(".why__content-image img");e.forEach((r,a)=>{var e;r.classList.contains("active")&&((e=r.querySelector(".why__content-text")).style.height=e.scrollHeight+"px"),r.addEventListener("click",()=>{var e=".why__content-tabs .why__content-tab.active",t=n.querySelector(e+" .why__content-text"),t=(t&&(t.style.height=""),i(n,e,"active"),i(n,".why__content-image img.active","active"),r.classList.add("active"),r.querySelector(".why__content-text"));t.style.height=t.scrollHeight+"px",o[a].classList.add("active")})})})}),document.querySelectorAll(".estate__swiper")),e=(e[0]&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:18,navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")}})}),document.querySelectorAll(".buy")),e=(e[0]&&e.forEach(e=>{var t=e.querySelector(".buy__row");const r=t.offsetWidth;r,window.innerWidth;var a=gsap.utils.toArray(e.querySelectorAll(".buy__item"));e.nextElementSibling;gsap.to(a,{x:-r,ease:"none",scrollTrigger:{trigger:t,start:"top 185px",pin:!0,scrub:1,end:()=>"+="+r,invalidateOnRefresh:!0}})}),document.querySelectorAll(".filters")),e=(e[0]&&e.forEach(e=>{const t=e.querySelector(".filters__coub"),r=e.querySelector(".filters__map"),a=e.querySelector(".filters__content"),n=e.querySelector(".filters__content-map");t.addEventListener("click",()=>{t.classList.add("active"),a.classList.add("active"),n.classList.remove("active"),r.classList.remove("active"),ScrollTrigger.refresh()}),r.addEventListener("click",()=>{t.classList.remove("active"),a.classList.remove("active"),n.classList.add("active"),r.classList.add("active"),ScrollTrigger.refresh()})}),document.querySelectorAll(".reviews__swiper")),e=(e[0]&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:3,spaceBetween:40,pagination:{clickable:!0,el:e.querySelector(".swiper-pagination")}})}),document.querySelectorAll(".article-items")),e=(e[0]&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:41})}),document.querySelectorAll(".best__swiper")),e=(e[0]&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:61,navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")}})}),document.querySelectorAll(".p-card_second"));e[0]&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",pagination:{clickable:!0,el:e.querySelector(".swiper-pagination")}})});const c={firstDayOfWeek:1,weekdays:{shorthand:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longhand:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},months:{shorthand:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],longhand:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]}};e=document.querySelectorAll(".rent-single"),e[0]&&e.forEach(e=>{const n=e.querySelector(".rent-single__right-date_start"),o=e.querySelector(".rent-single__right-date_end"),l=e.querySelector(".rent-single__col-date_start"),s=e.querySelector(".rent-single__col-date_end");var t=e.querySelector(".rent-single__right-input input"),t=(flatpickr(t,{minDate:"today",mode:"range",inline:!0,dateFormat:"d.m.Y",locale:c,onChange:function(e,t,r){var a={year:"numeric",month:"long",day:"numeric"};e[0]&&(n.textContent=e[0].toLocaleDateString("ru",a),l.textContent=e[0].toLocaleDateString("ru")),e[1]?(o.textContent=e[1].toLocaleDateString("ru",a),s.textContent=e[1].toLocaleDateString("ru")):(o.textContent=e[0].toLocaleDateString("ru",a),s.textContent=e[0].toLocaleDateString("ru"))}}),e.querySelectorAll(".rent-single__select")),t=(t[0]&&t.forEach(t=>{t.querySelector(".rent-single__select-current").addEventListener("click",e=>{d(e),t.classList.toggle("active")}),t.querySelector(".rent-single__select-close").addEventListener("click",e=>{d(e),t.classList.remove("active")})}),e.querySelectorAll(".rent-single__quantity")),t=(t[0]&&t.forEach(e=>{var t=e.querySelector(".rent-single__quantity-minus"),r=e.querySelector(".rent-single__quantity-plus");const a=e.querySelector(".rent-single__quantity-input input");t.addEventListener("click",e=>{d(e);e=parseInt(a.value);e<=0?a.value=0:(e--,a.value=e)}),r.addEventListener("click",e=>{d(e);e=parseInt(a.value);e++,a.value=e})}),e.querySelectorAll(".rent-single__list")),t=(t[0]&&t.forEach(t=>{const r=t.dataset.count,a=t.querySelectorAll(".rent-single__list-li"),n=t.querySelector(".rent-single__list-li_more");n.addEventListener("click",()=>{var e=t.dataset.status;a.forEach((e,t)=>{r<=t&&e.classList.toggle("active")}),"true"===e&&(t.dataset.status="false",n.textContent=n.dataset.textHide),"false"===e&&(t.dataset.status="true",n.textContent=n.dataset.textShow)})}),e.querySelectorAll(".rent-single__rules"));t[0]&&t.forEach(r=>{var e=r.querySelectorAll(".rent-single__rules-tab");const a=r.querySelectorAll(".rent-single__rules-content");e.forEach((e,t)=>{e.addEventListener("click",()=>{i(r,".rent-single__rules-tab.active","active"),i(r,".rent-single__rules-content.active","active"),e.classList.add("active"),a[t].classList.add("active")})})})}),e=document.querySelectorAll(".rent"),e[0]&&e.forEach(e=>{e.querySelectorAll(".rent__input_date").forEach(e=>{var t=e.querySelector("input");if(t){const r=flatpickr(t,{minDate:"today",dateFormat:"d.m.Y",locale:c,onChange:function(e,t,r){r=r.element;"start"===r.getAttribute("name")&&r.closest(".rent__form").querySelector('input[name="end"]')._flatpickr.set("minDate",t)}});e.querySelector(".rent__input-svg").addEventListener("click",()=>{r.toggle()})}})}),e=document.querySelectorAll(".modal_filter__range"),e[0]&&e.forEach(e=>{var t=e.querySelector(".modal_filter__range-main"),r=parseFloat(e.dataset.min),a=parseFloat(e.dataset.max),n=[e.querySelector('input[name*="min"]'),e.querySelector('input[name*="max"]')];noUiSlider.create(t,{start:[r,a],connect:!0,range:{min:r,max:a},tooltips:!0}),t.noUiSlider.on("update",function(e,t){n[t].value=e[t]})}),e=document.querySelector(".modal_filter"),e&&e.closest("form").querySelector(".modal_filter__reset").addEventListener("click",()=>{var e=window.location;window.location.href=e.protocol+"//"+e.host+e.pathname}),e=document.querySelectorAll(".team"),e[0]&&e.forEach(e=>{var t=e.querySelector(".team__text-items");let r=e.querySelector(".team__text-line .team__text-line-circle");t=t.querySelectorAll(".team__text-item");let a=gsap.timeline({scrollTrigger:{trigger:e,start:"center center",pin:!0,scrub:1,end:"+=100%",ease:"power2",toggleActions:"play none none reverse",onUpdate:e=>{gsap.to(r,{top:100*e.progress.toFixed(2)+"%"})}}});t.forEach(e=>{a.fromTo(e,{opacity:0},{opacity:1})})}),e=document.querySelectorAll(".advs");function t(c,e){c=gsap.utils.toArray(c);let t=(e=e||{}).onChange,r=0,d=gsap.timeline({repeat:e.repeat,onUpdate:t&&function(){var e=d.closestIndex();r!==e&&(r=e,t(c[e],e))},paused:e.paused,defaults:{ease:"none"},onReverseComplete:()=>d.totalTime(d.rawTime()+100*d.duration())}),o=c.length,l=c[0].offsetLeft,u=[],s=[],i=[],p=[],n=0,g=!1,a=e.center,_=100*(e.speed||1),y=!1===e.snap?e=>e:gsap.utils.snap(e.snap||1),m=0,v=!0!==a&&gsap.utils.toArray(a)[0]||c[0].parentNode,h,S=()=>{let r=v.getBoundingClientRect(),a;c.forEach((e,t)=>{s[t]=parseFloat(gsap.getProperty(e,"width","px")),p[t]=y(parseFloat(gsap.getProperty(e,"x","px"))/s[t]*100+gsap.getProperty(e,"xPercent")),a=e.getBoundingClientRect(),i[t]=a.left-(t?r.right:r.left),r=a}),gsap.set(c,{xPercent:e=>p[e]}),h=c[o-1].offsetLeft+p[o-1]/100*s[o-1]-l+i[0]+c[o-1].offsetWidth*gsap.getProperty(c[o-1],"scaleX")+(parseFloat(e.paddingRight)||0)},f,q=()=>{m=a?d.duration()*(v.offsetWidth/2)/h:0,a&&u.forEach((e,t)=>{u[t]=f(d.labels["label"+t]+d.duration()*s[t]/2/h-m)})},w=(e,t,r)=>{let a=e.length,n=1e10,o=0,l;for(;a--;)(l=(l=Math.abs(e[a]-t))>r/2?r-l:l)<n&&(n=l,o=a);return o},E=()=>{let e,t,r,a,n;for(d.clear(),e=0;e<o;e++)t=c[e],r=p[e]/100*s[e],n=(a=t.offsetLeft+r-l+i[0])+s[e]*gsap.getProperty(t,"scaleX"),d.to(t,{xPercent:y((r-n)/s[e]*100),duration:n/_},0).fromTo(t,{xPercent:y((r-n+h)/s[e]*100)},{xPercent:p[e],duration:(r-n+h-r)/_,immediateRender:!1},n/_).add("label"+e,a/_),u[e]=a/_;f=gsap.utils.wrap(0,d.duration())},L=e=>{var t=d.progress();d.progress(0,!0),S(),e&&E(),q(),e&&d.draggable?d.time(u[n],!0):d.progress(t,!0)},x;function b(e,t){t=t||{},Math.abs(e-n)>o/2&&(e+=e>n?-o:o);let r=gsap.utils.wrap(0,o,e),a=u[r];return a>d.time()!=e>n&&e!==n&&(a+=d.duration()*(e>n?1:-1)),(a<0||a>d.duration())&&(t.modifiers={time:f}),n=r,t.overwrite=!0,gsap.killTweensOf(x),0===t.duration?d.time(f(a)):d.tweenTo(a,t)}if(gsap.set(c,{x:0}),S(),E(),q(),window.addEventListener("resize",()=>L(!0)),d.toIndex=(e,t)=>b(e,t),d.closestIndex=e=>{var t=w(u,d.time(),d.duration());return e&&(n=t,g=!1),t},d.current=()=>g?d.closestIndex(!0):n,d.next=e=>b(d.current()+1,e),d.previous=e=>b(d.current()-1,e),d.times=u,d.progress(1,!0).progress(0,!0),e.reversed&&(d.vars.onReverseComplete(),d.reverse()),e.draggable&&"function"==typeof Draggable){x=document.createElement("div");let e=gsap.utils.wrap(0,1),o,l,t,s,i,r,a=()=>d.progress(e(l+(t.startX-t.x)*o)),n=()=>d.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),t=Draggable.create(x,{trigger:c[0].parentNode,type:"x",onPressInit(){var e=this.x;gsap.killTweensOf(d),r=!d.paused(),d.pause(),l=d.progress(),L(),o=1/h,i=l/-o-e,gsap.set(x,{x:l/-o})},onDrag:a,onThrowUpdate:a,overshootTolerance:0,inertia:!0,snap(e){if(Math.abs(l/-o-this.x)<10)return s+i;let t=-(e*o)*d.duration(),r=f(t),a=u[w(u,r,d.duration())],n=a-r;return Math.abs(n)>d.duration()/2&&(n+=n<0?d.duration():-d.duration()),s=(t+n)/d.duration()/-o},onRelease(){n(),t.isThrowing&&(g=!0)},onThrowComplete:()=>{n(),r&&d.play()}})[0],d.draggable=t}return d.closestIndex(!0),r=n,t&&t(c[n],n),d}e[0]&&e.forEach(e=>{e=e.querySelector(".advs__items").querySelectorAll(".advs__item");let r=gsap.utils.toArray(e);r.forEach((e,t)=>{t!==r.length-1&&ScrollTrigger.create({trigger:e,start:()=>e.offsetHeight<window.innerHeight?"top top":"bottom bottom",end:"+="+e.offsetHeight,pin:!0,pinSpacing:!1})})});e=document.querySelectorAll(".appartments");function d(e){e.preventDefault(),e.stopPropagation()}function n(e){e.classList.remove("active")}e[0]&&e.forEach(e=>{t(e.querySelectorAll(".appartments__item"),{repeat:-1,paused:!1,speed:1.5})});new class{constructor(){this.allModals(),this.allModalShows()}allModals(){document.querySelectorAll(".modal").forEach(t=>{function r(){var e;n(t),document.body.style.overflow="",e=new CustomEvent("pModalClose",{detail:{modal:t}}),document.dispatchEvent(e)}var e=t.querySelector(".modal__close"),e=(e&&e.addEventListener("click",()=>{r()}),t.querySelector(".modal__back"));e&&e.addEventListener("click",()=>{r()}),t.addEventListener("click",e=>{e.target==t&&r()})})}allModalShows(){document.querySelectorAll(".modal__show").forEach(t=>{t.addEventListener("click",e=>{d(e);e=t.getAttribute("data-modal"),e=document.querySelector(".modal_"+e),e.classList.add("active"),document.body.style.overflow="hidden",e=new CustomEvent("pModalOpen",{detail:{modal:e,element:t}});document.dispatchEvent(e)})})}},document.addEventListener("pModalOpen",e=>{var e=e.detail,t=e.element,e=e.modal;r.update(),a.update(),e.classList.contains("modal_like_2")&&n(t.closest(".modal"))})});