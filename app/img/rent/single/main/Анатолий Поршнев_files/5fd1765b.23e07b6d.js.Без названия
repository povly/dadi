"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[99812],{37946:(_,e,t)=>{t.d(e,{default:()=>s});const s={icon:"IllegalConfirmModal-module__icon--tp606",text:"IllegalConfirmModal-module__text--TQQTm",actions:"IllegalConfirmModal-module__actions--_yQkX"}},566281:(_,e,t)=>{t.d(e,{sendSearchFriendEvent:()=>r,sendSearchFriendGlobalEvent:()=>a});var s=t(193452),o=t(957973);function r(){s.searchStatsCollector.logEvent({action:o.SearchClickActionMap.TAP,type:o.EventItemType.SEARCH_PEOPLE_FRIENDS,track_code:""})}function a(){s.searchStatsCollector.logEvent({action:o.SearchClickActionMap.TAP,type:o.EventItemType.SEARCH_PEOPLE_EXCEPT_FRIENDS,track_code:""})}},550441:(_,e,t)=>{t.d(e,{hideFeaturing:()=>o});var s=t(599809);const o=()=>(0,s.api)("market.searchFeaturingClose",{})},143612:(_,e,t)=>{t.d(e,{showIllegalConfirmModal:()=>b});var s=t(434788),o=t(785893),r=t(667294),a=t(816511),i=t(635928),c=t(832550),l=t(86894),n=t(359639),E=t(29271),u=t(988865),d=t(37946);const h=({onClose:_,onDisable:e,callbackClose:t,refreshCoordinates:s,isNotSafe:n})=>{(0,r.useEffect)((()=>{s()}),[]);const h=()=>{_(),t&&t()},b=n?E.getLang("search_title_not_safe_confirm_disable_safe_search"):E.getLang("search_title_confirm_disable_safe_search"),P=n?E.getLang("search_text_not_safe_confirm_disable_safe_search"):E.getLang("search_text_confirm_disable_safe_search"),M=n?E.getLang("search_close_btn_not_safe_confirm_disable_safe_search"):E.getLang("search_close_btn_confirm_disable_safe_search"),m=n?E.getLang("search_confirm_btn_not_safe_confirm_disable_safe_search"):E.getLang("search_confirm_btn_confirm_disable_safe_search");return(0,o.jsxs)(a.ModalBox,{children:[(0,o.jsx)(l.ModalDismissButton,{onClick:h,"aria-label":E.getLang("global_close")}),(0,o.jsxs)(i.Placeholder,{icon:(0,o.jsx)(u.Icon56HideOutline,{className:d.default.icon}),header:b,action:(0,o.jsxs)(l.ButtonGroup,{className:d.default.actions,mode:"vertical",align:"center",gap:"s",children:[(0,o.jsx)(c.Button,{onClick:h,size:"m",children:M}),(0,o.jsx)(c.Button,{onClick:()=>{e(),_()},size:"m",mode:"tertiary",children:m})]}),children:[(0,o.jsx)(l.Headline,{level:"1",className:d.default.text,children:P}),(0,o.jsx)("a",{href:"@vk-notification",children:E.getLang("search_link_text_confirm_disable_safe_search")})]})]})};function b({onDisable:_,callbackClose:e,isNotSafe:t}){(0,n.showMessageBoxModal)((r=>(0,o.jsx)(h,(0,s._)({},r,{onDisable:_,callbackClose:e,isNotSafe:t}))))}},255372:(_,e,t)=>{t.d(e,{showIllegalConfirmModal:()=>s.showIllegalConfirmModal});var s=t(143612)},113203:(_,e,t)=>{t.d(e,{initSearchStatusFilters:()=>h});var s=t(664988),o=t(501461),r=t(504867),a=t(795558),i=t(953908),c=t(96756),l=t(29271),n=t(320422),E=t(421553),u=t(321850),d=t(839470);function h({selData:_,contentHint:e}){var t;const h=(0,d.partConfigEnabled)("search_enable_news_sort_filter"),b=_=>{_.keyCode!=o.KEY.ENTER&&"keydown"==_.type||window.searcher.updResults()};if(h){const e=()=>{const _=document.getElementById("c[sort]");_&&("search"==window.cur.section&&(0,r.statlogsValueEvent)("feed_change_sort",0,_.value),window.cur.disableSort=!_.value),window.searcher.updResults()};new window.Dropdown(document.querySelector("#search_status_sort"),_.sort,{width:null,dark:!0,zeroPlaceholder:!0,onChange:e})}else window.radioBtns.sort={els:[...document.querySelectorAll("#cSort .radiobtn")],val:_.sort},window.cur.onSortChanged=_=>{const e=_.querySelector("._ui_toggler");if(!e)return;e.classList.toggle("on");const t=e.classList.contains("on")?1:0;"search"==window.cur.section&&(0,r.statlogsValueEvent)("feed_change_sort",0,t),window.cur.disableSort=!t;const s=document.getElementById("c[sort]");s&&(s.value=String(t)),window.searcher.updResults()};["exclude","url","content"].forEach((_=>{const e=document.querySelector(`#search_status_${_}`);if(!e)return;const t=()=>{(_=>{window.cur.searchReq||(0,a.val)(_)!=(window.cur.params&&window.cur.params[_.name]||"")&&window.searcher.updResults()})(e)};(0,i.addEvent)(e,"blur",t),(0,i.addEvent)(e,"keydown change paste",b),(0,u.pushNavDestroy)((()=>{(0,i.removeEvent)(e,"blur",t),(0,i.removeEvent)(e,"keydown change paste",b)})),(0,c.placeholderInit)(e)})),["type","attach","likes"].forEach((e=>{const t=document.querySelector(`#search_status_${e}`);new window.Dropdown(t,_[e],{width:null,dark:!0,zeroPlaceholder:!0,onChange:window.searcher.updResults})}));const P=document.querySelector("#search_status_url");(0,i.addEvent)(P,"focus blur",(_=>{if(P)if("focus"==_.type){const _=`\n        <div id="search_status_hint_opts">\n          <div class="radiobtn on" onmousedown="return searchActions.searchUrlOnChange(this, 0, event);">${l.getLang("news_searchext_link_hint")}</div>\n          <div class="radiobtn" onmousedown="return searchActions.searchUrlOnChange(this, 1, event);">${l.getLang("news_searchext_domain_hint")}</div>\n        </div>\n      `.trim();(0,n.showTooltip)(P,{text:_,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",nohide:!0,onCreate:()=>{(0,i.removeEvent)(P,"mouseout"),window.radioBtns.search_status_hint_domain={els:[...document.querySelectorAll("#search_status_hint_opts .radiobtn")],val:0}}})}else P.tt&&P.tt.hide&&P.tt.hide()}));const M=document.querySelector("#search_status_content");(0,i.addEvent)(M,"focus blur",(_=>{M&&("focus"==_.type?(0,n.showTooltip)(M,{text:e,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",onCreate:()=>{(0,i.removeEvent)(M,"mouseout")}}):M.tt&&M.tt.hide&&M.tt.hide())}));let m=document.querySelector("#search_status_map_hidden"),D=m?null==(t=(0,a.val)(m))?void 0:t.match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/):null;if(D){let _=(0,s.floatval)(D[1]),e=(0,s.floatval)(D[2]),t=D[3]||8;E.searchActions.chooseGeoPoint(_,e,t,!0)}}},111958:(_,e,t)=>{t.d(e,{removeUnseenStories:()=>a,showMiniAppTooltip:()=>i});var s=t(636525),o=t(839470),r=t(320422);function a(_){const e=document.querySelectorAll(".search_item_img_stories_unseen"+_);for(const s of e){var t;s.classList.remove("search_item_img_stories_unseen","search_item_img_stories_unseen"+_),null==(t=s.closest(".search_item_img_link"))||t.removeAttribute("onclick")}(0,o.partConfigEnabled)("avatar_component_refactor_web")&&(0,s.removeRichAvatarOutlineAtNode)(document.body,String(_),"stories_unseen")}const i=({el:_,isForList:e})=>{var t,s,o,a,i,c,l,n,E;if(!_)return;let u=_,d=null==(s=_)||null==(t=s.dataset)?void 0:t.appId;const h=_.closest("[data-app-id]");var b;!d&&h&&(d=null==(b=h)?void 0:b.dataset.appId);e&&h&&(u=h);const P=u,M=(null==(o=P)?void 0:o.tt)&&(null==(i=P)||null==(a=i.tt)?void 0:a.container)?null==(l=P)||null==(c=l.tt)?void 0:c.container:null;M&&"none"===(null==(E=M)||null==(n=E.style)?void 0:n.display)&&(M.classList.remove("tt_left"),M.classList.remove("tt_right"),M.classList.remove("GlobalAppsCardTooltipWrapper--up"));let m,D="left",O=-100,C="",p=!1;const w=document.documentElement.clientWidth,T=document.documentElement.clientHeight,g=_.getBoundingClientRect();g.left>w-520?(D="right",m=365):m=-g.width-10,g.top>T-400&&(O=-50,C="GlobalAppsCardTooltipWrapper--up",M&&M.classList.add(C));let L=[m,O];e&&(D="top",p=void 0,L=[-20,0]),(0,r.showTooltip)(u,{url:"al_apps.php",params:{act:"mini_app_card_tooltip",app_id:d},className:`GlobalAppsCardTooltipWrapper ${C}`,hasover:!0,ajaxdt:200,showdt:300,hidedt:300,shift:L,center:p,dir:D})}},650721:(_,e,t)=>{t.d(e,{PROFILING_COMPONENTS:()=>i,searchProfilingService:()=>l});var s=t(434788),o=t(385376),r=t(798116),a=t(367431);const i={SEARCH_TOP_TO_SEARCH_ALL_TRANSITION:"search_top_to_search_all_transition",SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION:"search_top_to_search_all_old_transition"},c=()=>1e3*Number(new Date),l=(0,a.makeSharedState)("global/search/searchProfilingService",(()=>{const _=(0,r.createDomain)("SearchProfilingService"),e=_.createEvent(),t=_.createEvent(),a=_.createEvent(),i=_.createEvent(),l=_.createStore({}),n=_.createEffect((({component:_,startTime:e,service:t,entrypoint:s="",abGroup:r="",isAnonymous:a=!1})=>{const i=c()-e;return _&&e&&t?((0,o.saveStatlogEvents)({name:"search_response_profiling",value:i,keys:[_,r,t,s,String(Number(a))]}),_):""}));return l.reset(i),(0,r.sample)({clock:e,source:l,fn:(_,e)=>(0,s._)({},_,{[e]:c()}),target:l}),(0,r.sample)({clock:a,source:l,filter:(_,e)=>Boolean(_[e.component]),fn:(_,e)=>(0,s._)({},e,{startTime:_[e.component]}),target:n}),(0,r.sample)({clock:[n.doneData,t],source:l,fn:(_,e)=>{const t=(0,s._)({},_);return t[e]&&delete t[e],t},target:l}),{setProfilingMarkStart:e,setProfilingMarkEnd:a,removeProfilingMark:t,reset:i}}),{version:1})},179034:(_,e,t)=>{t.d(e,{cutTextToHighlight:()=>a});const s="highlight",o="cutTextToHighlight",r=15;function a(_){let e=null;document.querySelectorAll(`${_}:not(.${o})`).forEach((_=>{if(_.classList.add(o),null===e){const t=getComputedStyle(_).font;e=function(_){const e=document.createElement("canvas").getContext("2d");function t(_){const t=e.measureText(_).width;return Math.ceil(t)}return e.font=_,t}(t)}_.innerHTML=function(_,e,t="â€¦"){const o=_.querySelector("."+s);if(!o)return _.innerHTML;let a=_.innerHTML.indexOf('<em class="'+s+'">');if(o.offsetLeft+o.offsetWidth<=_.offsetWidth-r)return _.innerHTML;if(o.offsetWidth<_.offsetWidth-r){let s=0,i="",c=a;for(;c>0&&s+o.offsetWidth<=_.offsetWidth;){let a=_.innerHTML.lastIndexOf(" ",c-1);if(-1===a&&(a=0),i=_.innerHTML.substring(a,c)+i,s=e(t+i.trim()),!(s+o.offsetWidth<=_.offsetWidth-r))break;c=a}a=c}if(a>0)return t+_.innerHTML.substring(a).trim();return _.innerHTML}(_,e)}))}},54413:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{iSearch:()=>iSearch,searcher:()=>searcher});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(434788),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82161),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(301230),_web_lib_market__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(577552),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10645),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(504867),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(95432),_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(893106),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(438221),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(953908),_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(215066),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(643897),_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(795558),_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(725296),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(514986),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(29271),_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(664988),_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(179034),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(862736),_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(550441),_web_search_init__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(113203),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(839470),_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(255372),_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(561722),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(9480),_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(650721),_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(566281),_search_utils__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(111958);const sectionAuto="auto",sectionAudio="audio",sectionVideo="video",sectionClips="clips",sectionStatuses="statuses",sectionPeople="people",sectionCommunities="communities",sectionMiniApps="mini_apps",sectionQuick="quick",moduleEmpty=void 0,moduleFriends="friends",moduleGroupsCatalog="groups_catalog",moduleGroupsRecommendations="groups_recommendations",paramQuery="c[q]",paramSection="c[section]",paramCategory="c[category]",paramSort="c[sort]",paramPhoto="c[photo]",paramInvite="c[invite]",paramSkipCatalog="c[skip_catalog]",paramHd="c[hd]",paramGroupsRecommendationsModel="c[need_groups_recommendations_model]",paramFrom="c[from]",paramBlockPosition="c[block_position]",paramSectionPage="c[section_page]",hasIsIllegalContent=()=>document.querySelector("#results").classList.contains("search_results_illegal"),confirmIllegalContent=()=>{const _=document.querySelector("#results"),e=document.querySelector(".search_query_wrap");_&&_.classList.remove("search_results_illegal"),e&&e.classList.remove("search_query_illegal")},showIllegalPlaceHolder=()=>{const _=document.querySelector("#results");_.innerHTML=`<div id="no_results" class="no_rows">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_inappropriate_query")}</div>`,_.classList.remove("search_results_illegal")},showConfirmIllegalContent=_=>{(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&hasIsIllegalContent()&&(document.querySelector(".search_query_wrap").classList.add("search_query_illegal"),(0,_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_20__.showIllegalConfirmModal)({onDisable:()=>{confirmIllegalContent()},callbackClose:()=>{showIllegalPlaceHolder()},isNotSafe:_}))},searcher={initSearchStatusFilters:_web_search_init__WEBPACK_IMPORTED_MODULE_18__.initSearchStatusFilters,init(_){var e,t,s,o;const r=globalHistory.length;r&&globalHistory[r-1]&&globalHistory[r-1].loc.indexOf("search")?cur.search_return_to=globalHistory[r-1].loc:cur.search_return_to="/",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("header");const a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query");if(!(a&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(a,"opts")||{}).isNew){const e=window.iSearch;e.destroy(),vk.id&&e.init(a,_)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(a),"search"===nav.objLoc[0]&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur,{oid:_.user_id,module:"search"}),cur.nav.push(((_,e,t)=>{if(void 0!==_[0]||cur.searchLoc&&void 0!==_.act)return clearTimeout(cur.setLocTO),void(nav.strLoc!==cur.loc&&cur.loc&&hab.setLoc(cur.loc));if(cur.searchLoc){let _=!1;for(const e in t)if("c["===e.substr(0,2)){_=!0;break}if(cur.onLocationChange&&cur.onLocationChange(_),!_)return!0}const s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.clone)(t);delete s[0];const o=s[paramSection]||s.section||sectionQuick;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_menu")&&uiRightMenu&&uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${o}`,"search_menu")),searcher.setSection(o),searcher.sendSearchReq(s,!0),!1}))),cur.options||(cur.options={reply_names:{}}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur.options,_),searcher.applyOptions(_),a.ignoreFixed=cur.section==sectionStatuses,window.scrollTop=document.body.scrollTop=pageNode.scrollTop=htmlNode.scrollTop=0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"resize",searcher.onResize),setTimeout(searcher.scrollCheck,50),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks,200);const i=window.audioPlayer;i&&i.showCurrentTrack&&i.showCurrentTrack(),cur._back={text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_back_to"),show:[()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("header");const e=globalHistory.length;e&&globalHistory[e-1]&&globalHistory[e-1].loc.indexOf("search")&&(cur.search_return_to=globalHistory[e-1].loc),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"resize",searcher.onResize);const t=window.iSearch;t.destroy(),vk.id&&t.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query"),_)}],hide:[()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(window,"resize",searcher.onResize),window.iSearch.destroy()}]},cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_26__.cutTextToHighlight)(".labeled__searchServicesDesc"),this.logSearch(cur.params,_),showConfirmIllegalContent(1===cur.params["c[not_safe]"]),"auto"!==(null==(t=cur)||null==(e=t.params)?void 0:e.section)&&"auto"!==(null==(o=cur)||null==(s=o.params)?void 0:s["c[section]"])||((0,_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_23__.searchProfilingService)().setProfilingMarkEnd({component:_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_23__.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION,service:"search_all",isAnonymous:!1}),(0,_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_23__.searchProfilingService)().removeProfilingMark(_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_23__.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION))},sendSearchReq(_,e,t){if(cur.searchReq)try{cur.searchReq.abort()}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}e&&!_.offset&&(vk.no_ads=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(_[paramSection],[sectionAudio]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(_,{uf:1})),void 0!==cur.useRec&&(_.rec=cur.useRec,delete cur.useRec),_.edit=nav.objLoc.edit,_.sign=nav.objLoc.sign,_.all=nav.objLoc.all,_.change=1,cur.searchLoc&&(_.search_loc=cur.searchLoc),void 0!==cur.topType&&(_.type=cur.topType,delete cur.topType);const s=window.iSearch;s&&s.select&&(s.select.hide(),delete cur.setISearch),cur.loadingMedia||(uiSearch.showProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query").ignoreFixed=_[paramSection]==sectionStatuses),nav.objLoc.from&&(_.from=nav.objLoc.from);const o=this.removeLogClickHandlers,r=this.logSearch;_.act="search_request",_.module=cur.module;const a=+new Date,i=(t,s,i,c)=>{window.cur.onSearchOrSectionChange&&window.cur.onSearchOrSectionChange.forEach((_=>_())),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(document.querySelector(".search_seo_info"));const l=_.uf&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results_wrap")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("friends_filters_block")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("friends_filters_block"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("filter_form");if(l.innerHTML=s||"",e&&(n&&(n.innerHTML=i||""),l.setAttribute("style",c),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)("search_query")),t.loc){const _=`${locProtocol}//${location.host}/${t.loc}`,e=document.URL===_?"":document.URL;setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__.updateCounters.pbind(_,e),10)}searcher.applyOptions(t,e),uiSearch.hideProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("search_clear_params");const E=window.audioPlayer;E&&E.showCurrentTrack&&E.showCurrentTrack(),cur.onSearchFinish&&cur.onSearchFinish(),(0,_web_lib_market__WEBPACK_IMPORTED_MODULE_2__.shortCurrency)(),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks,200),cur.onSearchDone&&cur.onSearchDone(),o();const u=+new Date-a;t.query_duration=t.query_duration||u,r(_,t)};cur.searchReq=ajax.post("al_search.php",_,{onDone(e,s,o,r){const a=1===_["c[not_safe]"];if(!t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&a&&e.is_illegal_q)return(0,_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_20__.showIllegalConfirmModal)({onDisable:()=>{i(e,s,o,r)},callbackClose:()=>{i((0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_27__._)({},e,{real_offset:0,has_more:!1}),`<div id="no_results" class="no_rows">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_inappropriate_query")}</div>`,o,r),uiSearch.hideProgress("search_query")},isNotSafe:a}),!0;confirmIllegalContent(),i(e,s,o,r)},onFail:()=>(uiSearch.hideProgress("search_query"),!0),showProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!0},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!1,cur.loadingMedia=!1},ads:!(!e||_.offset)})},showMore(){var _,e;if(hasIsIllegalContent())return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("ui_search_load_more"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");if(!t||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(t)||cur.isSearchLoading)return void(s&&searcher.appendElements(s));if(s&&searcher.appendElements(s),!cur.has_more)return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(t);cur.disableAutoMore=!1,cur.isSearchLoading=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.lockButton)(t);const o=searcher.getSectionParams();o.offset=cur.offset,o.real_offset=cur.real_offset,o.next_from=cur.next_from,o.query_id=cur.query_id,o.edit=nav.objLoc.edit,o.sign=nav.objLoc.sign,o.all=nav.objLoc.all,o.act="show_more",o.module=cur.module,(null==(e=nav)||null==(_=e.objLoc)?void 0:_["c[section_page]"])&&(o["c[section_page]"]=nav.objLoc["c[section_page]"]),cur.section===sectionCommunities&&(o.random_seed=cur.random_seed,o.force_group_id=cur.force_group_id),ajax.post("al_search.php",o,{onDone(_,e){cur.isSearchLoading=!1,e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("no_results")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("no_results"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results").insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{innerHTML:e,id:"search_more_results"}),t),cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_26__.cutTextToHighlight)(".labeled__searchServicesDesc")),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.unlockButton)(t),searcher.applyOptions(_),searcher.scrollCheck()},cache:o[paramSection]!==sectionAudio||o[paramQuery]?1:0})},switchSection(_,e,t,s){if(t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.checkEvent)(t))return!0;this.removeLogClickHandlers(),e=e||{},_!==sectionCommunities&&_!==sectionMiniApps||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(paramCategory,0),cur.filtersShown=!1);const o=searcher.getSectionParams(_);s&&(o["c[section_page]"]=s),_!==sectionAuto&&_!==sectionQuick&&e.updateStats&&(o.swt=1),e.tab&&(o.tab=1);const r=_===sectionCommunities&&s&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("search_communities_geo_section_page_enabled");if(r&&(o.query_id=window.cur.query_id),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_menu")&&uiRightMenu)if(r){const e=document.querySelector("#ui_rmenu_communities_list"),t={};e&&(e.style.display=s?"block":"none",t.preventSubmenuExpand=!0);const o=s?document.querySelector("#ui_rmenu_search_section_page_nearby"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${_}`,"search_menu");o&&uiRightMenu.switchMenu(o,!1,t)}else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${_}`,"search_menu");e&&uiRightMenu.switchMenu(e)}return searcher.setSection(_),searcher.sendSearchReq(o,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)(),!1},removeLogClickHandlers(){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAuto),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchPeople),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchStatuses),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAudio),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchVideo),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchClips),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceGroupsCatalog)},logSearch(_,e){let t=_[paramQuery];if(!t)return;if(t=t.trim(),0===t.length)return;const s=cur.section,o=cur.module,r=cur.query_id,a=e.event_bits,i=e.event_bits_auto_blocks||[],c=e.query_duration,l=e.model_name,n=e.model_name_auto_blocks||[],E=e.is_anonym,u=e.sort,d=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("no_results")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows").children.length>0;let h;switch(s){case sectionAuto:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAuto,searcher.logSearchAutoBlocks(h,t,r,a,i,n,E,u);break;case sectionAudio:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAudio;break;case sectionVideo:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchVideo;break;case sectionClips:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchClips;break;case sectionStatuses:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchStatuses;break;case sectionPeople:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchPeople;break;case sectionCommunities:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities;const e="nearby"===_[paramSectionPage]||"nearby"===window.nav.objLoc[paramSectionPage];if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("search_communities_web_blocks_enabled")||e)return void searcher.logSearchCommunitiesBlocks(t,r,a,e?_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGroups,n,E,u);break;default:return}switch(o){case moduleFriends:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind;break;case moduleGroupsCatalog:h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceGroupsCatalog}o===moduleEmpty&&s===sectionPeople&&(h=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind),h!==_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAuto&&(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(h,0,d,t,r,a,c,l,"","",E,0,null,u)},logSearchCommunitiesBlocks(_,e,t,s,o,r,a){const i=document.querySelector("#results.search_communities_results");if(!i)return;const c=t||window.cur.event_bits,l=e||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.generateQID)();window.cur.query_id=l;const n=document.querySelector(".search_communities_section_link a");if(n){const _=n.getAttribute("href");"#"!==_&&n.setAttribute("href",`${_}${l}`)}if(Boolean(i.querySelector(".block_geo_groups"))){let e="";o.hasOwnProperty(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups)&&(e=o[_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups]),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities,0,!0,_,l,c,0,e,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups,"",r,2,null,a)}const E=i.querySelector(".block_user_groups"),u=i.querySelector(".block_other_groups"),d=s===_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups;if(E||u||d){const e=o.hasOwnProperty(s)?o[s]:"";(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities,0,!0,_,l,c,0,e,s,"",r,1,null,a,d)}},logSearchAutoBlocks(_,e,t,s,o,r,a,i){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("search_auto_logging_v2"))return;let c=0;const l=new Set([_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchAudio,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchPeople,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGroups,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchVideo,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchClips,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchMarket,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchClassifieds,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchMiniApps]),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows");if(n){const s={search_audio_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchAudio,search_people_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchPeople,search_communities_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGroups,search_video_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchVideo,search_clips_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchClips,search_market_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchMarket,search_classifieds_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchClassifieds,search_mini_apps_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchMiniApps};for(let E=0;E<n.children.length;++E){const u=n.children[E],d=u.classList;let h=null;for(const _ of d)if(s.hasOwnProperty(_)){h=s[_];break}if(h){l.delete(h);let s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.intval)(u.getAttribute("data-block-num"));c=Math.max(c,s);let n=0;o.hasOwnProperty(h)&&(n=o[h]);let E="";r.hasOwnProperty(h)&&(E=r[h]),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_,0,!0,e,t,n,0,E,h,"",a,s,null,i)}}}l.forEach((o=>{c+=1,(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_,0,!1,e,t,s,0,"",o,"",a,c)}))},getSectionParams(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("filter_form");let t={};if(t=!e||_&&_!==cur.section||cur.section===sectionQuick?{[paramSection]:_||cur.section}:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.serializeForm)(e)||{},"communities"===cur.section){var s,o,r,a;var i;if(((null==(o=window.nav)||null==(s=o.objLoc)?void 0:s["c[category]"])||(null==(a=window.nav)||null==(r=a.objLoc)?void 0:r.category))&&!t[paramCategory]&&0!==t[paramCategory])t[paramCategory]=null==(i=window.nav.objLoc)?void 0:i["c[category]"]}t[paramQuery]=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_query");for(const _ in t)if(t.hasOwnProperty(_)){const e="0"==t[_]&&_!==paramQuery&&_!==paramSort;t[_]&&!e||delete t[_],"-1"==t[_]&&t[`${_}_custom`]?(t[_]=t[`${_}_custom`],delete t[`${_}_custom`]):t[`${_}_custom`]&&delete t[`${_}_custom`]}return cur.section!==sectionVideo||t[paramSort]||(t[paramSort]="0"),cur.section===sectionPeople&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("photo")&&!t[paramPhoto]&&(t[paramPhoto]="0"),cur.section===sectionPeople&&t[paramInvite]&&delete t.from,cur.section!==sectionCommunities||!cur.filtersShown||t[paramQuery]||t[paramCategory]||(t[paramSkipCatalog]="1",cur.module===moduleGroupsRecommendations&&(t[paramGroupsRecommendationsModel]="1",t[paramFrom]=cur.from,t[paramBlockPosition]=cur.block_position)),t},sameParams(_){if(!cur.params)return!1;for(let e in _)if(_.hasOwnProperty(e)&&_[e]!=cur.params[e])return!1;for(let e in cur.params)if(cur.params.hasOwnProperty(e)&&_[e]!=cur.params[e])return!1;return!0},switchAudioTop(_){return cur.useRec=_,cur.audioTop=_,this.switchSection(sectionAudio)},showMedia:(_,e,t,s)=>(!t||!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.checkEvent)(t))&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("label",e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("progress",e)),cur.loadingMedia=!s,searcher.switchSection(_,{updateStats:!0},t,s)),updResults(_){if(cur.customSearchChange)return cur.customSearchChange(),!1;const e=searcher.getSectionParams();if(searcher.sameParams(e)||e[paramSection]===sectionVideo&&!e[paramQuery]&&!nav.objLoc[paramQuery])return!1;cur.onSearchChange&&cur.onSearchChange(e);let t=(cur.section===sectionAuto||cur.section===sectionAudio&&e[paramQuery]&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("audio_lyrics_filter")||cur.section===sectionAudio&&!e[paramQuery]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("audio_lyrics_filter"))&&!e.offset;searcher.sendSearchReq(e,t,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)()},onInputChange(_){clearTimeout(cur.requestTimeout),!_||"keydown"===_.type&&13!==_.keyCode?cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),1e3):searcher.updResults()},onKey(){cur.section===sectionQuick&&(clearTimeout(cur.requestTimeout),cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),300))},isFriendNpsTriggerSent:!1,onEnter(_,e){(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_19__.partConfigEnabled)("catalog_new_friends_search_nps_triggers")&&!this.isFriendNpsTriggerSent&&((0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_24__.sendSearchFriendEvent)(),this.isFriendNpsTriggerSent=!0);const t=window.iSearch;t&&t.select&&t.select.isVisible()&&t.select.active>-1||(clearTimeout(cur.requestTimeout),searcher.updResults(),searcher.highlightHotHashtag(e))},checkbox(_,e,t,s){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.checkbox)(_);let o=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.isChecked)(_)?1:0;t&&(o=1-o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e,o),s||searcher.updResults()},setSection(_){_!==cur.section&&_!==sectionAuto&&_&&(cur.section=_)},applyOptions(options,changeSection){var _options,_options1,_options2;const iSearch=window.iSearch;iSearch.initSelect(),searcher.setSection(options.section),options.reply_names&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur.options.reply_names,options.reply_names),delete options.reply_names),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur,options),cur.params=searcher.getSectionParams();const header=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_header"),searchInput=document.querySelector("#search_query_wrap"),searchFilters=document.querySelector("#filter_form");var _searchInput_classList,_searchInput,_searchFilters_classList,_searchFilters,_searchInput_classList1,_searchInput1,_searchFilters_classList1,_searchFilters1;Boolean(null==(_options=options)?void 0:_options.hide_search_form)?(null==(_searchInput=searchInput)||null==(_searchInput_classList=_searchInput.classList)||_searchInput_classList.add("hide"),null==(_searchFilters=searchFilters)||null==(_searchFilters_classList=_searchFilters.classList)||_searchFilters_classList.add("hide")):(null==(_searchInput1=searchInput)||null==(_searchInput_classList1=_searchInput1.classList)||_searchInput_classList1.remove("hide"),null==(_searchFilters1=searchFilters)||null==(_searchFilters_classList1=_searchFilters1.classList)||_searchFilters_classList1.remove("hide"));if(options.tabs)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_tabs_wrap",options.tabs),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("search_tabs_wrap");else if(options.title){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("_header_inner",header);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_,options.title),options.summary&&_.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("span",{className:"page_block_header_count",innerHTML:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.langNumeric)(options.summary,"%s",!0)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("search_tabs_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(header)}if(null!=options.controls&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("_header_extra",header),options.controls||""),void 0!==options.auto_rows&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows").innerHTML=options.auto_rows||""),clearTimeout(cur.setLocTO),options.loc)if(changeSection)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}else cur.setLocTO=setTimeout((()=>{if("search"===nav.objLoc[0]||nav.objLoc[0]===sectionCommunities||"brands"===nav.objLoc[0]||nav.objLoc[0].match(/^people($|\/)/)||cur.searchLoc)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}}),100);if(options.htitle&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.stripHTML)(options.htitle))),void 0!==options.q){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_query",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.stripHTML)(options.q))||"");const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_clear_params");_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(_)}if(cur.uiSort&&void 0!==options.sortHide&&(options.sortHide&&cur.uiSort.selectItem(0,!1),cur.uiSort.disable(options.sortHide)),cur.section===sectionAuto&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("search_menu_auto","search_menu")),options.script)try{eval(options.script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.logEvalError)(_,options.script)}const isIllegal=hasIsIllegalContent(),res=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results"),sc=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_content"),lighted=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(sc,"highlight"),noResultsClass=(null==(_options1=options)?void 0:_options1.real_offset)||"auto"===(null==(_options2=options)?void 0:_options2.section)?"":"search_empty_result ";res.className=`search_results ${noResultsClass}search_${cur.section}_results${cur.section===sectionStatuses||cur.section===sectionAuto?" wall_module":""}${cur.section===sectionStatuses&&""!==options.summary||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("page_block",res)?"":" page_block"} mark_top_verified ${isIllegal?"search_results_illegal":""}`,cur.section===sectionAudio&&(res.className+=" audio_w_covers"),lighted&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(sc,"highlight");const moreResults=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");cur.has_more||moreResults&&moreResults.firstChild?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("seach_pages"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("ui_search_load_more")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("ui_search_load_more")},selectHotHashtag(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query"),s=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(t,"opts")||{}).onEnter;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(t,e),s&&s(t,e),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("top_hashtag_search",0,"click"),!1},highlightHotHashtag(_){_=_?_.toLowerCase():"";let e=!1;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("search_hot_hashtags_item","search_hot_hashtags");return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(t,((t,s)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(s).toLowerCase()===_?(e=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(s,"search_hot_hashtags_item_active")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(s,"search_hot_hashtags_item_active")})),e},toggleFilter(_,e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(_,"search_filter_shut")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(e)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"search_filter_open"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"search_filter_shut"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideDown)(e,200,(()=>{(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks)(),t&&t()}))):(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideUp)(e,200,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"search_filter_shut"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"search_filter_open"),t&&t()}))},appendElements(_){if(_){for(;_.firstChild;)_.parentNode.insertBefore(_.firstChild,_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(_)}},close:()=>nav.go(cur.search_return_to,{},{back:!0}),toggleMinimizedFilters(_,e,t){const s=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(_),o=t?0:200;return void 0===e&&(e=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)),!e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)?(cur.filtersShown=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideUp)(s,o)):e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)&&(cur.filtersShown=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(paramCategory,0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideDown)(s,o)),!1},onCommunitiesToggle(){"search"==cur.module&&(uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${cur.section}`,"search_menu")),searcher.updResults())},showMenuFeaturing(_){var e;const t=document.querySelector(_);if(!t)return;t.classList.add("ui_rmenu_item--featuring");const s=()=>this.hideMenuFeaturing(_);t.addEventListener("click",s),null==(e=window.cur.destroy)||e.push((()=>{t.removeEventListener("click",s)}))},hideMenuFeaturing(_){const e=document.querySelector(_);e&&e.classList.remove("ui_rmenu_item--featuring")},onMarketSwitchSection(_,e=!1){searcher.removeLogClickHandlers();const t=searcher.getSectionParams("market"),s=document.querySelector("#search_query"),o=document.querySelector(".search_menu_market");return e&&s?(s.value="",delete t["c[q]"]):(t.swt=1,t.tab=1),o&&uiRightMenu&&((0,_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_17__.hideFeaturing)().then((()=>{const _=document.querySelector(".MarketSearchBanner");_&&_.remove(),searcher.hideMenuFeaturing(".search_menu_market")})),uiRightMenu.switchMenu(o)),searcher.setSection("market"),searcher.sameParams(t)||searcher.sendSearchReq(t,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)(),!1},subscribe(_,e,t,s,o,r,a){let i,c;const l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_);if(cur.unsubscribed=cur.unsubscribed||{},!s&&r&&!cur.unsubscribed[e]){const a=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_warning"),bodyStyle:"padding: 20px; line-height: 160%;"},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang(r),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_group_leave"),(()=>{a.hide(),searcher.subscribe(_,e,t,s,o)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_cancel"));return!1}if(s){i="al_feed.php",c={act:"subscr",oid:e,hash:t,from:o||"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode")&&(c.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode"))}else{i="al_fans.php",c={act:"unsub",oid:e,hash:t,from:"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode")&&(c.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode"))}ajax.post(i,c,{onDone(){if(a?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(l,"touched",!!s):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(`search_sub${e}`,!s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(`search_unsub${e}`,!!s)),s||(cur.unsubscribed[e]=1),"search_auto_people_block"===o){const _=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(l);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:s?_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.ADD_FRIEND:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.REMOVE_FRIEND,track_code:_,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.USER})}},onFail(_){if(_)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_error"),_).hide,2e3),!0},showProgress(){a?(_.tt&&_.tt.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(l,"loading")):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.lockButton)(_)},hideProgress(){a?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(l,"loading"):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.unlockButton)(_)}})},onResize(){searcher.scrollCheck()},scrollCheck(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile||cur.isSearchLoading||cur.disableAutoMore)return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("ui_search_load_more");if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(_)){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");return void(_&&searcher.appendElements(_))}const e=document.documentElement,t=window.innerHeight||e.clientHeight||document.body.clientHeight;(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollGetY)()+t+200>_.offsetTop&&searcher.showMore()},switchFilter(_,e,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.checkEvent)(t))return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`c[${_}]`)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`c[${_}]`).value=e),cur.section===sectionVideo&&"quality"===_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(paramHd)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(paramHd).value=e<0?0:1),searcher.updResults()},showMiniAppTooltip(_){(0,_search_utils__WEBPACK_IMPORTED_MODULE_25__.showMiniAppTooltip)({el:_})},openMiniApp(_,e,t,s){const o=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(s);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.TAP,track_code:o,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.MINI_APP}),t&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.showWiki)({w:`app${_}`,app_ref:e})},openCommunity(_,e,t){const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_),o=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(s);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.TAP,track_code:o,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.GROUP}),nav.go(_,e,t)},sendNpsStats(_){var e,t;const s=null==(e=_)?void 0:e.hasAttribute(_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.SEARCH_PEOPLE_EXCEPT_FRIENDS),o=null==(t=_)?void 0:t.hasAttribute(_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.SEARCH_PEOPLE_FRIENDS);s&&(0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_24__.sendSearchFriendGlobalEvent)(),o&&(0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_24__.sendSearchFriendEvent)()},openProfile(_,e){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_),s=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(t);return this.sendNpsStats(_),(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.TAP,track_code:s,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.USER}),nav.go(_,e)},openProfileNps(_,e){return this.sendNpsStats(_),nav.go(_,e)},openAudioAuthor(_){var e;const t=null==(e=_)?void 0:e.closest("._audio_row");if(t){var s;const _=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_22__.AudioUtils.getAudioFromEl(t,!0);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.OPEN_OWNER,track_code:(null==(s=_)?void 0:s.trackCode)||"",type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.MUSIC_AUDIO})}},openClip(_,e){const t=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(_);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.PLAY,track_code:t,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.VIDEO}),"click"===e.type&&(e.ctrlKey||e.metaKey)},openVideo(_,e){const t=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(_);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.TAP,track_code:t,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.VIDEO}),cur.cancelClick?cur.cancelClick=!1:cur.chooseVideoMedia?cur.chooseVideoMedia(this,"-197864572_456239738"):Video.show(e,"-197864572_456239738",{autoplay:1,queue:0,listId:"",playlistId:""},_)},openVideoLink(_){const e=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(_);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.PLAY,track_code:e,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.VIDEO})},openVideoAuthor(_){const e=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(_);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.OPEN_OWNER,track_code:e,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.VIDEO})},onPostClick(_){var e;if(!(null==(e=_)?void 0:e.closest(".search_auto_results")))return;const t=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.getTrackCodeFromElement)(_,"postTrackCode");(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.SearchClickActionMap.TAP,track_code:t,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_21__.EventItemType.POST})}},iSearch={init(_,e){if(this.inited)return;const t=this;this.inited=!0,this.input=_,this.cont=_.parentNode.parentNode;const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{className:"results_container",innerHTML:'<div class="result_list"></div>'});this.cont.appendChild(s),this.resultList=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("result_list",s)[0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(this.resultList),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.chrome&&(this.resultList.style.opacity=1),this.resultList.style.width=s.style.width="552px",this.onShowCallback=!!e&&e.onShow,this.initSelect(e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(_,"keyup click mouseup",t.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(document,"click",t.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(_,"keypress keydown",t.inputDownHandler),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_search")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_search").onclick=_=>hab.getLoc().indexOf("search")?nav.go("search",_,{search:!0}):(window.searcher&&searcher.close(),!1))},inputUpHandler(_){const e=window.iSearch;if(!e.select)return;if((e.select.isVisible()&&e.select.active>-1||cur.preventISRequest)&&(delete cur.preventISRequest,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(_.keyCode,[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.UP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.PAGEUP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.PAGEDOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN])))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_);clearTimeout(cur.requestTimeout);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e.input);e.currentTerm=t;const s=cur.section;t?cur.requestTimeout=setTimeout((()=>{cur.setISearch=!0,ajax.post("/hints.php?act=a_gsearch_hints",{q:t,section:s},{onDone(_){e.currentTerm===t&&cur.setISearch&&e.showSelectList(t,_),delete cur.setISearch},cache:1})}),300):e.select.hide()},documentClick(){const _=window.iSearch;_.select&&_.select.hide()},inputDownHandler(_){const e=window.iSearch;if(e.select){if(!e.select||e.select.active<0)return _.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN&&e.select&&(cur.preventISRequest=!0,e.select.hide()),!0;if(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE||(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN||10===_.keyCode)&&e.select&&e.select.isVisible()){const t=e.select.list.childNodes[e.select.active],s=t?t.getAttribute("val"):"";let o;if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(e.lastItems,(function(){this[0]===s&&(o=this)})),!o)return;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e.input,o[3]+(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE?" ":"")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(e.input,e.input.length),_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE&&(cur.preventISRequest=!0,e.select.hide(),searcher.updResults()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_)}return _.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN&&10!==_.keyCode||!e.select||!e.select.isVisible()||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.triggerEvent)(document,_.type,_),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_))}},initSelect(){const _=window._iu,e=window.Select;if(this.select||!e||!_)return;if(!this.resultList)return;this.guid=_.reg(this);const t=this;this.select=new e(this.resultList,{selectFirst:!1,onItemSelect:this.onItemSelect.bind(this),onShow:()=>((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(t.onShowCallback)&&t.onShowCallback(),_.sel(t.guid)),onHide:_.sel.pbind(!1),cycle:!0}),this.select.hide()},showSelectList(_,e){const t=this;this.select&&((e=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isArray)(e)&&e.length?e:[]).length?(this.select.clear(),this.lastItems=e,this.select.content(e),this.select.show(),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(this.onShowCallback)&&this.onShowCallback()):t.select.hide())},onItemSelect(_){if(!this.select)return;let e;if(this.select.hide(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(this.lastItems,(function(){this[0]===_&&(e=this)})),!e)return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{innerHTML:e[3]});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(this.input,t.innerText||t.textContent),this.input.blur(),searcher.updResults()},onEvent(_){_.type===(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.opera||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mozilla?"keypress":"keydown")&&this.select.handleKeyEvent(_)},destroy(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.cleanElems)(this.resultList),clearTimeout(_?_.requestTimeout:cur.requestTimeout),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(this.input,"keyup click mouseup",this.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(document,"click",this.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(this.input,"keypress keydown",this.inputDownHandler),this.select&&(this.select.destroy(),delete this.select),this.resultList&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(this.resultList.parentNode),delete this.lastItems,this.inited=!1},updateResultsList(_){_?_+="px":_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query_wrap"),"wide")?"512px":"451px",this.resultList.style.width=_}}},421553:(_,e,t)=>{t.d(e,{searchActions:()=>O,slideHide:()=>D,slideShow:()=>m});var s=t(379610),o=t(849222),r=t(725296),a=t(29271),i=t(254667),c=t(664988),l=t(514986),n=t(10645),E=t(82161),u=t(953908),d=t(893106),h=t(795558),b=t(854099),P=t(839470),M=t(255372);const m=_=>{(0,h.isVisible)(_)||(0,d.slideDown)(_,150)},D=_=>{(0,h.isVisible)(_)&&(0,d.slideUp)(_,150)},O={peopleMessage(_){(0,s.showWriteMessageBox)(window.event||{},_)},peopleAction(_,e,t){ajax.post(e,t,{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_)}})},ownerAction({parentNode:_},e,t){ajax.post(e,t,{onDone(e){_.innerHTML=e}})},groupAction(_,e,t,s,r){ajax.post("al_groups.php",{act:"member_action",action:e,gid:t,mid:s,hash:r,context:"search"},{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_);const t=_tbLink.loc;t&&(0,o.globalHistoryDestroy)(t)}})},inviteToGroup(_,e,t,s,o){const r=o=>{let r,i;o?(r=a.getLang("search_cancel_invitation"),i=b.FlatButtonAppearance.SECONDARY):(r=a.getLang("search_send_invitation"),i=b.FlatButtonAppearance.PRIMARY),_.onclick=()=>{O.inviteToGroup(_,e,t,s,o?1:0)},b.FlatButton.setLabel(_,r),b.FlatButton.setAppearance(_,i)},c=()=>b.FlatButton.lock(_),l=()=>b.FlatButton.unlock(_);return o?ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:s},{onDone(){r(0)},showProgress:c,hideProgress:l}):ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:s},{onDone(e,t){e?r(1):((0,i.showMsg)((0,h.gpeByClass)("people_row",_),t,"msg"),(0,h.hide)(_))},showProgress:c,hideProgress:l}),!1},showLyrics(_,e,t){let s=(0,h.ge)(`lyrics${_}`);s?(0,h.isVisible)(s)?(0,h.hide)(s):(0,h.show)(s):(s=(0,h.ce)("div",{id:`lyrics${_}`,className:"audio_lyrics_wrap",innerHTML:'<div class="loading"></div>'}),(0,h.ge)(`audio${_}`).appendChild(s),ajax.post("/al_audio.php",{act:"get_lyrics",lid:e,aid:_,top:t},{onDone(_){s.innerHTML=`<div class="audio_lyrics ta_l">${_}</div>`}}))},toggleBanInGroup(_,e,t,s){(0,l.showBox)("/groupsedit.php",{act:"bl_edit",name:`id${e}`,gid:t},{stat:["page.css","ui_controls.js","ui_controls.css"]})},selectCategory(_,e,t){(0,h.ge)("c[category]").value=e,_&&(0,h.hasClass)(_,"_ui_rmenu_subitem")&&uiRightMenu.switchMenu(_);const s=(0,h.ge)("search_query");return(0,h.val)(s)&&((0,h.val)(s,""),s.focus(),(0,u.triggerEvent)(s,"keyup")),window.searcher.toggleMinimizedFilters((0,h.ge)("search_filters_minimized"),!1),window.searcher.updResults(),!1},searchUnchooseGeoPoint(){const _=(0,h.ge)("search_status_map"),e=(0,h.ge)("search_status_map_delete_wrap");(0,h.removeClass)(_,"search_status_map_selected"),(0,h.setStyle)(_,{backgroundImage:""}),e&&e.tt&&e.tt.hide&&e.tt.hide(),(0,h.val)("search_status_map_hidden",""),window.searcher.updResults()},chooseGeoPoint(_,e,t,s){boxQueue.hideLast();const o=Math.pow(10,10);let r=200,a=120;window.devicePixelRatio>=2&&(r*=2,a*=2),_=Math.round(_*o)/o,e=Math.round(e*o)/o;const i=(0,h.ge)("search_status_map");(0,h.addClass)(i,"search_status_map_selected"),(0,h.setStyle)(i,{backgroundImage:`url(/maps?lat=${_}&lng=${e}&z=${t}&w=${r}&h=${a})`}),s||((0,h.val)("search_status_map_hidden",`${_},${e},${t}`),window.searcher.updResults())},searchChooseGeoPoint(){const _={act:"a_choose_place_box",search:1},e=(0,h.val)("search_status_map_hidden").match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/);e&&(_.lat=(0,c.floatval)(e[1]),_.lon=(0,c.floatval)(e[2]),_.zoom=e[3]||8),(0,l.showBox)("/al_places.php",_),cur.chooseGeoPoint=window.searchActions.chooseGeoPoint},searchUrlOnChange(_,e,t){const s=(0,h.ge)("search_status_url"),o=s.name,a=e?"c[domain]":"c[url]";return(0,r.radiobtn)(_,e,"search_status_hint_domain"),(0,h.elfocus)(s),(0,h.val)(s)&&a!==o&&(s.name=a,window.searcher.updResults()),(0,u.cancelEvent)(t)},onChangeCommunityType(_){_=(0,c.positive)(_),(0,h.val)((0,h.ge)("c[type]"),_),m("region_filters"),3===_?(m("events_filter"),(0,h.val)((0,h.ge)("all_events"),(0,r.isChecked)("future")?0:1)):(D("events_filter"),(0,h.val)((0,h.ge)("all_events"),0)),(0,n.checkPageBlocks)(),window.searchActions.updateCommunityThemes(_),window.searcher.updResults()},updateCommunityThemes(_,e){_=(0,c.positive)(_);const t=(0,c.positive)((0,h.val)((0,h.ge)("not_safe_search")));let s=[];let o;t?s=cur.communityThemes[_]||[]:(0,E.each)(cur.communityThemes[_]||[],(function(){this[5]||s.push(this)})),e?(o=(0,c.positive)(cur.communityThemesDD.val()),!(0,E.inArray)(o,cur.notSafeThemesIds)&&o||cur.communityThemesDD.clear()):cur.communityThemesDD.clear(),cur.communityThemesDD.setOptions({autocomplete:!1}),cur.communityThemesDD.setData(s),cur.communityThemesDD.setOptions({autocomplete:!0}),_>1?m("cTheme"):D("cTheme")},onChangeCommunityTheme(_){(0,h.val)((0,h.ge)("c[theme]"),_),window.searcher.updResults()},handleChangeNotSave(_,e,t,s){const o=(0,h.val)((0,h.ge)("c[theme]"));(0,E.inArray)(o,cur.notSafeThemesIds)&&(0,h.val)((0,h.ge)("c[theme]"),""),window.searcher.checkbox(_,e,t,!0),window.searchActions.updateCommunityThemes((0,h.val)((0,h.ge)("c[type]")),!0),window.searcher.updResults(s)},onChangeNotSafe(_,e,t){const s=!!(0,r.isChecked)(_);var o,a;if((0,P.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&cur.is_illegal_q&&s)return null==(a=document.querySelector(".search_query_wrap"))||null==(o=a.classList)||o.add("search_query_illegal"),void(0,M.showIllegalConfirmModal)({onDisable:()=>{window.searchActions.handleChangeNotSave(_,e,t,!0)},isNotSafe:!1});window.searchActions.handleChangeNotSave(_,e,t)}}}}]);try{stManager.done("dist/web/chunks/5fd1765b.23e07b6d.js")}catch(_){}