(()=>{"use strict";var __webpack_modules__={612696:(e,t,o)=>{o.d(t,{Icon56IllustrationAntennaDark:()=>a});var a=(0,o(28178).makeIcon)("Icon56IllustrationAntennaDark","illustration_antenna_dark_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="illustration_antenna_dark_56"><path fill="#2929B2" d="m18.834 33.983-.123-.097a3.054 3.054 0 0 0-4.288.516l-6.06 7.717a3.054 3.054 0 0 0 .516 4.289l.123.096a3.054 3.054 0 0 0 4.288-.515l6.06-7.718a3.054 3.054 0 0 0-.516-4.288Z" /><path fill="#07F" d="M44.493 37.686c-7.576 8.417-20.262 7.696-29.437-.505S3.812 16.354 11.388 7.888a68.327 68.327 0 0 1 19.168 12.025 66.294 66.294 0 0 1 13.937 17.773Z" /><path fill="#00EAFF" d="M44.396 37.794c-3.234 3.608-13.227-.108-22.462-8.309-9.235-8.2-13.985-17.773-10.75-21.392.144-.157 1.034-1.203 1.202-1.347 3.607-2.838 12.494 1.816 21.248 9.62 8.273 7.443 13.696 15.488 12.145 19.709a9.272 9.272 0 0 1-1.383 1.72Z" /><path fill="#07F" d="M45.526 36.532c2.785-3.114-2.39-12.285-11.557-20.484-9.167-8.2-18.857-12.323-21.641-9.21-2.785 3.114 2.389 12.285 11.556 20.485 9.168 8.2 18.857 12.323 21.642 9.209Z" /><mask id="illustration_antenna_dark_56_a" width="36" height="33" x="11" y="5" maskUnits="userSpaceOnUse" style="mask-type:alpha"><path fill="#07F" d="M45.526 36.532c2.785-3.114-2.39-12.285-11.557-20.484-9.167-8.2-18.857-12.323-21.641-9.21-2.785 3.114 2.389 12.285 11.556 20.485 9.168 8.2 18.857 12.323 21.642 9.209Z" /></mask><g mask="url(#illustration_antenna_dark_56_a)"><path fill="#2929B2" d="M39.5 42.822c2.784-3.114-2.39-12.285-11.557-20.484-9.168-8.2-18.857-12.323-21.642-9.21-2.785 3.114 2.39 12.285 11.557 20.485s18.857 12.323 21.641 9.21Z" /></g><path fill="#00EAFF" d="m30.808 19.637.205.192L25 28.247a37.414 37.414 0 0 1-2.188-1.96l7.996-6.65Z" /><path fill="#00EAFF" d="M31 21.549a2.2 2.2 0 1 0 0-4.401 2.2 2.2 0 0 0 0 4.4Z" /><path fill="#2929B2" d="M40.705 19.072a.901.901 0 0 1-.89-.794 7.84 7.84 0 0 0-3.92-5.94 7.636 7.636 0 0 0-4.065-1.023.926.926 0 0 1-.926-.877.902.902 0 0 1 .878-.926 9.716 9.716 0 0 1 5.015 1.202 9.62 9.62 0 0 1 4.81 7.287.901.901 0 0 1-.782 1.01l-.12.06Z" /><path fill="#07F" d="M45.767 18.146a.914.914 0 0 1-.902-.794 12.025 12.025 0 0 0-6.012-9.151 11.784 11.784 0 0 0-6.277-1.575.902.902 0 1 1 0-1.804 13.648 13.648 0 0 1 7.215 1.804 13.865 13.865 0 0 1 6.926 10.51.889.889 0 0 1-.781.998l-.169.012Z" /><path fill="#00EAFF" d="M50.457 17.424a.914.914 0 0 1-.902-.842A15.705 15.705 0 0 0 33.213 1.816a.914.914 0 0 1-.926-.854A.926.926 0 0 1 33.13 0a17.46 17.46 0 0 1 9.392 2.26 17.64 17.64 0 0 1 8.838 14.19.914.914 0 0 1-.842.962l-.06.012Z" /><path fill="#07F" d="M14.575 44.444a3.52 3.52 0 0 0-3.518-3.523 3.52 3.52 0 0 0-3.517 3.523v5.435a3.52 3.52 0 0 0 3.517 3.524 3.52 3.52 0 0 0 3.518-3.524v-5.435Z" /><path fill="#07F" d="M24.603 54.4H6.338a.913.913 0 0 1-.926-.925v-3.608a.914.914 0 0 1 .926-.926h10.064c.68 0 1.347.179 1.936.517l6.566 3.836a.601.601 0 0 1-.3 1.107Z" /><path fill="#00EAFF" d="M11.063 45.839a1.527 1.527 0 1 0 0-3.054 1.527 1.527 0 0 0 0 3.054Z" /><path fill="#2929B2" d="M24.964 52.813H5.244a.613.613 0 0 0-.614.614v1.96c0 .338.275.613.613.613h19.721a.613.613 0 0 0 .613-.613v-1.96a.613.613 0 0 0-.613-.614Z" /></symbol>',56,56,!1,void 0)},791771:(e,t,o)=>{o.d(t,{Icon56IllustrationAntennaLight:()=>a});var a=(0,o(28178).makeIcon)("Icon56IllustrationAntennaLight","illustration_antenna_light_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="illustration_antenna_light_56"><path fill="#07F" d="m18.834 33.983-.123-.097a3.054 3.054 0 0 0-4.288.516l-6.06 7.717a3.054 3.054 0 0 0 .516 4.289l.123.096a3.054 3.054 0 0 0 4.288-.515l6.06-7.718a3.054 3.054 0 0 0-.516-4.288Z" /><path fill="#00EAFF" d="M44.493 37.686c-7.576 8.417-20.262 7.696-29.437-.505S3.812 16.354 11.388 7.888a68.327 68.327 0 0 1 19.168 12.025 66.294 66.294 0 0 1 13.937 17.773Z" /><path fill="#fff" d="M44.396 37.794c-3.234 3.608-13.227-.108-22.462-8.309-9.235-8.2-13.985-17.773-10.75-21.392.144-.157 1.034-1.203 1.202-1.347 3.607-2.838 12.494 1.816 21.248 9.62 8.273 7.443 13.696 15.488 12.145 19.709a9.272 9.272 0 0 1-1.383 1.72Z" /><path fill="#07F" d="M45.526 36.532c2.785-3.114-2.39-12.285-11.557-20.484-9.167-8.2-18.857-12.323-21.641-9.21-2.785 3.114 2.389 12.285 11.556 20.485 9.168 8.2 18.857 12.323 21.642 9.209Z" /><mask id="illustration_antenna_light_56_a" width="36" height="33" x="11" y="5" maskUnits="userSpaceOnUse" style="mask-type:alpha"><path fill="#07F" d="M45.526 36.532c2.785-3.114-2.39-12.285-11.557-20.484-9.167-8.2-18.857-12.323-21.641-9.21-2.785 3.114 2.389 12.285 11.556 20.485 9.168 8.2 18.857 12.323 21.642 9.209Z" /></mask><g mask="url(#illustration_antenna_light_56_a)"><path fill="#2929B2" d="M39.5 42.822c2.784-3.114-2.39-12.285-11.557-20.484-9.168-8.2-18.857-12.323-21.642-9.21-2.785 3.114 2.39 12.285 11.557 20.485s18.857 12.323 21.641 9.21Z" /></g><path fill="#00EAFF" d="m30.808 19.637.205.192L25 28.247a37.414 37.414 0 0 1-2.188-1.96l7.996-6.65Z" /><path fill="#00EAFF" d="M31 21.549a2.2 2.2 0 1 0 0-4.401 2.2 2.2 0 0 0 0 4.4Z" /><path fill="#2929B2" d="M40.705 19.072a.901.901 0 0 1-.89-.794 7.84 7.84 0 0 0-3.92-5.94 7.636 7.636 0 0 0-4.065-1.023.926.926 0 0 1-.926-.877.902.902 0 0 1 .878-.926 9.716 9.716 0 0 1 5.015 1.202 9.62 9.62 0 0 1 4.81 7.287.901.901 0 0 1-.782 1.01l-.12.06Z" /><path fill="#07F" d="M45.767 18.146a.914.914 0 0 1-.902-.794 12.025 12.025 0 0 0-6.012-9.151 11.784 11.784 0 0 0-6.277-1.575.902.902 0 1 1 0-1.804 13.648 13.648 0 0 1 7.215 1.804 13.865 13.865 0 0 1 6.926 10.51.889.889 0 0 1-.781.998l-.169.012Z" /><path fill="#00EAFF" d="M50.457 17.424a.914.914 0 0 1-.902-.842A15.705 15.705 0 0 0 33.213 1.816a.914.914 0 0 1-.926-.854A.926.926 0 0 1 33.13 0a17.46 17.46 0 0 1 9.392 2.26 17.64 17.64 0 0 1 8.838 14.19.914.914 0 0 1-.842.962l-.06.012Z" /><path fill="#2929B2" d="M14.575 44.444a3.52 3.52 0 0 0-3.518-3.523 3.52 3.52 0 0 0-3.517 3.523v5.435a3.52 3.52 0 0 0 3.517 3.524 3.52 3.52 0 0 0 3.518-3.524v-5.435Z" /><path fill="#00EAFF" d="M24.603 54.4H6.338a.913.913 0 0 1-.926-.925v-3.608a.914.914 0 0 1 .926-.926h10.064c.68 0 1.347.179 1.936.517l6.566 3.836a.601.601 0 0 1-.3 1.107Z" /><path fill="#fff" d="M11.063 45.839a1.527 1.527 0 1 0 0-3.054 1.527 1.527 0 0 0 0 3.054Z" /><path fill="#07F" d="M24.964 52.813H5.244a.613.613 0 0 0-.614.614v1.96c0 .338.275.613.613.613h19.721a.613.613 0 0 0 .613-.613v-1.96a.613.613 0 0 0-.613-.614Z" /></symbol>',56,56,!1,void 0)},896415:(e,t,o)=>{o.d(t,{Icon28RefreshOutline:()=>a});var a=(0,o(28178).makeIcon)("Icon28RefreshOutline","refresh_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="refresh_outline_28"><path d="M12.293 2.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414l1.28-1.282a8 8 0 1 0 6.393 2.66 1 1 0 1 1 1.491-1.334A9.965 9.965 0 0 1 24 15c0 5.523-4.477 10-10 10S4 20.523 4 15c0-5.386 4.259-9.778 9.593-9.992l-1.3-1.3a1 1 0 0 1 0-1.415" /></symbol>',28,28,!1,void 0)},537090:(e,t,o)=>{o.d(t,{Icon56ErrorOutline:()=>a});var a=(0,o(28178).makeIcon)("Icon56ErrorOutline","error_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="error_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path fill="currentColor" fill-rule="nonzero" d="M28 4c13.255 0 24 10.745 24 24S41.255 52 28 52 4 41.255 4 28 14.745 4 28 4m0 3C16.402 7 7 16.402 7 28s9.402 21 21 21 21-9.402 21-21S39.598 7 28 7m0 27a2 2 0 1 1 0 4 2 2 0 0 1 0-4m0-17.5a1.5 1.5 0 0 1 1.5 1.5v11l-.007.144A1.5 1.5 0 0 1 26.5 29V18l.007-.144A1.5 1.5 0 0 1 28 16.5" /></g></symbol>',56,56,!1,void 0)},657198:(e,t,o)=>{o.d(t,{checkAmountToValid:()=>a});const a=(e,t)=>!(!e||!t)&&(e>=t.min_donut_sum&&e<=t.max_donut_sum)},30782:(e,t,o)=>{o.d(t,{getDonutBadgesMiniappData:()=>n});var a=o(599809);const n=({ownerId:e,id:t})=>(0,a.api)("donut.getDonutBadgesMiniappData",{owner_id:e,post_id:t})},599882:(e,t,o)=>{o.d(t,{sendDonut:()=>_});var a=o(599809),n=o(95432),i=o(755121),r=o(222285);const _=({objectId:e,amount:t,text:o,shouldPublishComment:_})=>(0,a.api)("donut.getDonutBadgePaymentLink",{owner_id:e.ownerId,amount:t,source:"web",item_id:e.id,text:o,publish_comment:_?1:0}).then((e=>{const{payment_link:t}=e,o=window.boxLayerBG,a=window.boxLayerWrap;(0,n.showWiki)({w:t},!1,!1,{noLocChange:1,skipBoxesHide:1,noClickHide:1,queue:1,onLoaded:()=>{o&&a&&(o.style.visibility="hidden",a.style.visibility="hidden",a.style.opacity="0")}}),window.cur.onExternalAppDone=e=>{var t;null==(t=window.WkView)||t.hide(!1,!0),window.cur.onExternalAppDone=null,o&&a&&(o.style.visibility="visible",a.style.visibility="visible",a.style.opacity="1"),e.status?(0,i.setDonutStatus)(r.DONUT_FORM_STATUSES.waiting):(0,i.setDonutStatus)(r.DONUT_FORM_STATUSES.payment_cancel)}}))},807024:(e,t,o)=>{o.d(t,{initOneTimeDonutTqInteractiveHandlers:()=>i});var a=o(283452),n=o(335685);const i=()=>{(0,a.tq)().setInteractiveHandler("Donut/openOneTimeDonut",(e=>{if(!e.payload.dataAttrs)return;const{objectType:t,objectOwnerId:o,objectId:a}=e.payload.dataAttrs;if(!t||!o||!a)throw new Error("No required attributes in tq Donut/openOneTimeDonut");(0,n.initOneTimeDonut)({objectId:{id:Number(a),type:Number(t),ownerId:Number(o)}})}))}},335685:(e,t,o)=>{o.d(t,{initOneTimeDonut:()=>l});var a=o(659397),n=o(82490),i=o(218662),r=o(584356),_=o(216833);o(159068);const l=({objectId:e})=>{const t=(0,i.getPostById)(e.ownerId,e.id);(0,_.isOneTimeDonutWithoutBadges)()&&t&&((0,r.showBoxLoader)(),(window.OneTimeDonut?Promise.resolve():(0,a.asyncImportLoader)((()=>Promise.all([o.e(2067),o.e(72728)]).then(o.bind(o,831468)))).then((({OneTimeDonut:e})=>{window.OneTimeDonut=e}))).then((()=>window.OneTimeDonut.init(e))).catch((e=>{(0,n.donutLogger)("Error loading module OneTimeDonut",e)})).finally((()=>{(0,r.hideBoxLoader)()})))}},755121:(e,t,o)=>{o.d(t,{$amount:()=>h,$comment:()=>A,$commentsCheckBox:()=>C,$donutStatus:()=>O,$isCustomSum:()=>k,$isPriceValid:()=>U,$miniAppData:()=>g,$objectId:()=>f,clearAmount:()=>m,clearMiniAppData:()=>v,customSumToggleApi:()=>M,getDonutBadgesMiniappDataFx:()=>u,onAmountButtonClick:()=>b,onCustomSumButtonClick:()=>y,sendDonutFx:()=>d,setAmount:()=>p,setComment:()=>P,setCommentsCheckBox:()=>D,setDonutStatus:()=>x,setInitialDonutStatus:()=>I,setMiniAppData:()=>E,setObjectID:()=>w,submitDonutForm:()=>c});var a=o(262962),n=o(798116),i=o(599882),r=o(30782),_=o(222285),l=o(657198);const s=a.rootDomain.createDomain("donut"),d=s.createEffect(i.sendDonut),u=s.createEffect(r.getDonutBadgesMiniappData),c=s.createEvent("submit_donut_form"),p=s.createEvent("set_amount"),m=p.prepend((()=>null)),h=(0,n.restore)(p,null),b=s.createEvent("on_amount_button_click"),w=s.createEvent("set_object_id"),f=(0,n.restore)(w,null),g=s.createStore(null),{setMiniAppData:E,clearMiniAppData:v}=(0,n.createApi)(g,{setMiniAppData:(e,t)=>t,clearMiniAppData:()=>null}),k=s.createStore(!1),M=(0,n.createApi)(k,{setTrue:()=>!0,setFalse:()=>!1}),y=s.createEvent("on_custom_sum_button_click"),D=s.createEvent("set_comments_checkbox"),C=(0,n.restore)(D,!1),P=s.createEvent("set_comment"),A=(0,n.restore)(P,""),O=s.createStore(_.DONUT_FORM_STATUSES.initial),{setInitialDonutStatus:I,setDonutStatus:x}=(0,n.createApi)(O,{setDonutStatus:(e,t)=>t,setInitialDonutStatus:()=>_.DONUT_FORM_STATUSES.initial}),U=(0,n.combine)(h,g,l.checkAmountToValid)},879688:(e,t,o)=>{var a=o(755121),n=o(798116);(0,n.sample)({clock:a.onAmountButtonClick,target:[a.setAmount,a.customSumToggleApi.setFalse]}),(0,n.sample)({clock:a.onCustomSumButtonClick,target:[a.clearAmount,a.customSumToggleApi.setTrue]}),(0,n.sample)({clock:a.$miniAppData,filter:Boolean,fn:e=>{var t;return null==(t=e)?void 0:t.can_post_comment},target:a.setCommentsCheckBox}),(0,n.sample)({source:a.$objectId,filter:Boolean,target:[a.getDonutBadgesMiniappDataFx,a.clearMiniAppData,a.setInitialDonutStatus]}),(0,n.sample)({clock:a.getDonutBadgesMiniappDataFx.doneData,target:a.setMiniAppData}),(0,n.sample)({clock:a.submitDonutForm,source:{objectId:a.$objectId,amount:a.$amount,text:a.$comment,shouldPublishComment:a.$commentsCheckBox},filter:({amount:e,objectId:t})=>Boolean(e&&t),fn:({amount:e,objectId:t,text:o,shouldPublishComment:a})=>({amount:e,objectId:t,text:a?o:"",shouldPublishComment:a}),target:a.sendDonutFx})},159068:(e,t,o)=>{o(879688)},262962:(e,t,o)=>{o.d(t,{rootDomain:()=>a});const a=(0,o(798116).createDomain)("root")},384025:(e,t,o)=>{var a,n,i,r=o(283452),_=o(29271),l=o(514986),s=o(256402),d=o(560004),u=o(20413),c=o(113799),p=o(705758),m=o(842162),h=o(377974),b=o(216833),w=o(807024),f=o(839470),g=o(809053),E=o(923568),v=o(95432),k=o(864424);(null==(n=window.vk)||null==(a=n.pe)?void 0:a.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.Page=s.default,window.page=s.default,window.Wall=d.default,window.wall=d.default,window.WallUpload=u.default,window.Composer=c.default,window._postsSendTimer||(window._postsSendTimer=window.setTimeout(s.default.postsSend,1e4)),(0,h.initOpenBadgesInfoModalTq)(),(0,h.initStartupBadgesCheckTq)(),(0,f.partConfigEnabled)("groups_one_time_donut_without_badges")&&(0,w.initOneTimeDonutTqInteractiveHandlers)(),(0,b.isBadgesEnabled)()&&((0,h.initBadgesTqInteractiveHandlers)(),(0,h.initStartupBadgesStackTq)());try{window.stManager.done(window.jsc("web/page.js")),(0,r.tq)().setInteractiveHandler("Wall/fake_news_info",(({payload:e})=>{var t;const{event:o,dataAttrs:a}=e;null==(t=o)||t.preventDefault();const{title:n,text:i,more_button_text:r,more_button_url:_,ok_button_text:l}=a;(0,m.showFakeInfoNotification)({title:n,text:i,more_button_text:r,more_button_url:_,ok_button_text:l}),window.ajax.post("al_page.php",{act:"track_fake_news_caption_clicked"})})),(0,r.tq)().setInteractiveHandler("Page/owner_new_photo",(e=>{try{const{options:t}=e.payload.dataAttrs,{ownerId:o,useNewForm:a}=JSON.parse(t);a?s.default.ownerAvatarUpload(o):s.default.ownerPhoto(o)}catch(e){(0,p.showErrorBox)(_.getLang("global_error"))}})),(0,r.tq)().setInteractiveHandler("Page/owner_edit_photo",(e=>{try{const{options:t}=e.payload.dataAttrs,{ownerId:o,hash:a,useNewForm:n}=JSON.parse(t);n?s.default.ownerAvatarEdit(o,a):s.default.ownerCrop(o,a)}catch(e){(0,p.showErrorBox)(_.getLang("global_error"))}})),(0,r.tq)().setInteractiveHandler("Post/captionClickMention",(e=>{const t=e.payload.target;if(!t)return;const o=(0,g.getTrackCodeFromPost)(t);(0,k.sendCaptionLinkClickEvent)(o,(0,g.resolveRefFromCur)()),(0,v.mentionClick)(t,e.payload.event)})),(0,r.tq)().setInteractiveHandler("Post/captionClick",(e=>{const t=e.payload.target;if(!t)return;const o=(0,g.getTrackCodeFromPost)(t);(0,k.sendCaptionLinkClickEvent)(o,(0,g.resolveRefFromCur)()),E.default.go(t,e.payload.event)})),(0,r.tq)().setInteractiveHandler("Page/owner_set_exist_photo",(e=>{try{const{options:t}=e.payload.dataAttrs,{photo:o,useNewForm:a,width:n,height:i}=JSON.parse(t);if(!n&&!i)return void(0,p.showErrorBox)(_.getLang("global_error"));n&&i&&n>=400&&i>=400?a?s.default.ownerAvatarSelect(o):(0,l.showBox)("al_page.php",{act:"owner_photo_edit",photo:o},{stat:["owner_photo.css",window.jsc("web/owner_photo.js"),"tagger.css",window.jsc("web/tagger.js")]}):(0,p.showErrorBox)((0,_.langReplace)(_.getLang("global_update_photo_error_too_small"),{width:"400",height:"400"}))}catch(e){(0,p.showErrorBox)(_.getLang("global_error"))}}))}catch(e){}},842162:(e,t,o)=>{o.d(t,{showFakeInfoNotification:()=>p});var a=o(434788),n=o(785893),i=o(537090),r=o(359639),_=o(816511),l=o(207592),s=o(439536),d=o(398310),u=o(832550);const c=({title:e,text:t,more_button_text:o,more_button_url:a,ok_button_text:r,onClose:c})=>(0,n.jsxs)(_.ModalBox,{children:[(0,n.jsx)(l.ModalMedia,{iconAppearance:"secondary",children:(0,n.jsx)(i.Icon56ErrorOutline,{})}),(0,n.jsx)(s.ModalTextLayout,{subheader:t,subheaderMode:"secondary",children:e}),(0,n.jsxs)(d.ButtonLayout,{mode:"vertical",children:[!!a&&(0,n.jsx)(u.Button,{href:a,target:"_blank",rel:"noopener",mode:"tertiary",size:"m",children:o}),(0,n.jsx)(u.Button,{onClick:c,mode:"primary",size:"m",children:r})]})]});function p(e){(0,r.showMessageBoxModal)((t=>(0,n.jsx)(c,(0,a._)({},t,e))),{width:450})}},113799:(e,t,o)=>{o.d(t,{default:()=>h});var a=o(795558),n=o(301230),i=o(29271),r=o(664988),_=o(82161),l=o(953908),s=o(95432),d=o(452846),u=o(893106),c=o(438221),p=o(854099);const m={init:function(e,t){if(!(e=(0,a.ge)(e)))return null;const o=t.hashtagEnable?"_hashtag":"";let n=(0,a.data)(e,"composer"+o);if(n)return n;n={input:e,inited:!1,options:t},(0,a.data)(e,"composer"+o,n),n.wddWrap=(0,a.ce)("div",{className:"composer_wdd clear_fix "+(t.wddClass||""),id:e.id+"_composer_wdd"+o,innerHTML:'<input type="hidden" id="'+e.id+'_composer_wdd_term"/>'},{width:t.width||(0,a.getSize)(e)[0]}),t.appendTo&&(0,_.isFunction)(t.appendTo)?t.appendTo(n.wddWrap):(0,a.domInsertBefore)(n.wddWrap,e.nextSibling),n.wddInput=n.wddWrap.firstChild,n.wdd=WideDropdown.initSelect(n.wddWrap,(0,_.extend)({text:n.wddInput,input:e,noResult:t.lang.noResult||"",introText:t.lang.introText||"",toup:t.toup,wddOpts:t.wddOpts,searchKeys:t.searchKeys,width:"auto",onItemSelect:m.onItemSelect.bind(m).pbind(n),renderLimit:50,hashtagEnable:t.hashtagEnable||!1},t.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),m.initEvents(n),t.media&&(n.addMedia=new window.MediaSelector(t.media.lnk,t.media.preview,t.media.types,t.media.options,t.media.gearEl,t.media.actionsEl)),(0,a.setStyle)(n.wddWrap,"width",""),n.inited=!0,m.updateAutoComplete(n),n.edit=t.edit,n.isReply=t.isReply,m.updateArticleConvertSuggest(n);const i=cur.onMediaChanged;return cur.onMediaChanged=function(){m.updateArticleConvertSuggest(n),i&&i()},n},initEvents:function(e){(0,l.addEvent)(e.input,"keyup keydown keypress",m.onKeyEvent.pbind(e)),(0,l.addEvent)(e.input,"click mousedown mouseup focus blur paste",m.onMouseEvent.pbind(e))},destroy:function(e){WideDropdown.deinit(e.wddWrap),(0,a.cleanElems)(e.input,e.wddWrap),(0,a.re)(e.wddWrap),e.inited=!1,e.addMedia&&e.addMedia.destroy(),(0,a.data)(e.input,"composer",null),(0,a.re)(e.articleConvertEl),e.articleConvertEl=!1},onKeyEvent:function(e,t){const o=!t.shiftKey&&(0,_.inArray)(t.keyCode,[l.KEY.UP,l.KEY.DOWN,l.KEY.RETURN]),i=e.wdd&&o;if("keypress"==t.type||"keydown"==t.type){if(t.keyCode==l.KEY.RETURN||10==t.keyCode){if(e.select&&e.select.isVisible())return(0,l.triggerEvent)(document,t.type,t),(0,l.cancelEvent)(t);if(t.ctrlKey&&(0,_.isFunction)(e.options.onSubmit))return!0}if(t.keyCode==l.KEY.TAB){const o=e.input,n=window.Emoji?Emoji.editableVal(o):"",i=m.getCursorPosition(o),r=(n.substr(0,i)+String.fromCodePoint(1)+n.substr(i)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(r){const o=r[0].length-1;return(0,a.elfocus)(e.input,o,o),(0,l.cancelEvent)(t)}}let o=0;for(let t in e.wdd.shown)o+=1;if(i&&(0,a.isVisible)(e.wdd.listWrap)&&o)return t.type==(n.browser.opera&&!n.browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(e.wdd.id,t),(0,l.cancelEvent)(t)}if("keyup"==t.type&&!i){if(65==t.keyCode&&t.ctrlKey)return;e.wdd&&(0,_.inArray)(t.keyCode,[l.KEY.SPACE,l.KEY.HOME,190,191,78,55,49])&&m.hideSelectList(e)}"keyup"!=t.type||i&&t.keyCode!=l.KEY.RETURN||m.updateAutoComplete(e,t),m.updateArticleConvertSuggest(e)},isArticleConvertSuggestAvailable:function(e){if(e.edit||e.isReply)return!1;const t=!!cur.wallAddMedia&&cur.wallAddMedia.types;let o=!1;if(t)for(let e=0;e<t.length;e++)if("article"==t[e][0]){o=!0;break}if(!o||!(0,d.isArticleEditorAvailable)())return!1;let a=!0;if((0,_.each)(cur.wallAddMedia.getMedias()||[],(function(e,t){if(!(0,_.inArray)(t[0],["photo","video","postpone","mark_as_ads"]))return a=!1,!1})),!a)return!1;return!!(cur.options.articleConvertThreshold>0&&e.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(e){if(m.isArticleConvertSuggestAvailable(e)){if(!e.articleConvertEl){const t=(0,a.gpeByClass)("post_field_wrap",e.input);if(t.querySelector(".article_post_convert"))return;const o=(0,a.geByClass1)("post_actions_btns",t);e.articleConvertEl=p.FlatButton.render({children:i.getLang("profile_convert_to_article_short"),appearance:p.FlatButtonAppearance.ACCENT_OUTLINE,size:p.FlatButtonSize.M,round:!0,className:"article_post_convert"}),o?t.insertBefore(e.articleConvertEl,o):t.appendChild(e.articleConvertEl),(0,l.removeEvent)(e.articleConvertEl),(0,l.addEvent)(e.articleConvertEl,"click",(function(){cur.postComposer=e;const t=[];(0,_.each)(cur.wallAddMedia.getMedias()||[],(function(e,o){(0,_.inArray)(o[0],["photo","video"])&&t.push(o[0]+"_"+o[1])})),(0,s.openArticleEditor)(cur.oid,0,{text:e.curValue,medias:t})}))}(0,a.show)(e.articleConvertEl)}else e.articleConvertEl&&((0,a.re)(e.articleConvertEl),delete e.articleConvertEl)},onMouseEvent:function(e,t){"blur"!=t.type?("focus"!=t.type&&"click"!=t.type||m.updateAutoComplete(e,t),"paste"==t.type&&setTimeout(m.updateAutoComplete.pbind(e,t),0)):m.hideSelectList(e)},updateAutoComplete:function(e,t){const o=e.input,n=(e.options&&e.options.getValue||window.Emoji&&Emoji.editableVal||a.val)(o);let i=e.options.hashtagEnable?n.lastIndexOf("#"):Math.max(n.lastIndexOf("@"),n.lastIndexOf("*")),r=!1;if(i>-1){const t=m.getCursorPosition(o),a=n.substr(0,t),_=e.options.hashtagEnable?a.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)#([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/):a.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);i=e.options.hashtagEnable?a.lastIndexOf("#"):Math.max(a.lastIndexOf("@"),a.lastIndexOf("*")),_&&"."!==_[2].substr(-1)&&(r=_[2])}!1===r&&delete e.ignoredTerm,void 0!==e.ignoredTerm&&r==e.ignoredTerm&&(r=!1),e.curValue=n,e.curTerm=r,e.curPos=i,(0,a.val)(e.wddInput,r),m.toggleSelectList(e),!t||"keyup"!=t.type&&"paste"!=t.type||(e.options.onValueChange&&e.options.onValueChange(n,"keyup"!=t.type),e.addMedia&&e.addMedia.checkMessageURLs(n,"keyup"!=t.type),e.options.checkLen&&e.options.checkLen(n))},toggleSelectList:function(e){const t=e.curTerm;!1===t?m.hideSelectList(e):m.showSelectList(e,t)},hideSelectList:function(e){e.wddInput.focused=!1,WideDropdown._hideList(e.wdd);const t=e.options||{};t.onHide&&t.onHide()},showSelectList:function(e,t){function o(o){e.wddInput.focused=!0,WideDropdown.items(e.wdd.id,o||[]),WideDropdown._updateList(e.wdd,!1,t);const a=e.options||{};a.onShow&&a.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then((function(e){o(e)})):o(cur.wallMentions)},onItemSelect:function(e,t){if(!t)return!1;let o=e.options.hashtagEnable?t.replace("#",""):t[2].replace("@",""),n=t[8]||t[1];const i=e.curValue.substr(0,e.curPos);let r=e.curValue.substr(e.curPos),l=!!i.match(/\#[\w_\.\u0400-\u04FF]+$/i);(document.activeElement.classList.contains("_im_text")||e.options.hashtagEnable)&&(/^(?:id|club)\d{1,}$/.test(o)||(l=!0));const s=e.options.poster,d=window.Emoji&&void 0!==e.input.emojiId||s;d||s?r=(0,_.clean)(r):n=(0,_.replaceEntities)(n),cur.selNum=(cur.selNum||0)+1;const u=new RegExp((e.options.hashtagEnable?"^(#)":"^(@|\\*)")+(0,_.escapeRE)(e.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return r=r.replace(u,(function(e,t,a){let i=t+o+" ";return l?i+=d||s?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(i+=(d||s?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",i+=n.replace(/[\(\)\]\[]/g,""),i+=")"+(d||s?"</span>":"")+" "),i})),l||!i||i.match(/[\.\(\)\?\!\s\n\r\'\"«» \u00A0]$/)||(r=" "+r),m.hideSelectList(e),d||s?(Emoji.val(e.input,(0,_.clean)(i)+r),Emoji.focus(e.input),Emoji.editableFocus(e.input,(0,a.ge)("tmp_sel_"+cur.selNum),!0),s&&s.checkText()):((0,a.val)(e.input,i+r),(0,a.elfocus)(e.input)),(0,_.isFunction)(e.options.onItemSelect)&&e.options.onItemSelect(t),!1},getCursorPosition:function(e){if(void 0!==e.selectionStart)return e.selectionStart;if(void 0!==window.getSelection){const t=window.getSelection();if(!t||!t.rangeCount)return 0;const o=t.getRangeAt(0),n=o.cloneRange(),i=(0,a.ce)("div");return n.selectNodeContents(e),n.setEnd(o.startContainer,o.startOffset),i.appendChild(n.cloneContents()),(window.Emoji?Emoji.editableVal:a.val)(i).replace(/\n$/,"").length}return 0},getSendParams:function(e,t,o){const n=e.addMedia||{},l=n.chosenMedia||{},s=n&&n.getMedias?n.getMedias():[],d=n.shareData||{},p=e&&e.options.media&&e.options.media.options.limit||0,m=e.input,h=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:(0,_.trim)(window.Emoji?Emoji.editableVal(m):(0,a.val)(m));let b={message:h},w=0;const f=(0,a.hasClass)((0,a.gpeByClass)("post",m),"suggest");(0,r.isArray)(l)&&l.length&&s.push((0,_.clone)(l)),(0,a.setStyle)(document.body,{cursor:"default"});const g=(0,a.ge)("wpe_cont");let E=(0,a.geByClass1)("wpe_error",g);function v(e){E||(E=(0,a.se)('<div class="wpe_error error"><div>'),g.insertBefore(E,(0,a.domFC)(g))),E.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,(0,a.isVisible)(E)||((0,u.slideDown)(E,100),(0,c.scrollToY)((0,a.getXY)(E)[1]-15),(0,u.animate)((0,a.ge)("box_layer_wrap"),{scrollTop:0}))}if(E&&(0,a.hide)(E),s.length&&(0,_.each)(s,(function(e,l){if(!(0,r.isArray)(l)||!l.length)return;const u=this[0];let c=this[1];if(w>=p&&"postpone"!=u)return!1;switch(u){case"poll":const e=n.pollData(o);if(!e)return b.delayed=!0,!1;(0,_.intval)(c)&&(b.poll_id=(0,_.intval)(c)),c=e.question,delete e.question,b=(0,_.extend)(b,e);break;case"copyright":const l=n.copyrightData();if(l)return void(b=(0,_.extend)(b,l));break;case"share":if(d.failed||!d.title&&(!d.images||!d.images.length)&&!d.photo_url&&!d.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(b.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&d.button_text&&d.button_action){let e;s.length>1&&(e=i.getLang("global_share_too_many_attachments")),b.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(e=i.getLang("global_share_too_many_newlines")),b.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(e=i.getLang("global_share_too_long_message"));const t=(0,_.extractUrls)(" "+b.message+" "),o=(0,_.extractUrls)(" "+d.url+" ")[0];if(o&&t.length){"/"===o.query&&(o.query=""),"www."===o.domain.substr(0,4)&&(o.domain=o.domain.substr(4));for(let a=0;a<t.length;++a){const n=t[a];if("/"===n.query&&(n.query=""),"www."===n.domain.substr(0,4)&&(n.domain=n.domain.substr(4)),o.domain!=n.domain||o.query!=n.query){e=i.getLang("global_share_too_many_links");break}}}if(e)return v(e),b.delayed=!0,!1}if(!d.title)return v(i.getLang("global_share_title_required")),b.delayed=!0,!1;if(!d.url)return v(i.getLang("global_share_url_required")),b.delayed=!0,!1;if(d.url=new URL(d.url).href,d.video?(c=d.video_owner_id+"_"+d.video_id,b.snippet_video=1):c=d.prometheus?d.media:d.user_id&&d.photo_id&&!d.noPhoto?d.user_id+"_"+d.photo_id:"",d.share_upload_failed&&!c)return d.share_upload_failed=0,b.delayed=!0,!1;if(d.images&&d.images.length&&!(0,r.isArray)(d.images[cur.shareShowImg])&&!o&&!c&&!d.noPhoto&&!d.video)return n.uploadShare(t),b.delayed=!0,!1;if((cur.options.share||{}).require_image&&!c)return v(i.getLang("global_share_image_required")),b.delayed=!0,!1;d.initialPattern&&(0,_.trim)(h)==d.initialPattern&&(b.message=""),d.is_vk_mini_app&&(b.is_vk_mini_app=!0,b.is_photo_edit=d.isPhotoEdit,b.image_offset=cur.shareShowImg),(0,_.extend)(b,{url:d.url,module:cur.module,mode:d.mode,title:(0,_.replaceEntities)(d.title),description:(0,_.replaceEntities)(d.description),button_text:(0,_.replaceEntities)(d.button_text),button_action:d.button_action,extra:d.extra,extra_data:d.extraData,photo_url:d.video?"":(0,_.replaceEntities)(d.photo_url),placeholder_inserted:d.placeholder_inserted,open_graph_data:(d.openGraph||{}).data,open_graph_hash:(d.openGraph||{}).hash});break;case"page":d.initialPattern&&(0,_.trim)(h)==d.initialPattern&&(b.message="");break;case"postpone":return b.postpone=(0,a.val)("postpone_date"+n.lnkId),void(cur.postponedLastDate=b.postpone);case"donut_duration":return;case"mark_as_ads":return void(b.mark_as_ads=1);case"pretty_cards":if(!n.prettyCardGallery)return;if(n.prettyCardGallery.needSendData())return n.prettyCardGallery.saveCards(t,(function(e){v(e)})),b.delayed=!0,!1;c=n.prettyCardGallery.getSendData().attachVal;break;case"donut_link":var m;b["attach"+(w+1)+"_owner_id"]=null==(m=this[5])?void 0:m.owner_id}this[3]&&(0,_.trim)(h)==this[3]&&(b.message=""),f&&this[4]&&(c+="_"+this[4]),b["attach"+(w+1)+"_type"]=u,b["attach"+(w+1)]=c,w++})),!n.multi&&(b.postpone||(n.postponeDate&&n.postponeIsTooltip||n.postponePreview)&&(b.postpone=(0,a.val)("postpone_date"+n.lnkId),cur.postponedLastDate=b.postpone),!b.copyright&&n.copyrightData)){const e=n.copyrightData();e&&(b=(0,_.extend)(b,e))}return n.multi||b.mark_as_ads||!n.markAsAds||(b.mark_as_ads=1),b},reset:function(e){const t=e.input,o=(0,a.val)(t),n=e.addMedia,i={value:o};return window.Emoji?Emoji.val(t,""):t.innerHTML="",n&&(i.urlsCancelled=(0,_.clone)(n.urlsCancelled),n.unchooseMedia(),n.urlsCancelled=[]),(0,a.re)(e.articleConvertEl),i},restore:function(e,t){const o=e.input,n=m.reset(e);return(0,a.val)(o,t.value||""),n}},h=m},20413:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(795558),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(301230),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29271),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(953908),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(514986),_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(725296),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(254667),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82161),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(962983),_web_video_video_modules__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(613202);function getUploadModule(){return window.stManager.add([window.jsc("web/upload.js")])}const WallUpload={_videoUploadIndex:null,photoUploaded:function(e,t){const o=void 0!==e.ind?e.ind:e,a=(e.fileName?e.fileName:e).replace(/[&<>"']/g,""),n=e.fileName?o+"_"+e.fileName:e,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("upload"+n+"_progress_wrap");i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("progress_x",i)),ajax.post("al_photos.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({act:"choose_uploaded"},t),{onDone:function(e,t){WallUpload.addMedia().chooseMedia("photo",e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(t,{upload_ind:o+"_"+a}))},onFail:WallUpload.uploadFailed.pbind(e)})},uploadFailed:function(e,t){const o=void 0!==e.ind?e.ind:e,a=Upload.options[o],n=(e.fileName?e.fileName:e).replace(/[&<>"']/g,"");if("fileApi"==Upload.types[o]&&!a.wiki_editor){const t=e.fileName?o+"_"+e.fileName:e;let i;cur.imMedia?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+t+"_progress_wrap"),i=cur.imMedia.lnkId,cur.addMedia[i].unchooseMedia()):cur.addMedia&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+t+"_progress_wrap"),i=(cur.attachMediaIndexes||{})[n],i&&cur.addMedia[i].unchooseMedia()),1==a.filesTotalCount&&setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_2__.getLang("global_error")},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_2__.getLang("wall_add_photo_error")).hide,2e3)}(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__.topError)("Upload failed",{dt:-1,type:102,url:((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("file_uploader_form"+o)||{}).action}),Upload.embed(o)},show:function(){cur.uploadInited&&("feed"==cur.wallType?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(cur.uploadWrap,"post_upload_min_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(cur.uploadWrap))},hide:function(){cur.uploadInited&&("feed"==cur.wallType?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.uploadWrap,"post_upload_min_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.uploadWrap),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("post_upload_dropbox"))},addMedia:function(){return cur.dropboxAddMedia||cur.wallAddMedia},attachEl:function(){return WallUpload.dropboxAttachEl||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("submit_post_box")},attachToEl:function(e){e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(e);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post_upload_dropbox");if(WallUpload.dropboxAttachEl=e,!e||!t)return!1;e.insertBefore(t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)(e))},checkDragDrop:function(){const e=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser,t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.floatval)(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.version);return!!(e.msie&&t>=9||e.mozilla&&t>=3.5||e.chrome||e.safari)&&((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))},initCallback:function(){cur.editingPost?WallUpload.init():Wall.showEditPost()},init:function(){cur.withUpload&&(cur.uploadAdded?WallUpload.show():(cur.uploadAdded=!0,window.Upload&&window.VideoInlineUpload?(WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()):Promise.all([getUploadModule(),(0,_web_video_video_modules__WEBPACK_IMPORTED_MODULE_9__.getVideoUploadModule)()]).then((()=>{WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()}))))},initVideoUploader:function(){const e=cur.wallUploadVideoOpts;if(!e)return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post_field_upload_video"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post_upload_video_dropbox");e.options.from="post";const a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("send_post"),n={onUploadAllCompleteDone:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.disableButton)(a,!1)},onUploadStartDone:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.disableButton)(a,!0)}};return window.VideoInlineUpload.getUploadModule(t,o,e,WallUpload.addMedia(),n)},initLoader:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(document.body,"dragover dragenter");const data=cur.wallUploadOpts,field=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post_field");if(!WallUpload.checkDragDrop())return;cur.uploadWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="post_field_upload" class="post_upload"></div>'}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domInsertBefore)(cur.uploadWrap,field),cur.uploadVideoWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{className:"post_upload_video_wrap fl_r",innerHTML:'<div id="post_field_upload_video" class="post_upload_video"></div>'}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domInsertBefore)(cur.uploadVideoWrap,field);const submitBox=WallUpload.attachEl();submitBox.insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{id:"post_upload_dropbox",className:"post_upload_dropbox",innerHTML:'<div class="post_upload_dropbox_inner"><div class="post_upload_label drop_label">'+(data.opts.lang.wall_drop_media_here||"Drop files here")+'</div><div class="post_upload_label release_label">'+(data.opts.lang.wall_release_media_here||"Release button to attach files")+"</div></div>"}),submitBox.firstChild),cur.wallUploadInd=Upload.init("post_field_upload",data.url,data.params,{accept:"image/jpeg,image/png,image/gif",dragEl:document.body,dropbox:"post_upload_dropbox",file_input:null,file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_match:data.opts.ext_re,lang:data.opts.lang,multiple:1,multi_progress:1,max_files:10,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:data.opts.server,error:data.opts.default_error,error_hash:data.opts.error_hash,label:data.opts.label,wiki_editor:0,onUploadStart:function(e,t){const o=void 0!==e.ind?e.ind:e,a=Upload.options[o];"form"==Upload.types[o]&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("file",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[o]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),a.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete:function(info,res){let params;try{params=eval("("+res+")")}catch(e){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}params.photos?WallUpload.photoUploaded(info,params):Upload.onUploadError(info)},onUploadProgress:function(e,t,o){const a=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[a]){const n=(cur.attachMediaIndexes||{})[a];if(void 0===n||n&&cur.addMedia[n].chosenMedia||cur.imMedia){const n={loaded:t,total:o};e.fileName&&(n.fileName=e.fileName.replace(/[&<>"']/g,"")),WallUpload.addMedia().showMediaProgress("photo",a,n)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(e){"form"==Upload.types[e]&&Upload.embed(e)},onDragEnter:function(){cur.editingPost?(Wall.hidePosterFeatureTooltip(),WallUpload.init()):Wall.showEditPost()},onNoFilteredCallback:function(e){Wall._videoUploadIndex&&Upload.onFileApiSend(Wall._videoUploadIndex,e)}}),cur.uploadInited=!0,WallUpload.show(),cur.wallUploadFromDrag&&(1==cur.wallUploadFromDrag&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("post_upload_dropbox"),delete cur.wallUploadFromDrag)}},__WEBPACK_DEFAULT_EXPORT__=WallUpload},421199:(e,t,o)=>{o.d(t,{useUniqId:()=>i});var a=o(667294),n=o(659397);function i(){return`:r${(0,a.useRef)((0,n.getRandomString)(6)).current}:`}},52077:(e,t,o)=>{o.d(t,{reloadResource:()=>n});var a=o(659397);function n(e){return fetch(e,{cache:"reload",mode:"no-cors"}).then(a.noop)}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,o,a)=>{if(!t){var n=1/0;for(l=0;l<deferred.length;l++){for(var[t,o,a]=deferred[l],i=!0,r=0;r<t.length;r++)(!1&a||n>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[r])))?t.splice(r--,1):(i=!1,a<n&&(n=a));if(i){deferred.splice(l--,1);var _=o();void 0!==_&&(e=_)}}return e}a=a||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>a;l--)deferred[l]=deferred[l-1];deferred[l]=[t,o,a]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var a={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var n=2&t&&e;"object"==typeof n&&!~leafPrototypes.indexOf(n);n=getProto(n))Object.getOwnPropertyNames(n).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,__webpack_require__.d(o,a),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,o)=>(__webpack_require__.f[o](e,t),t)),[])),__webpack_require__.u=e=>25394===e?"web/chunks/AudioLongtapModal.5c994570.js":24817===e?"web/chunks/hls.b496ce21.js":75980===e?"web/chunks/menu_settings.ad849031.js":9375===e?"web/chunks/voice_message_player.1c43f503.js":28762===e?"web/chunks/speech.d9867703.js":57468===e?"web/chunks/SilentModeForms.6c78e68c.js":28872===e?"web/chunks/feed-client-nav-skeleton.23b1194f.js":35953===e?"web/chunks/feed-client-nav-async-right-block.6f6f61b6.js":29019===e?"web/chunks/ReportForm.deef89f4.js":14930===e?"web/chunks/d250583b.async.8610a34b.js":18669===e?"web/chunks/BadgesCatalog.5954c8dd.js":83803===e?"web/chunks/BadgesObjectInfo.8a6262c1.js":27772===e?"web/chunks/badges_status_bar_onboarding_init.1a93899a.js":60456===e?"web/chunks/BadgesRestrictedModal.50e5f057.js":64369===e?"web/chunks/BadgesTaskModal.93a0c1cf.js":26464===e?"web/chunks/6fb20e5b.async.cddef5dc.js":90993===e?"web/chunks/ba3a5fe4.async.82a10a3d.js":48801===e?"web/chunks/181f948b.async.41a9e473.js":58932===e?"web/chunks/60e6414a.async.c385477c.js":59727===e?"web/chunks/VideoUpload.3acac7fc.js":77806===e?"web/chunks/apps_attach_modal.db09ccfd.js":72728===e?"web/chunks/OneTimeDonut.3ee81c0f.js":44221===e?"web/chunks/IconBadges.d64917ff.js":95413===e?"web/chunks/43dc6165.async.8840829e.js":72229===e?"web/chunks/VideoEditor.acfe1beb.js":30271===e?"web/chunks/VideoUploadModal.b5fe139e.js":31286===e?"web/chunks/VideoExternalUploadModal.479f67a1.js":74212===e?"web/chunks/"+e+".f60e3da7.js":9202===e?"chunks/9202.72ad8960.js":79118===e?"chunks/"+e+".1f93e9b5.js":22197===e?"chunks/"+e+".fd9e68c0.js":77950===e?"chunks/"+e+".f03dc111.js":"web/chunks/polyfills.b00e2426.js",__webpack_require__.miniCssF=e=>25394===e?"web/chunks/5e3e105f.css":75980===e?"web/chunks/5bbee2c9.css":57468===e?"web/chunks/a2979e7d.css":29019===e?"web/chunks/1c452c59.css":18669===e?"web/chunks/9740d83d.css":83803===e?"web/chunks/4eaf46f2.css":59727===e?"web/chunks/43d06ff5.css":77806===e?"web/chunks/a16fc671.css":72728===e?"web/chunks/5ad88fce.css":72229===e?"web/chunks/8a1e1be6.css":{30271:1,31286:1}[e]?"web/chunks/a6aadac7.css":void 0,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,o,a)=>{if(inProgress[e])inProgress[e].push(t);else{var n,i;if(void 0!==o)for(var r=document.getElementsByTagName("script"),_=0;_<r.length;_++){var l=r[_];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+o){n=l;break}}n||(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack","vk:"+o),n.src=e),inProgress[e]=[t];var s=(t,o)=>{n.onerror=n.onload=null,clearTimeout(d);var a=inProgress[e];if(delete inProgress[e],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(o))),t)return t(o)},d=setTimeout(s.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=s.bind(null,n.onerror),n.onload=s.bind(null,n.onload),i&&document.head.appendChild(n)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,o)=>{var a=__webpack_require__.miniCssF(e),n=__webpack_require__.p+a;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),a=0;a<o.length;a++){var n=(r=o[a]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var r;if((n=(r=i[a]).getAttribute("data-href"))===e||n===t)return r}})(a,n))return t();((e,t,o,a)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=i=>{if(n.onerror=n.onload=null,"load"===i.type)o();else{var r=i&&("load"===i.type?"missing":i.type),_=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+_+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=_,n.parentNode.removeChild(n),a(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,o)})),installedCssChunks={60339:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{18669:1,25394:1,29019:1,30271:1,31286:1,57468:1,59727:1,72229:1,72728:1,75980:1,77806:1,83803:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={60339:0};__webpack_require__.f.j=(t,o)=>{var a=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var n=new Promise(((o,n)=>a=e[t]=[o,n]));o.push(a[2]=n);var i=__webpack_require__.p+__webpack_require__.u(t),r=new Error;__webpack_require__.l(i,(o=>{if(__webpack_require__.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",r.name="ChunkLoadError",r.type=n,r.request=i,a[1](r)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var a,n,[i,r,_]=o,l=0;if(i.some((t=>0!==e[t]))){for(a in r)__webpack_require__.o(r,a)&&(__webpack_require__.m[a]=r[a]);if(_)var s=_(__webpack_require__)}for(t&&t(o);l<i.length;l++)n=i[l],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(s)},o=self.webpackChunkvkweb=self.webpackChunkvkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[213,2067,83737,57451,71610,5038,95167,67475,14197,15201,3944,38234,36363,5929,41674,74606,7139],(()=>__webpack_require__(384025)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();