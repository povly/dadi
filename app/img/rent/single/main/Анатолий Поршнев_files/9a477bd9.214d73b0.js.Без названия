"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[41674],{784118:(e,t,n)=>{n.d(t,{Icon20GearOutline:()=>a});var a=(0,n(28178).makeIcon)("Icon20GearOutline","gear_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="gear_outline_20"><path fill-rule="evenodd" d="m7.222 3.378.01-.033a4.147 4.147 0 0 1 .17-.476c.358-.821.944-1.285 1.854-1.36l.166-.009h1.208c1.051.033 1.735.608 2.095 1.692l.057.186.044.166c.016.064.037.132.06.203l.05.137.03.015.06-.02.116-.044.135-.059a5.36 5.36 0 0 1 .168-.074l.036-.015a4.23 4.23 0 0 1 .424-.15c.932-.27 1.685-.075 2.32.618l.108.125.714.88c.636.833.617 1.723-.004 2.683l-.109.161-.102.139c-.04.054-.082.113-.123.177l-.062.1-.029.05.004.017.08.052.11.066.133.072c1.209.614 1.707 1.42 1.515 2.541l-.032.162-.213.916c-.137.593-.245.873-.67 1.258a2.135 2.135 0 0 1-1.059.518l-.01.003a3.917 3.917 0 0 1-.438.059l-.191.012-.173.006-.052.001h-.006c-.05.002-.102.006-.156.01l-.158.02.012.123.011.083.029.154c.068.322.101.618.098.89v.012c-.015.84-.38 1.45-1.132 1.87l-.147.076-1.023.494c-.901.403-1.722.234-2.484-.467a3.934 3.934 0 0 1-.144-.14l-.133-.142-.113-.13a2.938 2.938 0 0 0-.147-.161l-.085-.083-.043-.04-.08.076-.091.093-.103.115c-.828.981-1.703 1.334-2.763.923l-.153-.063-.915-.443-.271-.138c-.415-.225-.647-.44-.874-.918a2.153 2.153 0 0 1-.209-1.01v-.016c.006-.19.03-.388.07-.603l.038-.195.001-.004c.014-.064.025-.133.035-.206l.016-.148-.003-.003-.09-.012-.128-.012-.151-.006a4.145 4.145 0 0 1-.862-.098l-.012-.003c-.837-.198-1.363-.69-1.608-1.524l-.043-.16-.254-1.102c-.204-1.026.205-1.818 1.186-2.41l.17-.098.152-.08c.06-.03.123-.065.188-.105l.134-.087.004-.017-.055-.093-.07-.108-.089-.124a5.194 5.194 0 0 1-.286-.423c-.54-.905-.534-1.72.046-2.523l.1-.132.717-.877c.687-.792 1.566-.958 2.64-.554l.18.072.158.07a2.9 2.9 0 0 0 .193.08l.118.042.032-.014.029-.077.04-.12.04-.143c.013-.056.028-.112.044-.166m4.24.841.013.038.05.138a1.5 1.5 0 0 0 .743.833l.03.014a1.5 1.5 0 0 0 1.136.082l.06-.02a1.47 1.47 0 0 0 .065-.023l.117-.044.062-.025.135-.059.035-.015a2.698 2.698 0 0 1 .415-.16c.268-.078.407-.06.47-.043.057.015.16.056.314.22l.077.09.682.84c.138.185.15.295.15.359 0 .084-.03.267-.225.573l-.082.122-.08.108a4.406 4.406 0 0 0-.18.26l-.014.022-.062.099-.008.013-.01.018-.03.05a1.5 1.5 0 0 0-.178 1.056l.004.017a1.5 1.5 0 0 0 .648.959l.08.052.05.032.11.066.06.034.133.072.034.018c.456.231.62.421.676.516.036.06.084.162.042.417l-.023.117-.207.892c-.066.285-.095.35-.105.369 0 0 0 .003-.01.013a.974.974 0 0 1-.101.103c-.082.074-.166.124-.354.161a2.357 2.357 0 0 1-.257.035l-.153.01-.138.004-.071.002a4.554 4.554 0 0 0-.28.02l-.158.019a1.5 1.5 0 0 0-1.318 1.628l.011.123.008.07.012.083.01.06.028.154.008.045c.05.236.068.419.066.557-.003.206-.046.301-.073.348-.028.046-.094.131-.276.235l-.105.056-.977.471c-.204.088-.317.082-.382.07-.076-.015-.228-.068-.456-.279a2.382 2.382 0 0 1-.08-.076l-.1-.107-.088-.102a4.389 4.389 0 0 0-.217-.236l-.018-.018-.084-.082a1.433 1.433 0 0 0-.036-.034l-.043-.04a1.5 1.5 0 0 0-2.047.014l-.08.075a1.43 1.43 0 0 0-.042.041l-.09.094a1.534 1.534 0 0 0-.048.05l-.103.116-.025.03c-.315.371-.532.495-.646.535-.073.025-.183.05-.415-.038l-.094-.039-.864-.418-.238-.12a1.186 1.186 0 0 1-.13-.083l-.004-.003-.003-.003a1.077 1.077 0 0 1-.083-.147.666.666 0 0 1-.063-.34c.003-.09.015-.207.043-.365l.035-.174a4.384 4.384 0 0 0 .058-.35l.016-.149a1.5 1.5 0 0 0-.434-1.224l-.004-.003a1.5 1.5 0 0 0-.86-.423l-.09-.012a1.405 1.405 0 0 0-.064-.008l-.128-.01a1.539 1.539 0 0 0-.068-.005l-.15-.007-.04-.001a2.663 2.663 0 0 1-.549-.06c-.215-.05-.305-.115-.346-.154-.04-.038-.109-.12-.17-.319l-.03-.114-.242-1.052c-.042-.224-.006-.329.023-.387.038-.076.146-.23.459-.42l.128-.074.119-.063a4.431 4.431 0 0 0 .316-.179l.134-.087a1.5 1.5 0 0 0 .65-.947l.004-.017a1.5 1.5 0 0 0-.171-1.066l-.055-.093a1.49 1.49 0 0 0-.037-.062l-.07-.108a1.496 1.496 0 0 0-.04-.057l-.088-.124a1.516 1.516 0 0 0-.024-.031c-.307-.406-.369-.647-.378-.754-.006-.067-.004-.18.148-.395l.072-.094.684-.838c.154-.173.262-.211.33-.225.09-.018.28-.027.623.1l.138.055.123.055a4.42 4.42 0 0 0 .316.13l.118.042a1.5 1.5 0 0 0 1.134-.058l.031-.015a1.5 1.5 0 0 0 .764-.823l.03-.077.023-.066.04-.12.02-.065.04-.143.01-.037.03-.119c.037-.128.076-.235.114-.323.1-.23.192-.319.243-.357.044-.033.134-.086.343-.105l.1-.006h1.14c.234.01.333.071.386.114.067.056.192.195.308.538l.043.14.034.129c.026.1.056.2.088.298M10 11.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m0 1.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},861184:(e,t,n)=>{n.d(t,{default:()=>a});const a={counter:"BadgeCounter-module__counter--ZG07d"}},430935:(e,t,n)=>{n.d(t,{default:()=>a});const a={wrapper:"BadgeItem-module__wrapper--UDxg1"}},838455:(e,t,n)=>{n.d(t,{default:()=>a});const a={root:"BadgeItems-module__root--MdiCD"}},565293:(e,t,n)=>{n.d(t,{default:()=>a});const a={items:"BadgesOwnerBlockSkeleton-module__items--b27KV"}},259688:(e,t,n)=>{n.d(t,{default:()=>a});const a={card:"BadgesOwnerInfoCard-module__card--1VfEo",preview:"BadgesOwnerInfoCard-module__preview--xOjSA",title:"BadgesOwnerInfoCard-module__title--J0JB9",description:"BadgesOwnerInfoCard-module__description--jpXGI",users:"BadgesOwnerInfoCard-module__users--ylWIJ"}},368079:(e,t,n)=>{n.d(t,{default:()=>a});const a={items:"BadgesOwnerInfoModal-module__items--_C8HX",counter:"BadgesOwnerInfoModal-module__counter--dcVke",layout:"BadgesOwnerInfoModal-module__layout--H96gr",body:"BadgesOwnerInfoModal-module__body--xEx7W",settings:"BadgesOwnerInfoModal-module__settings--Cxf6L",previewItems:"BadgesOwnerInfoModal-module__previewItems--wFB2n",previewItem:"BadgesOwnerInfoModal-module__previewItem--pGWtg"}},478826:(e,t,n)=>{n.d(t,{getUserFullName:()=>a});const a=e=>{const{first_name:t,last_name:n}=e;return`${t} ${n}`}},678755:(e,t,n)=>{n.d(t,{BadgeCounter:()=>d});var a=n(434788),r=n(512796),s=n(785893),o=n(86894),i=n(861184);const d=e=>{var t=(0,a._)({},(0,r._)(e));return(0,s.jsx)(o.Counter,(0,a._)({className:i.default.counter,mode:"inherit"},t))}},719293:(e,t,n)=>{n.d(t,{BadgeSenderItem:()=>h});var a=n(434788),r=n(820224),s=n(785893),o=n(366897),i=n(448575),d=n(86894),l=n(221780),c=n(82161),g=n(354082),u=n(478826),_=n(222285);function h(e){var{entry:t,user:{id:n,first_name:h,last_name:p,domain:b,photo_100:B,photo_200:I}}=e,m=(0,r._)(e,["entry","user"]);const v=(0,u.getUserFullName)({first_name:h,last_name:p}),w=((0,c.isRetina)()?I:B)||B||"";let f=null;return t.object_description&&(f=(0,g.parseReactWikiLinks)(t.object_description,{target:"_blank"})),f=(0,s.jsxs)(s.Fragment,{children:[f,(0,s.jsx)("br",{}),t.is_private&&l.getLang("awards_private_text")]}),(0,s.jsx)(d.RichCell,(0,a._)({before:(0,s.jsx)(o.Avatar,{size:100,src:w,title:v}),caption:f,href:b?`/${b}`:void 0,target:"_blank",onClick:()=>{i.WebStatEvents.add({screen:"badge",type:"type_click",type_click:{type:"type_badges_screen_item",item:{type:"badges",id:n},type_badges_screen_item:{type_badges_event:{event_name:_.BadgesEventName.OPEN_SENDER}}}})}},m,{children:v}))}},415796:(e,t,n)=>{n.d(t,{BadgeItem:()=>g,BadgeItemWrapper:()=>c});var a=n(785893),r=n(573907),s=n(215200),o=n(849776),i=n(222285),d=n(678755),l=n(430935);const c=({children:e})=>(0,a.jsx)("div",{className:l.default.wrapper,children:e}),g=({badge:e,counter:t,onClick:n})=>{if(!e)return null;const l=(0,o.getBadgeImage)(e.image,i.BADGE_IMAGE_SIZE_128);return(0,a.jsx)(c,{children:(0,a.jsx)(r.RichImage,{src:l,size:56,withBorder:!1,transparent:!0,onClick:()=>n(e.id),children:(0,a.jsx)(s.Image.Badge,{children:(0,a.jsx)(d.BadgeCounter,{size:"s",children:t})})})})}},726914:(e,t,n)=>{n.d(t,{BadgeItems:()=>d});var a=n(785893),r=n(667294),s=n(86894),o=n(415796),i=n(838455);const d=({counters:e,badges:t,onBadgeClick:n})=>{const d=(0,r.useMemo)((()=>{var r;return((null==(r=e)?void 0:r.filter((e=>"total"!==e.type)))||[]).map((({value:e,badge_id:r})=>{if(!r)return null;const s=t.find((({id:e})=>r===e));return(0,a.jsx)(o.BadgeItem,{counter:e,badge:s,onClick:n},r)}))}),[e,t,n]);return(0,a.jsx)(s.HorizontalScroll,{arrowSize:"m",children:(0,a.jsx)("div",{className:i.default.root,tabIndex:0,role:"button",children:d})})}},704919:(e,t,n)=>{n.d(t,{BadgesOwnerBlockSkeleton:()=>_});var a=n(434788),r=n(785893),s=n(667294),o=n(444972),i=n(513724),d=n(399639),l=n(659397),c=n(415796),g=n(565293);const u=(0,l.createArray)(4),_=e=>{const t=(0,s.useMemo)((()=>u.map(((e,t)=>(0,r.jsx)(c.BadgeItemWrapper,{children:(0,r.jsx)(o.Skeleton,{width:56,height:56,circle:!0})},t)))),[56,4]);return(0,r.jsx)(i.Group,(0,a._)({header:(0,r.jsx)(d.Header,{children:(0,r.jsx)(o.Skeleton,{width:192})})},e,{children:(0,r.jsx)("div",{className:g.default.items,children:t})}))}},518285:(e,t,n)=>{n.d(t,{BadgesOwnerInfoCard:()=>_});var a=n(785893),r=n(86894),s=n(573907),o=n(215200),i=n(360470),d=n(29271),l=n(849776),c=n(222285),g=n(678755),u=n(259688);const _=({badge:e,counter:t,recentSenderUsers:n,sendersCount:_,onClick:h})=>{var p;const b=null==(p=n)?void 0:p.slice(0,3).map((({photo_200:e})=>String(e)));return(0,a.jsxs)(r.Tappable,{className:u.default.card,onClick:h,children:[(0,a.jsx)(s.RichImage,{className:u.default.preview,"aria-label":e.title,src:(0,l.getBadgeImage)(e.image,c.BADGE_IMAGE_SIZE_128),size:c.BADGE_IMAGE_SIZE_128,transparent:!0,withBorder:!1,children:(0,a.jsx)(o.Image.Badge,{children:(0,a.jsx)(g.BadgeCounter,{children:t})})}),(0,a.jsx)(r.Title,{className:u.default.title,level:"2",weight:"1",children:e.title}),(0,a.jsx)(r.Text,{className:u.default.description,weight:"3",children:e.description}),Boolean(n.length)&&(0,a.jsx)("div",{className:u.default.users,children:(0,a.jsx)(i.UsersStack,{size:"l",photos:b,children:d.getLang("awards_senders_count",_).replace("{count}",String(_))})})]})}},55163:(e,t,n)=>{n.d(t,{BadgesOwnerInfoModal:()=>R});var a=n(434788),r=n(785893),s=n(667294),o=n(723062),i=n(212147),d=n(599809),l=n(448575),c=n(169447),g=n(784118),u=n(86894),_=n(400856),h=n(345658),p=n(385235),b=n(385174),B=n(573907),I=n(215200),m=n(850283),v=n(816511),w=n(685371),f=n(518285),E=n(719293),S=n(460854),O=n(678755),y=n(254667),A=n(29271),N=n(849776),k=n(460033),C=n(533399),T=n(222285),L=n(316688),j=n(368079);class R extends s.Component{componentDidMount(){const{ownerId:e,eventRef:t,badgeId:n}=this.props,a=`${n?"open_badges_collection_badge":"open_badges_collection_all"}__${o.Ranges.isUserId(e)?"u":"c"}`;this.sendStatEvent(a,t),this.fetchOwnerInfo()}componentWillUnmount(){window.removeEventListener("online",this.fetchOwnerInfo),window.removeEventListener("online",this.fetchOwnerEntries)}componentDidUpdate(){const{currentBadgeId:e}=this.state;e&&!this.getBadgeEntries(e)&&this.fetchOwnerEntries()}renderHeader(){const{isOwnerInfoLoaded:e,currentBadgeId:t,isAdmin:n}=this.state,{ownerId:a}=this.props;return(0,r.jsx)(_.ModalHeader,{closeAriaLabel:A.getLang("awards_back_button"),onClose:this.props.close,before:e&&t&&(0,r.jsxs)(h.ModalHeaderButton,{"aria-label":A.getLang("awards_back_button"),onClick:()=>this.selectBadge(null),children:[(0,r.jsx)(c.Icon20ChevronLeftOutline,{}),A.getLang("awards_back_button")]}),after:n&&(0,r.jsx)(p.Link,{className:j.default.settings,href:(()=>{const e=`${location.protocol}//${window.vk.host}`;let t;return o.Ranges.isGroupId(a)?(t=new URL(`public${Math.abs(a)}`,e),t.searchParams.set("act","sections")):(t=new URL("settings",e),t.searchParams.set("act","privacy"),t.searchParams.set("hl","badges")),t.toString()})(),target:"_blank",children:(0,r.jsx)(g.Icon20GearOutline,{})}),children:e&&!t?this.renderHeaderTitle():null})}renderHeaderTitle(){const{ownerId:e}=this.props,{totalCount:t}=this.state,n=t>0?(0,r.jsx)("span",{className:j.default.counter,children:t}):null;let a="";return a=e===window.vk.id?A.getLang("awards_my_badges"):o.Ranges.isGroupId(e)?A.getLang("awards_group_block_header"):A.getLang("awards_profile_block_header"),(0,r.jsxs)(r.Fragment,{children:[a," ",n]})}renderContent(){const{counters:e,currentBadgeId:t}=this.state;return t?this.renderBadgeInfo():(0,r.jsx)("div",{className:j.default.items,children:e.map((({badge_id:e,value:t,recent_sender_ids:n,senders_count:a})=>e?(0,r.jsx)(f.BadgesOwnerInfoCard,{badge:this.getBadgeById(e),counter:t,recentSenderUsers:this.getUsersById(n||[]),sendersCount:a||0,onClick:()=>this.selectBadge(e,T.BadgesEventRef.COLLECTON_ALL)},e):((0,L.badgesLogger)("No badge_id in list in BadgesOwnerInfoModal"),null)))})}renderBadgeInfo(){var e,t;const{currentBadgeId:n,counters:a}=this.state,s=this.getBadgeEntries(n||0),o=this.getBadgeById(n||0),i=(null==(e=a.find((e=>e.badge_id===n)))?void 0:e.value)||0;return s?(0,r.jsxs)(k.ReexportInfiniteScroll,{hasMore:Boolean(s.next_query),loadMore:this.fetchOwnerEntries,children:[(0,r.jsx)(b.ModalHeaderCard,{before:(0,r.jsx)(B.RichImage,{"aria-label":o.title,src:(0,N.getBadgeImage)(o.image,T.BADGE_IMAGE_SIZE_100),size:T.BADGE_IMAGE_SIZE_100,withBorder:!1,transparent:!0,children:(0,r.jsx)(I.Image.Badge,{children:(0,r.jsx)(O.BadgeCounter,{children:i})})}),title:(0,r.jsx)(u.Title,{Component:"span",level:"2",weight:"2",children:o.title}),subtitle:o.description,transparent:!0}),(0,r.jsx)(m.SeparatorSpacing,{size:50}),(0,r.jsx)("div",{className:j.default.previewItems,children:null==(t=s.entries)?void 0:t.map(((e,t)=>{const n=e.sender_id;return n?(0,r.jsx)(E.BadgeSenderItem,{className:j.default.previewItem,entry:e,user:this.getUserById(n)},t):null}))})]}):(0,r.jsx)(u.Spinner,{})}getBadgeById(e){return this.state.badges[e]}getUserById(e){return this.state.users[e]}getUsersById(e){return e.map((e=>this.getUserById(e)))}getBadgeEntries(e){return this.state.loadedBadgeEntries[e]}static convertBadges(e){return e.reduce(((e,t)=>(0,a._)({},e,{[t.id]:t})),{})}static convertUsers(e){return e.reduce(((e,t)=>(0,a._)({},e,{[t.id]:t})),{})}render(){const{currentBadgeId:e}=this.state,{isOwnerInfoLoaded:t}=this.state;return(0,r.jsxs)(v.ModalBox,{children:[this.renderHeader(),(0,r.jsx)(S.WithCustomScrollView,{withCustomScrollView:!e,className:j.default.layout,autoHideScrollbar:!0,children:(0,r.jsx)(w.ModalBody,{insetLevel:e?0:2,className:j.default.body,children:t?this.renderContent():(0,r.jsx)(u.Spinner,{})})})]})}constructor(e){super(e),this.sendStatEvent=(e,t,n)=>{var a;const{ownerId:r}=this.props,s={screen:"badge",type:"type_navgo",type_navgo:{type:"type_badges_screen_item",subtype:"go",item:{type:"badges",id:null==(a=n)?void 0:a.badgeId,owner_id:r},type_badges_screen_item:{type_badges_event:{event_name:e},type_badges_event_ref:{event_name:t}}}};l.WebStatEvents.add(s)},this.fetchOwnerInfo=()=>{window.removeEventListener("online",this.fetchOwnerInfo);const{ownerId:e}=this.props;return(0,d.api)("badges.getOwnerInfo",{owner_id:e,with_senders:1,fields:"photo_100,photo_200,domain"}).then((({owner_info:e,badges:t,users:n})=>{var a,r,s;this.setState({isOwnerInfoLoaded:!0,totalCount:(null==(a=((null==(r=e)?void 0:r.counters)||[]).find((e=>e.type===C.CounterType.total)))?void 0:a.value)||0,counters:((null==(s=e)?void 0:s.counters)||[]).filter((e=>e.type!==C.CounterType.total)),badges:R.convertBadges(t||[]),users:R.convertUsers(n||[])})})).catch((e=>{var t,n;(0,y.topError)((null==(n=e)||null==(t=n.error)?void 0:t.error_msg)||A.getLang("global_unknown_error")),(0,i.isNetworkError)(e)?window.addEventListener("online",this.fetchOwnerInfo):this.props.close()}))},this.fetchOwnerEntries=()=>{var e;window.removeEventListener("online",this.fetchOwnerEntries);const{ownerId:t}=this.props,{loadedBadgeEntries:n,currentBadgeId:r}=this.state;if(!r)return Promise.resolve();const s=this.getBadgeEntries(r),o={fields:"photo_100,photo_200,domain"};return(null==(e=s)?void 0:e.next_query)?Object.assign(o,{query:s.next_query}):Object.assign(o,{owner_id:t,badge_id:r,count:100}),(0,d.api)("badges.getOwnerEntries",o).then((({entries:e,badges:t,next_query:o,users:i})=>{var d;this.setState({isOwnerInfoLoaded:!0,users:(0,a._)({},this.state.users,R.convertUsers(i||[])),badges:(0,a._)({},this.state.badges,R.convertBadges(t||[])),loadedBadgeEntries:(0,a._)({},n,{[r]:{entries:[...(null==(d=s)?void 0:d.entries)||[],...e||[]],next_query:o}})})})).catch((e=>{var t,n;(0,y.topError)((null==(n=e)||null==(t=n.error)?void 0:t.error_msg)||A.getLang("global_unknown_error")),(0,i.isNetworkError)(e)&&window.addEventListener("online",this.fetchOwnerEntries)}))},this.selectBadge=(e,t)=>{const n=o.Ranges.isUserId(this.props.ownerId);e&&this.sendStatEvent("open_badges_collection_badge__"+(n?"u":"c"),t,{badgeId:e}),this.setState({currentBadgeId:e})};const{isAdmin:t=!1,badgeId:n}=e;this.state={isOwnerInfoLoaded:!1,totalCount:0,counters:[],badges:{},users:{},currentBadgeId:n||null,loadedBadgeEntries:{},isAdmin:t}}}},452866:(e,t,n)=>{n.d(t,{GroupBadges:()=>B});var a=n(785893),r=n(667294),s=n(86894),o=n(869048),i=n(513724),d=n(399639),l=n(222285),c=n(599809),g=n(377974),u=n(29271),_=n(726914),h=n(680938),p=n(323141),b=n(316688);const B=(0,h.withErrorBoundary)((e=>{var t,n,h,B,I,m;const{ownerId:v,isAdmin:w}=e,[f,E]=(0,r.useState)(),[S,O]=(0,r.useState)(l.LoadingStatus.pending);if((0,r.useEffect)((()=>{O(l.LoadingStatus.pending),(0,c.api)("badges.getOwnerInfo",{fields:String(["photo_100","photo_200","domain"]),owner_id:v}).then(E).then((()=>{O(l.LoadingStatus.loaded)})).catch((e=>{O(l.LoadingStatus.failed),(0,b.badgesLogger)("Failed badges.getOwnerInfo in GroupBadges",e)}))}),[v]),S!==l.LoadingStatus.loaded&&S!==l.LoadingStatus.failed)return(0,a.jsx)(p.BadgesOwnerBlockSkeleton,{separator:"hide"});if(!(null==(n=f)||null==(t=n.badges)?void 0:t.length)||S===l.LoadingStatus.failed)return null;const{badges:y,owner_info:A}=f,N=(null==(I=A)||null==(B=I.counters)||null==(h=B.find((e=>"total"===e.type)))?void 0:h.value)||0,k=e=>{(0,g.initBadgesOwnerInfo)({ownerId:v,isAdmin:w,badgeId:e,eventRef:e?l.BadgesEventRef.COLLECTION_BLOCK:void 0})};return(0,a.jsx)(o.AppRootProvider,{viewWidth:s.ViewWidth.DESKTOP,children:(0,a.jsx)(i.Group,{header:(0,a.jsx)(d.Header,{indicator:N,onClick:()=>k(),children:u.getLang("awards_profile_block_header")}),separator:"hide",children:(0,a.jsx)(_.BadgeItems,{badges:y,counters:null==(m=A)?void 0:m.counters,onBadgeClick:k})})})}))},680938:(e,t,n)=>{n.d(t,{withErrorBoundary:()=>g});var a=n(434788),r=n(785893),s=n(667294),o=n(513724),i=n(635928),d=n(832550),l=n(29271),c=n(316688);function g(e){return t=>(0,r.jsx)(u,{children:(0,r.jsx)(e,(0,a._)({},t))})}class u extends s.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){(0,c.badgesLogger)("Rendering error has happened in component GroupBadges",e)}render(){return this.state.hasError?(0,r.jsx)(o.Group,{separator:"hide",children:(0,r.jsx)(i.Placeholder,{header:l.getLang("global_error"),action:(0,r.jsx)(d.Button,{mode:"tertiary",loading:this.state.isReloading,onClick:this.onClick,children:l.getLang("global_reload")}),children:l.getLang("awards_group_block_unknown_error")})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1,isReloading:!1},this.onClick=()=>{this.setState({isReloading:!0}),window.nav.reload({force:!0})}}}},460854:(e,t,n)=>{n.d(t,{WithCustomScrollView:()=>i});var a=n(434788),r=n(820224),s=n(785893),o=n(86894);const i=e=>{var{withCustomScrollView:t,children:n}=e,i=(0,r._)(e,["withCustomScrollView","children"]);return t?(0,s.jsx)(o.CustomScrollView,(0,a._)({},i,{children:n})):(0,s.jsx)(s.Fragment,{children:n})}},323141:(e,t,n)=>{n.r(t),n.d(t,{BadgesOwnerBlockSkeleton:()=>d.BadgesOwnerBlockSkeleton,BadgesOwnerInfo:()=>c,GroupBadges:()=>l.GroupBadges});var a=n(785893),r=n(55163),s=n(316688),o=n(359639),i=n(222285),d=n(704919),l=n(452866);const c={init({ownerId:e,isAdmin:t,badgeId:n,eventRef:d}){e?(0,o.showMessageBoxModal)((({onClose:s})=>(0,a.jsx)(r.BadgesOwnerInfoModal,{ownerId:e,isAdmin:t,close:s,badgeId:n,eventRef:d})),{width:i.BADGES_BOX_WIDTH}):(0,s.badgesLogger)(`Wrong arguments: ownerId=${e}`)}}},222285:(e,t,n)=>{n.d(t,{BADGES_BOX_WIDTH:()=>a,BADGES_RESTRICTED_CLASS_SELECTOR_FOR_POST:()=>m,BADGE_COMMENT_SELECTOR:()=>l,BADGE_IMAGE_SIZE_100:()=>h,BADGE_IMAGE_SIZE_128:()=>_,BADGE_IMAGE_SIZE_20:()=>I,BADGE_IMAGE_SIZE_28:()=>B,BADGE_IMAGE_SIZE_64:()=>b,BADGE_IMAGE_SIZE_96:()=>p,BadgesEventName:()=>i,BadgesEventRef:()=>o,BadgesObjectType:()=>d,DONUT_BADGE_ID:()=>u,DONUT_FORM_STATUSES:()=>g,ERRORS:()=>s,LINK_TO_HELP_FOR_AUTHORS:()=>r,LoadingStatus:()=>c});const a=640,r="/@authors-badges";var s;!function(e){e[e.ERROR_PARAM=100]="ERROR_PARAM",e[e.NEED_CONFIRMATION=24]="NEED_CONFIRMATION",e[e.BALANCE=504]="BALANCE"}(s||(s={}));const o={TAB:"tab",SENDER_LIST:"sender_list",POST_BTN:"post_btn",COLLECTION_BLOCK:"collection_block",COLLECTON_ALL:"collecton_all",NOTIFICATION:"notification",PUSH:"push",PIN:"pin",COMMENT_IMG:"comment_img",COMMENT_LINK:"comment_link",PROFILE_DETAILS:"profile_details"},i={OPEN_BADGE:"open_badge",OPEN_BADGES_ALL:"open_badges_all"};var d;!function(e){e[e.WALL=11]="WALL"}(d||(d={}));const l="BadgeComment";var c;!function(e){e[e.pending=0]="pending",e[e.loaded=1]="loaded",e[e.failed=2]="failed"}(c||(c={}));const g={waiting:"waiting",initial:"initial",error:"error",waiting_timeout:"waiting_timeout",payment_cancel:"payment_cancel"},u=38,_=128,h=100,p=96,b=64,B=28,I=20,m="post--badgesRestricted"},849776:(e,t,n)=>{n.d(t,{buildBadgesStackHtml:()=>u,buildHtmlAttributesString:()=>c,getBadgeImage:()=>l,getBadgesPlacementInPostActionStatusBarToUpdate:()=>g,isBadgesDisabledForOwner:()=>h,openHelpPage:()=>p,updateNewPostHTMLForBadges:()=>_});var a=n(82161),r=n(316688),s=n(68003),o=n(29271),i=n(222285),d=n(216833);function l(e,t,n=!1){const{base_url:r,version:s}=e,o=s?`?${s}`:"";return!n&&(0,a.isRetina)()&&(t*=2),`${r}/${t}.png${o}`}const c=e=>Object.entries(e).reduce(((e,[t,n])=>{if(n){e+=` ${t}="${(0,a.escapeAttr)(String(n))}"`}return e}),""),g=(e,t,n)=>{var a;const s={place:void 0},o=e.querySelector(`._like_wall${t}_${n}`);if(!o)return(0,r.badgesLogger)("Нет кнопки лайка"),s;const i=null==(a=o.parentNode)?void 0:a.querySelector(".PostActionStatusBar");if(!i)return(0,r.badgesLogger)("Нет .PostActionStatusBar"),s;const d=i.querySelector(".BadgesStatusBar__badgesSendButton"),l=i.querySelector(".BadgesStack");return d||l?d?(s.element=d,s.place="button",s):(s.element=l,s.place="stack",s):((0,r.badgesLogger)('Нет ни стака значков, ни кнопки "Подарить"'),s)},u=({counters:e,badges:t,tqAttributes:n,withContainer:r,withLabel:i})=>{let d=0,l=0,g="";const u=s.colorScheme.isDarkScheme();if((e||[]).forEach((({type:e,badge_id:n,value:r})=>{if("total"===e)d=r;else if("badge"===e&&n&&l<3){var s;l++;const e=null==(s=t)?void 0:s.find((e=>e.id===n));if(e){const{image:t}=e,n=(0,a.isRetina)()?"stack28_light_2x.png":"stack28_light.png",r=(0,a.isRetina)()?"stack28_dark_2x.png":"stack28_dark.png",s=t.version?`?${t.version}`:"",o=`${t.base_url}/${n}${s}`,i=`${t.base_url}/${r}${s}`,d=c({src:u?i:o,class:"BadgesStackItem BadgesStack__item",alt:e.alt_text||"","data-src-light":o,"data-src-dark":i});g+=`<img ${d}>`}}})),d>0&&g){let e=`\n      <div class="BadgesStack__inner" ${n}>\n        <div class="BadgesStack__items">${g}</div>\n        <span class="BadgesStack__counter">${i?o.getLang("awards_have_gifted_badges_total",d):o.getLang("awards_wkview_badges_total",d)}</span>\n      </div>\n    `;if(r){e=`\n        <div data-tooltip-container="true" id="badges_stack" class="BadgesStack" ${"data-exec='{\"BadgesStack/init\":[]}'"}>\n          ${e}\n        </div>\n      `}return e}return""},_=(e,t,n)=>{var a,r;const s=n[2],[o,l]=s.split("_"),c=null==(r=t)||null==(a=r.wallTpl)?void 0:a.send_badge,g={};return(0,d.isBadgesEnabled)()&&c&&(e.push(c),Object.assign(g,{badges_object_id:l,badges_object_owner_id:o,badges_object_type:i.BadgesObjectType.WALL,badges_event_ref:i.BadgesEventRef.POST_BTN})),g},h=e=>{const t=e[16];try{var n;if(""===t||(null==(n=JSON.parse(t))?void 0:n.is_disabled))return!0}catch(e){return(0,r.badgesLogger)("Event from queue about IS_DISABLED_FOR_OWNER is not json"),!1}return!1},p=()=>{window.open(i.LINK_TO_HELP_FOR_AUTHORS,"_blank")}},551709:(e,t,n)=>{n.d(t,{checkPostRestrictedToSendBadge:()=>o});var a=n(218662),r=n(316688),s=n(329268);const o=(e,t)=>{const n=(0,a.getPostById)(e,t);return n?!!n.classList.contains("post--badgesRestricted")&&((0,s.renderRestrictionModal)(),!0):((0,r.badgesLogger)("Не нашли пост для показа модалки ограничения бейджиков"),!0)}},218662:(e,t,n)=>{n.d(t,{getPostById:()=>a,getReplyById:()=>r});const a=(e,t)=>{const n=`${e}_${t}`;return document.querySelector(`[data-post-id="${n}"`)},r=(e,t,n)=>e.querySelector(`#post${t}_${n}`)},460033:(e,t,n)=>{n.d(t,{ReexportInfiniteScroll:()=>a});const a=n(758021).default},608773:(e,t,n)=>{n.d(t,{initBadgesTqInteractiveHandlers:()=>p,initGroupBadgesTq:()=>b,initOpenBadgesInfoModalTq:()=>h,initStartupBadgesCheckTq:()=>I,initStartupBadgesStackTq:()=>B,tqOpenBadgesObjectInfo:()=>_});var a=n(785893),r=n(973935),s=n(283452),o=n(377974),i=n(323141),d=n(216833),l=n(321850),c=n(68003),g=n(329268),u=n(222285);const _=()=>{(0,s.tq)().setInteractiveHandler("Badges/openBadgesObjectInfo",(e=>{if(!e.payload.dataAttrs)return;const{badgeId:t,objectType:n,objectOwnerId:a,objectId:r,eventRef:s}=e.payload.dataAttrs;if(!n||!a||!r)throw new Error("No required attributes in tq Badges/openBadgesObjectInfo");(0,o.initBadgesObjectInfo)({objectId:{type:Number(n),ownerId:Number(a),id:Number(r)},badgeId:Number(t),eventRef:s})}))},h=()=>{(0,s.tq)().setInteractiveHandler("Badges/openBadgesInfoModal",(e=>{if(!e.payload.dataAttrs)return;const{modalType:t}=e.payload.dataAttrs;if("restriction"===t)(0,g.renderRestrictionModal)();else(0,g.renderBadgesNotAvailableModal)()}))},p=()=>{_(),(0,s.tq)().setInteractiveHandler("Badges/openBadgesCatalog",(e=>{if(!e.payload.dataAttrs)return;const{objectType:t,objectOwnerId:n,objectId:a,eventRef:r}=e.payload.dataAttrs;if(!t||!n||!a)throw new Error("No required attributes in tq Badges/openBadgesCatalog");(0,o.initBadgesCatalog)({objectId:{id:Number(a),type:Number(t),ownerId:Number(n)},eventRef:r})}))},b=()=>{(0,s.tq)().setStartupHandler("BadgesOwner/render_group_badges",(e=>{const{data:{owner_id:t,is_admin:n},target:s}=e.payload;s&&void 0!==t&&(0,d.isBadgesEnabled)()&&(r.render((0,a.jsx)(i.GroupBadges,{ownerId:Number(t),isAdmin:Boolean(n)}),s),(0,l.pushNavDestroy)((()=>r.unmountComponentAtNode(s))))}))},B=()=>{(0,s.tq)().setStartupHandler("BadgesStack/init",(e=>{const{target:t}=e.payload;t&&c.colorScheme.subscribe((()=>{t.querySelectorAll(".BadgesStackItem").forEach((e=>{let t=e.src;const{srcLight:n=t,srcDark:a=t}=e.dataset;t=c.colorScheme.isDarkScheme()?a:n,e.src=t}))}))})),(0,s.tq)().setStartupHandler("BadgesSendButton/init_tooltip",(e=>{const{target:t}=e.payload;t&&(0,o.loadBadgesStatusBarOnboarding)({element:t})}))},I=()=>{(0,s.tq)().setStartupHandler("BadgeComment/init",(({payload:{target:e,data:t}})=>{if(!e)return;const n=t.fallback_text;if(!(0,d.isBadgesRenderingEnabled)())return void((e,t)=>{const n=e.parentElement;n&&(n.innerHTML=t)})(e,n);e.classList.remove("BadgeComment--hidden");const{is_enabled_for_owner:a,badge_id:r,object_type:s,object_owner_id:o,object_id:i}=t;if(!s||!o||!i)return;const l=(0,d.isBadgesEnabled)();if(a&&l)return e.setAttribute("data-task-click","Badges/openBadgesObjectInfo"),e.setAttribute("data-object-type",s),e.setAttribute("data-object-owner-id",o),e.setAttribute("data-object-id",i),e.setAttribute("data-badge-id",r),void e.setAttribute("data-event-ref",u.BadgesEventRef.COMMENT_IMG);e.setAttribute("data-task-click","Badges/openBadgesInfoModal"),e.setAttribute("data-modal-type",l?"restriction":"not_available")}))}},377974:(e,t,n)=>{n.d(t,{initBadgesCatalog:()=>_,initBadgesObjectInfo:()=>h,initBadgesOwnerInfo:()=>p,initBadgesTqInteractiveHandlers:()=>u.initBadgesTqInteractiveHandlers,initOpenBadgesInfoModalTq:()=>u.initOpenBadgesInfoModalTq,initStartupBadgesCheckTq:()=>u.initStartupBadgesCheckTq,initStartupBadgesStackTq:()=>u.initStartupBadgesStackTq,loadBadgesStatusBarOnboarding:()=>b});var a=n(11010),r=n(316688),s=n(659397),o=n(216833),i=n(584356),d=n(179153),l=n(874695),c=n(551709),g=n(839470),u=n(608773);const _=({objectId:e,eventRef:t,withCheckRestriction:a=!0})=>{(0,o.isBadgesEnabled)()&&(a&&(0,c.checkPostRestrictedToSendBadge)(e.ownerId,e.id)||((0,i.showBoxLoader)(),(window.BadgesCatalog?Promise.resolve():(0,s.asyncImportLoader)((()=>Promise.all([n.e(213),n.e(2067),n.e(57451),n.e(71610),n.e(5038),n.e(14930),n.e(18669)]).then(n.bind(n,768327)))).then((({BadgesCatalog:e})=>{window.BadgesCatalog=e}))).then((()=>window.BadgesCatalog.init(e,t))).catch((e=>{(0,r.badgesLogger)("Error loading module BadgesCatalog",e)})).finally((()=>{(0,i.hideBoxLoader)()}))))},h=e=>{(0,o.isBadgesEnabled)()&&((0,i.showBoxLoader)(),(window.BadgesObjectInfo?Promise.resolve():(0,s.asyncImportLoader)((()=>Promise.all([n.e(213),n.e(2067),n.e(57451),n.e(71610),n.e(5038),n.e(84400),n.e(14930),n.e(83803)]).then(n.bind(n,978219)))).then((({BadgesObjectInfo:e})=>{window.BadgesObjectInfo=e}))).then((()=>window.BadgesObjectInfo.init(e))).catch((e=>{(0,r.badgesLogger)("Error loading module BadgesObjectInfo",e)})).finally((()=>{(0,i.hideBoxLoader)()})))},p=e=>{(0,o.isBadgesEnabled)()&&((0,i.showBoxLoader)(),(window.BadgesOwnerInfo?Promise.resolve():(0,s.asyncImportLoader)((()=>Promise.resolve().then(n.bind(n,323141)))).then((({BadgesOwnerInfo:e})=>{window.BadgesOwnerInfo=e}))).then((()=>window.BadgesOwnerInfo.init(e))).catch((e=>{(0,r.badgesLogger)("Error loading module BadgesOwnerInfo",e)})).finally((()=>{(0,i.hideBoxLoader)()})))},b=(0,a._)((function*({element:e}){if(!(0,o.isBadgesEnabled)())return;(yield d.HelpHints.get((0,g.partConfigEnabled)("groups_one_time_donut_without_badges")?"posting:post_feed_no_badges_unseen":l.HelpHintId.POSTING_POST_FEED_BADGES_UNSEEN))&&(0,s.asyncImportLoader)((()=>n.e(27772).then(n.bind(n,375396)))).then((({renderStatusBarOnboarding:t})=>{t({element:e})})).catch((e=>{(0,r.badgesLogger)("Error loading module badges_status_bar_onboarding_init",e)}))}))},316688:(e,t,n)=>{n.d(t,{badgesLogger:()=>r});var a=n(970978);const r=(e,t)=>{window.vk.dev&&console.log(t),(0,a.logError)(new Error(e),{environment:"badges"})}},329268:(e,t,n)=>{n.d(t,{renderBadgesNotAvailableModal:()=>c,renderRestrictionModal:()=>l,renderTaskModal:()=>g});var a=n(434788),r=n(785893),s=n(895145),o=n(359639),i=n(29271);const d=(0,s.asyncComponent)((()=>n.e(60456).then(n.bind(n,575263))),(({BadgesRestrictedModal:e})=>e)),l=()=>{(0,o.showMessageBoxModalSuspense)((e=>(0,r.jsx)(d,(0,a._)({title:i.getLang("awards_restricted_tittle"),subtitle:i.getLang("awards_restricted_subheader"),buttonText:i.getLang("awards_restricted_button")},e))))},c=()=>{(0,o.showMessageBoxModalSuspense)((e=>(0,r.jsx)(d,(0,a._)({title:i.getLang("awards_not_available_tittle"),subtitle:i.getLang("awards_not_available_subheader"),buttonText:i.getLang("awards_not_available_button")},e))))},g=e=>{const t=(0,s.asyncComponent)((()=>n.e(64369).then(n.bind(n,910885))),(({BadgesTaskModal:e})=>e));(0,o.showMessageBoxModalSuspense)((n=>(0,r.jsx)(t,(0,a._)({},n,e))))}},533399:(e,t,n)=>{n.d(t,{CounterType:()=>a});const a={total:"total",badge:"badge",friends:"friends"}},364922:(e,t,n)=>{n.d(t,{Cache:()=>d});var a,r,s,o=n(11010),i=n(891047);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(r||(r={})),function(e){e.HELP_HINTS="helpHints"}(s||(s={}));class d{getHelpHints(){return this.getItem(s.HELP_HINTS)}setHelpHints(e){return this.setItem(s.HELP_HINTS,e)}clear(){return(0,i.clear)(this.store)}getItem(e){var t=this;return(0,o._)((function*(){const n=t.buildItemKey(e),a=d.cache.get(n);return(0,i.get)(n,t.store).then((e=>e||a)).catch((()=>a))}))()}setItem(e,t){var n=this;return(0,o._)((function*(){const a=n.buildItemKey(e);d.cache.set(a,t),yield(0,i.set)(a,t,n.store).catch((()=>{}))}))()}deleteItem(e){const t=this.buildItemKey(e);return(0,i.del)(t,this.store)}buildItemKey(e){return`${e}-${d.VERSION}-${this.userId}`}getItemSync(e,t){const n=this.buildSyncItemKey(e);try{let e=localStorage.getItem(n);if(!e)return;switch(t){case r.OBJECT:try{e=JSON.parse(e)}catch(e){return}break;case r.NUMBER:e=Number(e)||0;break;case r.STRING_NUMBER:e=Number(e)||e;break;case r.BOOLEAN:e=Boolean(Number(e))}return e}catch(e){return d.cache.get(n)}}setItemSync(e,t,n){const a=this.buildSyncItemKey(e);switch(n){case r.OBJECT:t=JSON.stringify(t);break;case r.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(a,t)}catch(e){d.cache.set(a,t)}}buildSyncItemKey(e){return`${d.DB_NAME}_${e}_${d.VERSION}_${this.userId}`}constructor({userId:e=(null==(a=window.vk)?void 0:a.id),categories:t}={}){var n;this.userId=e||0;let r="cache";(null==(n=t)?void 0:n.length)&&(r=`${r}-${t.join("-")}`),this.store=(0,i.createStore)(d.DB_NAME,r)}}d.DB_NAME="help-hints",d.VERSION=1,d.CACHE_UPDATE_EVENT_NAME=`${d.DB_NAME}_cache_update`,d.cache=new Map},992983:(e,t,n)=>{n.d(t,{HelpHint:()=>a});class a{get id(){return this.hint.id}get title(){return this.hint.title}get description(){return this.hint.description}getResource(e){var t,n;return null==(n=this.hint.resources)||null==(t=n.find((({key:t})=>t===e)))?void 0:t.value}constructor(e){this.hint=e}}},179153:(e,t,n)=>{n.d(t,{HelpHints:()=>c});var a=n(11010),r=n(434788),s=n(964548),o=n(599809),i=n(992983),d=n(364922),l=n(362884);class c{static setAPI(e){this.api=e}static setUserId(e){this.cacheOptions.userId=e,this.cache=void 0}static setCategories(e){Array.isArray(e)||(e=[e]),this.cacheOptions.categories=e,this.cache=void 0}static get(e){var t=this;return(0,a._)((function*(){return yield t.reload(),t.getSync(e)}))()}static getSync(e){var t;const n=null==(t=this.helpHints)?void 0:t.items.find((({id:t})=>t===e));if(n)return new i.HelpHint(n)}static show(e){return e instanceof i.HelpHint&&(e=e.id),this.api.account.showHelpHint({hint_id:e})}static hide(e){var t=this;return(0,a._)((function*(){e instanceof i.HelpHint&&(e=e.id);let n=!1;var a;(yield t.reloading,t.helpHints)&&(t.helpHints.items=t.helpHints.items.filter((({id:t})=>(t===e&&(n=!0),t!==e))),null==(a=t.cache)||a.setHelpHints(t.helpHints));return n?t.api.account.hideHelpHint({hint_id:e}):Promise.resolve()}))()}static getResource(e,t){var n=this;return(0,a._)((function*(){const a=yield n.get(e);if(a)return a.getResource(t)}))()}static reload(){var e=this;return(0,a._)((function*(){return yield e.reloading,e.cache||(e.cache=new d.Cache(e.cacheOptions)),e.reloading=new Promise((0,a._)((function*(t){var n,o;if(!e.api.options.token&&"function"!=typeof e.api.options.requestMethod){const n=yield e.getAccessToken();if(!n)return t();e.api=new s.API({token:n}),e.api.onTokenRegenerate((0,a._)((function*(n){const a=yield e.getAccessToken();if(!a)return t();n(a)})))}if(e.helpHints=yield null==(n=e.cache)?void 0:n.getHelpHints(),e.helpHints&&Date.now()-e.helpHints.date<l.TEN_MINUTES&&!e.isDevMode())return t();const{categories:i}=e.cacheOptions;e.helpHints=yield e.api.account.getHelpHints({categories:i?String(i):void 0}).then((e=>(0,r._)({},e,{date:Date.now()}))).catch((()=>{})),yield null==(o=e.cache)?void 0:o.setHelpHints(e.helpHints),e.refresh(),t()}))),e.reloading}))()}static refresh(){try{localStorage.setItem(d.Cache.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(d.Cache.CACHE_UPDATE_EVENT_NAME)}catch(e){}}static getAccessToken(){return(0,a._)((function*(){const e=yield(0,o.login)("web_token").catch((()=>{}));if(!e)return;const{access_token:t}=e;return t}))()}}c.api=new s.API({token:""}),c.cacheOptions={},c.reloading=Promise.resolve(),c.isDevMode=()=>localStorage.getItem("help-hints-dev"),window.addEventListener("storage",(({key:e,newValue:t})=>{e===d.Cache.CACHE_UPDATE_EVENT_NAME&&null!==t&&c.reload()}))},874695:(e,t,n)=>{var a,r;n.d(t,{HelpHintId:()=>r}),function(e){e.DEFAULT="default",e.STICKERS_UGC="stickers_ugc"}(a||(a={})),function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji",e.POSTING_POST_FEED_BADGES="posting:post_feed_badges",e.POSTING_POST_BADGES_ONBOARDING="posting:post_badges_onboarding",e.POSTING_POST_FEED_BADGES_UNSEEN="posting:post_feed_badges_unseen",e.POSTING_POST_BADGES_PAGE_UNSEEN="posting:post_badges_page_unseen",e.POSTING_POST_BADGES_CATALOG_USER="posting:post_badges_catalog_user",e.POSTING_POST_BADGES_FEEDBACK_USER="posting:post_badges_feedback_user",e.POSTING_POST_BADGES_FEEDBACK_USER_UNSEEN="posting:post_badges_feedback_user_unseen",e.STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.STICKERS_UGC_KEYBOARD_ONBOARDING="stickers:ugc_keyboard_onboarding",e.STICKERS_UGC_APP_ONBOARDING_MODAL="stickers:ugc_app_onboarding_modal",e.STICKERS_UGC_KEYBOARD_ONBOARDING_TOOLTIP="stickers:ugc_keyboard_onboarding_tooltip"}(r||(r={}))},362884:(e,t,n)=>{n.d(t,{TEN_MINUTES:()=>a});const a=6e5},448575:(e,t,n)=>{n.d(t,{WebStatEvents:()=>i});var a=n(11010),r=n(599809),s=n(964548),o=n(515997);const i=new class{setAPI(e){this.api=e}setUserId(e){this.userId=e}add(e){var t=this;return(0,a._)((function*(){var n,a,r,i,d;(yield t.init(),null!=(a=e).id||(a.id=(0,s.getRandomId)()),null!=(r=e).prev_id||(r.prev_id=null==(n=t.previousEvent)?void 0:n.id),null!=(i=e).timestamp||(i.timestamp=String((0,o.nowMicroseconds)())),"undefined"!=typeof window)&&(null!=(d=e).url||(d.url=window.location.href));e.type_navgo&&t.previousNavigationEvent&&(e.type_navgo.prev_navgo_id=t.previousNavigationEvent.id,e.type_navgo.prev_navgo_timestamp=t.previousNavigationEvent.timestamp),t.previousEvent=e,e.type_navgo&&(t.previousNavigationEvent=e),t.queue.add(e),t.send()}))()}init(){var e=this;return(0,a._)((function*(){if(e.initialized)return;if(e.initialized=!0,e.api)return;const t=yield(0,r.login)("web_token").catch((()=>{}));if(!t)return void(e.initialized=!1);const{access_token:n}=t;e.api=new s.API({token:n}),e.api.onTokenRegenerate((0,a._)((function*(t){const n=yield(0,r.login)("web_token").catch((()=>{}));if(!n)return void(e.initialized=!1);const{access_token:a}=n;t(a)})))}))()}send(){this.api&&this.queue.size&&(this.api.statEvents.addWeb({events:JSON.stringify([...this.queue.values()]),user_id:this.userId}),this.queue.clear())}constructor(){var e;this.userId="undefined"!=typeof window&&(null==(e=window.vk)?void 0:e.id)||0,this.queue=new Set,this.initialized=!1}}},515997:(e,t,n)=>{n.d(t,{nowMicroseconds:()=>r});const a=performance.timeOrigin||performance.timing.navigationStart||Date.now();function r(){return Math.floor(1e3*(a+performance.now()))}},512796:(e,t,n)=>{function a(e){if(null==e)throw new TypeError("Cannot destructure "+e);return e}n.d(t,{_:()=>a})}}]);try{stManager.done("dist/web/chunks/9a477bd9.214d73b0.js")}catch(e){}