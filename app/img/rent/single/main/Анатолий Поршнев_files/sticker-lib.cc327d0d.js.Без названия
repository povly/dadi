"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[36834],{634268:(e,t,i)=>{i.d(t,{default:()=>n});const n={sticker:"Sticker-module__sticker--CtZU6",placeholder:"Sticker-module__placeholder--5PW3m",in:"Sticker-module__in--pEnhZ",tappable:"Sticker-module__tappable--M4lob",content:"Sticker-module__content--MQWSP",disabled:"Sticker-module__disabled--cK_tc",favorite:"Sticker-module__favorite--Xqlbr"}},881157:(e,t,i)=>{i.d(t,{default:()=>n});const n={favorite:"FavoriteButton-module__favorite--jHzWm",active:"FavoriteButton-module__active--aUeeT"}},705622:(e,t,i)=>{i.d(t,{default:()=>n});const n={overlay:"Overlay-module__overlay--YyHpH"}},270022:(e,t,i)=>{i.d(t,{default:()=>n});const n={sticker:"StickerRich-module__sticker--WIoTQ"}},145636:(e,t,i)=>{i.d(t,{default:()=>n});const n={stickerAnimationIsPlaying:"PopupWrapper-module__stickerAnimationIsPlaying--yaedE",icon:"PopupWrapper-module__icon--OIwak",left:"PopupWrapper-module__left--LBLFm",right:"PopupWrapper-module__right--qsAgs",iconAnimated:"PopupWrapper-module__iconAnimated--jlPzq",horizontalTremble:"PopupWrapper-module__horizontalTremble--RrOKq"}},200349:(e,t,i)=>{i.d(t,{default:()=>n});const n={icon:"UGCWrapper-module__icon--bx0cO",left:"UGCWrapper-module__left--xjIJc",right:"UGCWrapper-module__right--X2vhK"}},680427:(e,t,i)=>{i.d(t,{LazySticker:()=>c});var n=i(434788),r=i(785893),a=i(667294),s=i(86894),o=i(659397);const l=(0,a.lazy)((()=>(0,o.asyncImportLoader)((()=>Promise.all([i.e(36834),i.e(868),i.e(79344)]).then(i.bind(i,105744)).then((({Sticker:e})=>({default:e})))))));function c(e){const{size:t}=e;return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{style:{width:t,height:t},children:(0,r.jsx)(s.Spinner,{})}),children:(0,r.jsx)(l,(0,n._)({},e))})}},105744:(e,t,i)=>{i.r(t),i.d(t,{Sticker:()=>_});var n=i(434788),r=i(820224),a=i(785893),s=i(659397),o=i(86894),l=i(607338),c=i(667294),d=i(525605),u=i(143650),h=i(538648),m=i(194449),g=i(634268);const f=92,v=16,p=new Set;function _(e){var{size:t,theme:i,plain:_,configs:k,dynamic:C,favorite:x,disabled:I,defaultConfigId:b,onFavoriteClick:S,sticker:y,UNSAFE_imageUrl:j,UNSAFE_animationUrl:N,name:U,group:A="sticker",loading:P,className:O,style:B}=e,M=(0,r._)(e,["size","theme","plain","configs","dynamic","favorite","disabled","defaultConfigId","onFavoriteClick","sticker","UNSAFE_imageUrl","UNSAFE_animationUrl","name","group","loading","className","style"]);const{onClick:z}=M,{hasPointer:T}=(0,o.useAdaptivityWithJSMediaQueries)(),w=(0,h.useStickerContext)(y),L=(0,u.useOverlay)(w),{imageUrl:F,animationUrl:R}=(0,c.useMemo)((()=>{var e;if(j||N)return{imageUrl:j,animationUrl:N};if(!y)return{};const n=(null==(e=m.BaseUrlBuilder.getAnimation({type:i,animations:w.animations}))?void 0:e.url)||w.animationUrl;return{imageUrl:new m.BaseUrlBuilder({size:t,theme:i,configs:k,defaultConfigId:b,imageId:w.id,configContext:w.imageConfigContext,images:i===m.Theme.LIGHT?w.images:w.imagesWithBackground}).build(),animationUrl:n}}),[t,i,y,k,b,j,N]),[E,W]=(0,c.useState)(!p.has(F)),{lottieContainerRef:G,lottieLoading:D,lottieError:$}=(0,l.useLottie)({group:A,width:t,height:t,loop:!0,autoplay:!0,name:R||"",animationUrl:L?void 0:R});(0,c.useEffect)((()=>{C||W(!p.has(F))}),[F,C]);const H=!R||$,X=E&&D,q=Boolean(!_&&z),K=X||Boolean(L),Q=t/f,V=Math.round(v*Q);return(0,a.jsx)("div",(0,n._)({className:(0,s.classNames)(g.default.sticker,{[g.default.disabled]:I,[g.default.placeholder]:K,[g.default.tappable]:q},O),style:(0,n._)({"--sticker-size":`${t}px`,"--sticker-scale":String(Q.toFixed(2)),width:t,height:t},B)},M,{children:(0,a.jsxs)("div",{ref:G,className:g.default.in,children:[S&&T&&!X&&(0,a.jsx)(d.FavoriteButton,{className:g.default.favorite,active:x,width:V,height:V,onClick:e=>{var t;e.stopPropagation(),null==(t=S)||t()}}),H&&!L&&(0,a.jsx)("img",{className:g.default.content,alt:"",src:F,loading:P,onError:()=>{W(!p.has(F))},onLoad:()=>{p.add(F),W(!1)}}),L]})}))}},525605:(e,t,i)=>{i.d(t,{FavoriteButton:()=>c});var n=i(434788),r=i(820224),a=i(785893),s=i(659397),o=i(587109),l=i(881157);function c(e){var{active:t,className:i}=e,c=(0,r._)(e,["active","className"]);return(0,a.jsx)(o.Icon20Favorite,(0,n._)({className:(0,s.classNames)(l.default.favorite,{[l.default.active]:t},i)},c))}},703688:(e,t,i)=>{i.d(t,{AgeRestrictedOverlay:()=>o});var n=i(785893),r=i(548499),a=i(949780),s=i(807948);function o(){const{translate:e}=(0,r.useLangPack)();return(0,n.jsx)(s.Overlay,{icon:(0,n.jsx)(a.Icon2418CircleOutline,{}),description:e("stickers_kit_sticker_age_restricted")})}},2699:(e,t,i)=>{i.d(t,{BannedOverlay:()=>o});var n=i(785893),r=i(88493),a=i(548499),s=i(807948);function o(){const{translate:e}=(0,a.useLangPack)();return(0,n.jsx)(s.Overlay,{icon:(0,n.jsx)(r.Icon24BlockOutline,{}),description:e("stickers_kit_sticker_banned")})}},366901:(e,t,i)=>{i.d(t,{DeletedOverlay:()=>o});var n=i(785893),r=i(903421),a=i(548499),s=i(807948);function o(){const{translate:e}=(0,a.useLangPack)();return(0,n.jsx)(s.Overlay,{icon:(0,n.jsx)(r.Icon24DeleteOutline,{}),description:e("stickers_kit_sticker_deleted")})}},710347:(e,t,i)=>{i.d(t,{ModerationOverlay:()=>o});var n=i(785893),r=i(910301),a=i(548499),s=i(807948);function o(){const{translate:e}=(0,a.useLangPack)();return(0,n.jsx)(s.Overlay,{icon:(0,n.jsx)(r.Icon24ClockOutline,{}),description:e("stickers_kit_ugc_sticker_in_moderation")})}},807948:(e,t,i)=>{i.d(t,{Overlay:()=>o});var n=i(785893),r=i(659397),a=i(86894),s=i(705622);function o({icon:e,description:t,className:i}){return(0,n.jsxs)("div",{className:(0,r.classNames)(s.default.overlay,i),children:[e,t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Spacing,{size:2}),(0,n.jsx)(a.Subhead,{dangerouslySetInnerHTML:{__html:t}})]})]})}},143650:(e,t,i)=>{i.d(t,{useOverlay:()=>l});var n=i(785893),r=i(2699),a=i(366901),s=i(710347),o=i(703688);function l({isUGC:e,isDeleted:t,isBanned:i,isRejected:l,isClaimed:c,isActiveAgeRestriction:d}){return e?t?(0,n.jsx)(a.DeletedOverlay,{}):i||l?(0,n.jsx)(r.BannedOverlay,{}):c?(0,n.jsx)(s.ModerationOverlay,{}):d?(0,n.jsx)(o.AgeRestrictedOverlay,{}):null:null}},581286:(e,t,i)=>{i.d(t,{StickerRich:()=>u});var n=i(434788),r=i(820224),a=i(785893),s=i(105744),o=i(785892),l=i(878239),c=i(538648),d=i(270022);function u(e){var{direction:t,contentClassName:i}=e,u=(0,r._)(e,["direction","contentClassName"]);const{sticker:h}=u,m=(0,c.useStickerContext)(h);u.sticker=m;const g=(0,a.jsx)(s.Sticker,(0,n._)({},u)),{isUGC:f,isPopup:v}=m;return v?(0,a.jsx)(l.PopupWrapper,(0,n._)({direction:t,contentClassName:i},u,{className:d.default.sticker,children:g})):f?(0,a.jsx)(o.UGCWrapper,(0,n._)({direction:t,contentClassName:i},u,{className:d.default.sticker,children:g})):g}},878239:(e,t,i)=>{i.d(t,{PopupWrapper:()=>c});var n=i(785893),r=i(659397),a=i(86894),s=i(6512),o=i(145636);const l={left:o.default.left,right:o.default.right};function c({direction:e,className:t,children:i,onContentClick:c,contentClassName:d="",icon:u}){return(0,n.jsxs)("div",{className:t,children:[i,(0,n.jsx)("div",{className:(0,r.classNames)(o.default.icon,l[e],d),children:(0,n.jsx)(a.Tappable,{activeMode:"opacity",hoverMode:"opacity",disabled:!c,onClick:c,children:u||(0,n.jsx)(s.Icon12Play,{})})})]})}},785892:(e,t,i)=>{i.d(t,{UGCWrapper:()=>c});var n=i(785893),r=i(659397),a=i(86894),s=i(376648),o=i(200349);const l={left:o.default.left,right:o.default.right};function c({direction:e,className:t,children:i,onContentClick:c,contentClassName:d=""}){return(0,n.jsxs)("div",{className:t,children:[i,(0,n.jsx)("div",{className:(0,r.classNames)(o.default.icon,l[e],d),children:(0,n.jsx)(a.Tappable,{activeMode:"opacity",hoverMode:"opacity",disabled:!c,onClick:c,children:(0,n.jsx)(s.Icon20UgcChatStickerCircleFillBlackAlpha,{})})})]})}},3817:(e,t,i)=>{i.d(t,{StickerContext:()=>n,getStickerContext:()=>r});class n{get rawData(){return this.ugc||this.base}get isUGC(){return Boolean(this.ugc)}get isPopup(){var e;return Boolean(null==(e=this.base)?void 0:e.popup)}get isBase(){return Boolean(this.base)}get id(){var e,t;return(null==(e=this.base)?void 0:e.sticker_id)||(null==(t=this.ugc)?void 0:t.id)}get ownerId(){var e;return null==(e=this.ugc)?void 0:e.owner_id}get packId(){var e,t;return(null==(e=this.base)?void 0:e.product_id)||(null==(t=this.ugc)?void 0:t.pack_id)}get images(){var e,t;return(null==(e=this.base)?void 0:e.images)||(null==(t=this.ugc)?void 0:t.images)}get imagesWithBackground(){var e,t,i;return(null==(e=this.base)?void 0:e.images_with_background)||(null==(t=this.base)?void 0:t.images)||(null==(i=this.ugc)?void 0:i.images)}get animations(){var e;return null==(e=this.base)?void 0:e.animations}get animationUrl(){var e;return null==(e=this.base)?void 0:e.animation_url}get imageConfigContext(){var e;return null==(e=this.base)?void 0:e.image_config_context}get isAllowed(){var e;return!!this.isUGC||(null==(e=this.base)?void 0:e.is_allowed)}get isActiveAgeRestriction(){var e;return"age_18"===(null==(e=this.ugc)?void 0:e.active_restriction)}get isBanned(){var e;return"banned"===(null==(e=this.ugc)?void 0:e.status)}get isRejected(){var e;return"rejected"===(null==(e=this.ugc)?void 0:e.status)}get isDeleted(){var e;return Boolean(null==(e=this.ugc)?void 0:e.is_deleted)}get isClaimed(){var e;return Boolean(null==(e=this.ugc)?void 0:e.is_claimed)}constructor(e){e&&("id"in e?this.ugc=e:"sticker_id"in e&&(this.base=e))}}function r(...e){return new n(...e)}},538648:(e,t,i)=>{i.d(t,{useStickerContext:()=>r});var n=i(3817);function r(e){return e instanceof n.StickerContext?e:new n.StickerContext(e)}},194449:(e,t,i)=>{i.d(t,{BaseUrlBuilder:()=>o,BaseUrlImageVariant:()=>a,Theme:()=>n});var n,r,a,s=i(371830);!function(e){e.LIGHT="light",e.DARK="dark"}(n||(n={})),function(e){e.PNG="png"}(r||(r={})),function(e){e.SQUARE="square"}(a||(a={}));class o{setSize(e){return this.size=e,this}setTheme(e){return this.theme=e,this}setFormat(e){return this.format=e,this}setImageId(e){return this.imageId=e,this}setDefaultConfigId(e){return this.defaultConfigId=e,this}setImages(e){return this.images=e,this}setConfigs(e){return this.configs=e,this}setConfigContext(e){return this.configContext=e,this}build(){var e;return this.images?this.findImage():this.configContext||(null==(e=this.configs)?void 0:e.length)?this.buildBaseUrl():void 0}static build({config:e,variant:t,size:i,retinaSize:n,format:r=o.DEFAULT_FORMAT}){if(!e)return"";const{base_url:a,version:l}=e;n&&s.PIXEL_RATIO>s.DEFAULT_PIXEL_RATIO&&(i=n);return`${a}/${t}${i>1?`_${i}x`:""}.${r}${void 0!==l?`?${l}`:""}`}get retinaSize(){return this.upscale?Number(this.size)*s.PIXEL_RATIO:Number(this.size)}static getAnimation({type:e,animations:t}){var i;return null==(i=t)?void 0:i.find((t=>t.type===e))}findImage(){var e,t,i,n;const r=this.retinaSize;return(null==(t=this.images)||null==(e=t.find((e=>e.theme===this.theme&&(e.height>=r||e.width>=r))))?void 0:e.url)||(null==(n=this.images)||null==(i=n[this.images.length-1])?void 0:i.url)}buildBaseUrl(){var e;const{config_id:t}=this.configContext||{},i=null==(e=this.configs)?void 0:e.find((({id:e})=>e===t||e===this.defaultConfigId));if(!i)return this.findImage();const{pattern:n,sizes:r,theme_modifiers:a}=i;return n.replace(/{([^]+?)}/g,((e,t)=>{switch(t){case"image_id":return this.getImageIdModifier();case"size":return this.getSizeModifier(r);case"version":return this.getVersionModifier();case"theme_modifier":return this.getCommonModifier(a,this.theme);case"format":return this.getCommonModifier(this.formatModifiers,this.format)}return""}))}getImageIdModifier(){return String(this.imageId)}getSizeModifier(e){const t=this.retinaSize,i=e.find((({width:e,height:i})=>e>=t||i>=t));if(!i)return String(t);const{modifier:n,format_modifiers:r}=i;return this.formatModifiers=r,n}getVersionModifier(){var e;const t=null==(e=this.configContext)?void 0:e.version;return t?String(t):""}getCommonModifier(e,t){var i;const n=null==(i=e)?void 0:i.find((({id:e})=>e===t));if(!n)return"";const{modifier:r}=n;return r}constructor({size:e,theme:t,format:i,upscale:a,imageId:s,defaultConfigId:l,images:c,configs:d,configContext:u}){var h,m;this.format=o.DEFAULT_FORMAT,this.upscale=!0,this.size=e,this.theme=t||n.LIGHT,this.format=i||r.PNG,this.imageId=s,this.defaultConfigId=l,void 0!==a&&(this.upscale=a),(null==(m=c)||null==(h=m[0])?void 0:h.theme)&&(c=c.sort((({theme:e},{theme:i})=>Number(e===t)-Number(i===t)))),this.images=c,this.configs=d,this.configContext=u}}o.DEFAULT_FORMAT=r.PNG},499118:(e,t,i)=>{function n(e,t,i){return Math.max(t,Math.min(e,i))}i.d(t,{clamp:()=>n})},371830:(e,t,i)=>{i.d(t,{DEFAULT_PIXEL_RATIO:()=>r,PIXEL_RATIO:()=>a});var n=i(499118);const r=1,a=Math.ceil((0,n.clamp)(window.devicePixelRatio,1,2))}}]);try{stManager.done("dist/web/chunks/sticker-lib.cc327d0d.js")}catch(e){}