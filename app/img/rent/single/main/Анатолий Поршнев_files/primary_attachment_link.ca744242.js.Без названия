(()=>{"use strict";var t,e,r,n={151791:(t,e,r)=>{r.d(e,{LinkPrimaryAttachment:()=>p});var n=r(11010),o=r(785893),i=r(667294),a=r(327126),l=r(765906),d=r(599809),c=r(29271),s=r(571039);const p=({snippet:{title:t,photo:e,url:r,caption:p,is_favorite:u},currentPostId:f,isPrimarySingle:v,isCompact:g,trackCode:y,onFavoriteToggle:k,onFavoriteToggleError:m})=>{const[h,b]=(0,i.useState)(u?"added":"idle"),w=(0,s.wrapAway)(r,!0),_=(0,l.makeUrl)(w,{track_code:null!=y?y:"",post:f,el:"snippet"},!1),O=(0,n._)((function*(t){t.preventDefault();const e="added"===h;b(e?"removing":"adding");try{e?yield(0,d.api)("fave.removeLink",{link:r,track_code:y}):yield(0,d.api)("fave.addLink",{link:r,track_code:y}),b(e?"idle":"added"),k(!e)}catch(t){var n;b(e?"added":"idle"),null==(n=m)||n(t)}}));return t&&e&&p?(0,o.jsx)(a.PrimaryAttachmentLink,{title:t,photo:e,url:_,caption:p,favoriteState:h,onFavoriteToggle:O,isPrimarySingle:v,isCompact:g,textLinkGo:c.getLang("wall_attachments_link_go"),textTooltip:"added"===h?c.getLang("fave_delete"):c.getLang("fave_add")}):null}},885382:(t,e,r)=>{r.d(e,{linkBlockInitiator:()=>l});var n=r(434788),o=r(785893),i=r(243859),a=r(151791);const l=(t,e,r={destroyAfterNavigation:!0})=>(0,i.createReactInitiator)((t=>(0,o.jsx)(e,{children:(0,o.jsx)(a.LinkPrimaryAttachment,(0,n._)({},t))})),t,r)},382573:(t,e,r)=>{var n,o,i,a=r(283452),l=r(659397),d=r(885382),c=r(29271),s=r(584356),p=r(869048);(null==(o=window.vk)||null==(n=o.pe)?void 0:n.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(r.p=window.vk.stDomain+"/dist/"),(0,a.tq)().setStartupHandler("LinkSnippetPrimaryAttachmentReactBlock/init",(({payload:{target:t,data:e}})=>{if(!t)throw new Error("LinkPrimaryBlock: Missing target");const r=e.snippet,n=e.additionalData.currentPostId,o=e.additionalData.isPrimarySingle,i=e.trackCode;(0,d.linkBlockInitiator)(t,p.AppRootProvider).render({snippet:(0,l.decodeHTMLEntitiesDeep)(r),currentPostId:n,trackCode:i,onFavoriteToggle:function(t){t&&(0,s.showDoneBox)((0,c.langLink)("/bookmarks?type=link",c.getLang("fave_link_snippet_added")))},isPrimarySingle:o})}));try{window.stManager.done(window.jsc("web/primary_attachment_link.js"))}catch(t){}},678520:(t,e,r)=>{function n(t){return"number"==typeof t&&!Number.isNaN(t)}r.d(e,{isNumber:()=>n})},765906:(t,e,r)=>{r.d(e,{isValidUrl:()=>i,makeUrl:()=>o});var n=r(678520);function o(t,e,r=!0){if(!e)return t;const[o,i]=t.split("?"),a={},l=[];return i&&i.split("&").map((t=>{const[r,n]=t.split("=");r in e||(e[r]=n)})),Object.keys(e).forEach((t=>{const r=e[t];var o;("string"==typeof(o=r)&&o||(0,n.isNumber)(r))&&(a[t]=r)})),Object.keys(a).forEach((t=>{const e=r?encodeURIComponent(a[t]):a[t];l.push(`${t}=${e}`)})),0===l.length?o:`${o}?${l.join("&")}`}const i=t=>{try{return new URL(t),!0}catch(t){}return!1}}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={exports:{}};return n[t].call(r.exports,r,r.exports,i),r.exports}i.m=n,t=[],i.O=(e,r,n,o)=>{if(!r){var a=1/0;for(s=0;s<t.length;s++){for(var[r,n,o]=t[s],l=!0,d=0;d<r.length;d++)(!1&o||a>=o)&&Object.keys(i.O).every((t=>i.O[t](r[d])))?r.splice(d--,1):(l=!1,o<a&&(a=o));if(l){t.splice(s--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var s=t.length;s>0&&t[s-1][2]>o;s--)t[s]=t[s-1];t[s]=[r,n,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},r=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var o=Object.create(null);i.r(o);var a={};e=e||[null,r({}),r([]),r(r)];for(var l=2&n&&t;"object"==typeof l&&!~e.indexOf(l);l=r(l))Object.getOwnPropertyNames(l).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,i.d(o,a),o},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.e=()=>Promise.resolve(),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/dist/",(()=>{var t={217:0};i.O.j=e=>0===t[e];var e=(e,r)=>{var n,o,[a,l,d]=r,c=0;if(a.some((e=>0!==t[e]))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(d)var s=d(i)}for(e&&e(r);c<a.length;c++)o=a[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(s)},r=self.webpackChunkvkweb=self.webpackChunkvkweb||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var a=i.O(void 0,[213,2067,83737,95167],(()=>i(382573)));a=i.O(a)})();