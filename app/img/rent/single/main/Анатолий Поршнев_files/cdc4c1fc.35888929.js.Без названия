"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[13338],{559995:(e,t,i)=>{i.d(t,{Icon12Help:()=>r});var r=(0,i(28178).makeIcon)("Icon12Help","help_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="help_12"><path fill="currentColor" fill-rule="evenodd" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12m.644-5.005c-.08.36-.286.57-.662.57-.45 0-.715-.312-.715-.753v-.075c0-.633.323-1.052.948-1.423.684-.414.89-.682.89-1.176 0-.527-.402-.892-.985-.892-.52 0-.869.258-1.038.736-.133.344-.371.494-.694.494-.419 0-.678-.263-.678-.671 0-.231.053-.435.159-.64C4.208 2.458 5.055 2 6.194 2c1.504 0 2.516.838 2.516 2.09 0 .81-.387 1.364-1.134 1.81-.704.413-.863.644-.932 1.095m.217 2.162a.85.85 0 0 1-.868.843.85.85 0 0 1-.864-.843.85.85 0 0 1 .864-.844.85.85 0 0 1 .868.844" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},333775:(e,t,i)=>{i.d(t,{Icon16Help:()=>r});var r=(0,i(28178).makeIcon)("Icon16Help","help_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="help_16"><path fill="currentColor" fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M7.998 4.927a.98.98 0 0 0-.948.734.864.864 0 1 1-1.673-.43 2.707 2.707 0 0 1 5.328.675c0 1.194-.653 1.817-1.11 2.244-.448.418-.674.633-.742 1.103a.864.864 0 0 1-1.71-.244c.155-1.085.79-1.673 1.21-2.062l.064-.06c.406-.38.56-.562.56-.98a.979.979 0 0 0-.979-.98M9 11.8a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},995240:(e,t,i)=>{i.d(t,{Icon16InfoCircle:()=>r});var r=(0,i(28178).makeIcon)("Icon16InfoCircle","info_circle_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="info_circle_16"><path fill="currentColor" d="M8 0c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8m0 7.059a.847.847 0 0 0-.847.847v3.482a.847.847 0 1 0 1.694 0V7.906A.847.847 0 0 0 8 7.059m0-3.294a.941.941 0 1 0 0 1.882.941.941 0 0 0 0-1.882" /></symbol>',16,16,!1,void 0)},52342:(e,t,i)=>{i.d(t,{Icon20Info:()=>r});var r=(0,i(28178).makeIcon)("Icon20Info","info_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="info_20"><g fill="none" fill-rule="nonzero"><path d="M0 0h20v20H0z" /><path fill="currentColor" d="M10 1c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9m0 8a.9.9 0 0 0-.9.9v3.7a.9.9 0 1 0 1.8 0V9.9A.9.9 0 0 0 10 9m0-3.5a1 1 0 1 0 0 2 1 1 0 0 0 0-2" /></g></symbol>',20,20,!1,void 0)},728405:(e,t,i)=>{i.d(t,{Icon20InfoCircleOutline:()=>r});var r=(0,i(28178).makeIcon)("Icon20InfoCircleOutline","info_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="info_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 9.25a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75" clip-rule="evenodd" /><path fill="currentColor" d="M11 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" /><path fill="currentColor" fill-rule="evenodd" d="M3.99 3.99A8.476 8.476 0 0 1 10 1.5c2.347 0 4.473.952 6.01 2.49A8.476 8.476 0 0 1 18.5 10a8.476 8.476 0 0 1-2.49 6.01A8.476 8.476 0 0 1 10 18.5a8.476 8.476 0 0 1-6.01-2.49A8.476 8.476 0 0 1 1.5 10c0-2.347.952-4.473 2.49-6.01M10 3a6.976 6.976 0 0 0-4.95 2.05A6.976 6.976 0 0 0 3 10a6.98 6.98 0 0 0 2.05 4.95A6.976 6.976 0 0 0 10 17a6.975 6.975 0 0 0 4.95-2.05A6.975 6.975 0 0 0 17 10a6.976 6.976 0 0 0-2.05-4.95A6.976 6.976 0 0 0 10 3" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},673098:(e,t,i)=>{i.d(t,{Icon24Help:()=>r});var r=(0,i(28178).makeIcon)("Icon24Help","help_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="help_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" d="M2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12m8.75 6.25v-.5a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1m3.42-6.08c-.535.543-.921 1.014-1.084 1.836a2.29 2.29 0 0 0-.022.13 1 1 0 0 1-.99.864H12a.958.958 0 0 1-.954-1.039 2.27 2.27 0 0 1 .027-.221 4.05 4.05 0 0 1 1.097-2.07l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2-.699 0-1.317.363-1.675.91a1.59 1.59 0 0 0-.172.39A1 1 0 0 1 9.2 9H9a.854.854 0 0 1-.833-1.043c.06-.266.13-.482.206-.647A4 4 0 0 1 12 5c2.21 0 4 1.79 4 4 0 .88-.36 1.68-.93 2.25z" /></g></symbol>',24,24,!1,void 0)},239532:(e,t,i)=>{i.d(t,{Icon28HelpOutline:()=>r});var r=(0,i(28178).makeIcon)("Icon28HelpOutline","help_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="help_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M3 14C3 7.928 7.928 3 14 3s11 4.928 11 11-4.928 11-11 11S3 20.072 3 14m1.8 0c0 5.078 4.122 9.2 9.2 9.2 5.078 0 9.2-4.122 9.2-9.2 0-5.078-4.122-9.2-9.2-9.2-5.078 0-9.2 4.122-9.2 9.2m8.1 5.65v-.3a.95.95 0 0 1 .95-.95h.3a.95.95 0 0 1 .95.95v.3a.95.95 0 0 1-.95.95h-.3a.95.95 0 0 1-.95-.95m2.97-5.447c-.477.488-.821.912-.966 1.652a2.2 2.2 0 0 0-.029.298.889.889 0 0 1-.887.847h-.01a.891.891 0 0 1-.89-.894c0-.25.008-.413.023-.49.138-.718.487-1.361.977-1.863l1.105-1.134c.316-.318.525-.774.525-1.269 0-.99-.801-1.8-1.781-1.8a1.78 1.78 0 0 0-1.493.82 3.745 3.745 0 0 0-.238.465.891.891 0 0 1-1.1.48l-.034-.012a.85.85 0 0 1-.513-1.128c.064-.155.125-.291.183-.41.612-1.245 1.764-2.015 3.195-2.015 1.968 0 3.563 1.611 3.563 3.6 0 .792-.32 1.512-.828 2.025z" /></g></symbol>',28,28,!1,void 0)},986051:(e,t,i)=>{i.d(t,{Icon28InfoCircle:()=>r});var r=(0,i(28178).makeIcon)("Icon28InfoCircle","info_circle_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="info_circle_28"><path fill-rule="evenodd" d="M14 26c6.627 0 12-5.373 12-12S20.627 2 14 2 2 7.373 2 14s5.373 12 12 12m0-6a1 1 0 0 1-1-1v-6a1 1 0 1 1 2 0v6a1 1 0 0 1-1 1m0-9.8-.123-.006A1.2 1.2 0 0 1 14 7.8l.123.006A1.2 1.2 0 0 1 14 10.2" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},700668:(e,t,i)=>{i.d(t,{Icon28InfoCircleOutline:()=>r});var r=(0,i(28178).makeIcon)("Icon28InfoCircleOutline","info_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="info_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m.074 8c.237 0 .386.037.517.107.13.07.232.172.302.302.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.726.726 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.726.726 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517v-6.148c0-.237.037-.386.107-.517a.726.726 0 0 1 .302-.302c.13-.07.28-.107.517-.107zM14 7.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8" /></symbol>',28,28,!1,void 0)},932146:(e,t,i)=>{i.d(t,{Icon36HelpOutline:()=>r});var r=(0,i(28178).makeIcon)("Icon36HelpOutline","help_outline_36","0 0 36 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 36 36" id="help_outline_36"><path fill="currentColor" d="M18 11.5c-1.18 0-2.064.687-2.29 1.562a1.25 1.25 0 1 1-2.42-.624C13.848 10.268 15.89 9 18 9c2.56 0 4.75 1.872 4.75 4.588 0 1.001-.254 1.805-.668 2.483-.392.643-.907 1.13-1.312 1.51l-.024.022c-.828.776-1.359 1.274-1.509 2.324a1.25 1.25 0 1 1-2.475-.354c.276-1.932 1.387-2.967 2.182-3.707l.117-.109c.415-.389.692-.67.887-.989.174-.284.302-.637.302-1.18 0-1.182-.912-2.088-2.25-2.088M18 27a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5" /><path fill="currentColor" fill-rule="evenodd" d="M18 3C9.716 3 3 9.716 3 18s6.716 15 15 15 15-6.716 15-15S26.284 3 18 3M5.5 18c0 6.904 5.596 12.5 12.5 12.5S30.5 24.904 30.5 18 24.904 5.5 18 5.5 5.5 11.096 5.5 18" clip-rule="evenodd" /></symbol>',36,36,!1,void 0)},52667:(e,t,i)=>{i.d(t,{Icon56InfoOutline:()=>r});var r=(0,i(28178).makeIcon)("Icon56InfoOutline","info_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="info_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path fill="currentColor" fill-rule="nonzero" d="M28 4c13.255 0 24 10.745 24 24S41.255 52 28 52 4 41.255 4 28 14.745 4 28 4m0 3C16.402 7 7 16.402 7 28s9.402 21 21 21 21-9.402 21-21S39.598 7 28 7m0 17.5a1.5 1.5 0 0 1 1.493 1.356L29.5 26v11a1.5 1.5 0 0 1-2.993.144L26.5 37V26a1.5 1.5 0 0 1 1.5-1.5m0-7.5a2 2 0 1 1 0 4 2 2 0 0 1 0-4" /></g></symbol>',56,56,!1,void 0)},537783:(e,t,i)=>{i.d(t,{InitOptionsProvider:()=>a,useInitOptions:()=>c});var r=i(434788),n=i(820224),s=i(667294);const o=(0,s.createContext)({}),a=o.Provider;function c(){const e=(0,s.useContext)(o),{payload:t}=e,i=(0,n._)(e,["payload"]);return(0,r._)({},t,i)}},390420:(e,t,i)=>{i.d(t,{stickers:()=>r});const r=(0,i(798116).createDomain)()},153536:(e,t,i)=>{i.d(t,{buyFx:()=>a});var r=i(11010),n=i(393356),s=i(390420),o=i(494774);const a=s.stickers.createEffect((0,r._)((function*(){const e=window.Stickers.Cart.create([o.RANDOM_PRODUCT_ID]);yield e.load();const t=yield e.order({v:n.API_VERSION,ignoreEmptyError:!0,emptyErrorLoader:!1}).catch((()=>null));return t&&t.random_selector_result&&!t.error?t:null})))},933494:(e,t,i)=>{i.d(t,{showSnackbar:()=>r});const r=(0,i(798116).createEvent)()},494774:(e,t,i)=>{i.d(t,{RANDOM_PRODUCT_ID:()=>r,StickersGroup:()=>s,UGC_STICKERS_APP_ID:()=>n});const r=10101,n=51538586;var s;!function(e){e.LAYER="layer"}(s||(s={}))},276782:(e,t,i)=>{i.d(t,{openProductModal:()=>r});const r=i(390420).stickers.createEvent()},438470:(e,t,i)=>{i.d(t,{openRandomSelectorPacksModal:()=>r});const r=i(390420).stickers.createEvent()},727211:(e,t,i)=>{i.d(t,{openRandomSelectorResultModal:()=>r});const r=i(390420).stickers.createEvent()},390433:(e,t,i)=>{i.d(t,{hideSnackbar:()=>v,showSnackbar:()=>m});var r=i(11010),n=i(785893),s=i(667294),o=i(973935),a=i(800325),c=i(228042),l=i(417873),d=i(773693),u=i(667465),_=i(584356),g=i(786858);const p={top:"notifier_snackbar_align_top",center:"notifier_snackbar_align_center",bottom:"notifier_snackbar_align_bottom"},h={ok:(0,a.getIcon24CheckCircleOutline)().icon,warning:(0,c.getIcon24WarningTriangleOutline)().icon,error:(0,l.getIcon24ErrorCircleOutline)().icon,ok28:(0,d.getIcon28CheckCircleOutline)().icon,loudspeaker28:(0,u.getIcon28LoudspeakerSlashOutline)().icon},f={ok:"notifier_snackbar_type_ok",warning:"notifier_snackbar_type_warning",error:"notifier_snackbar_type_error",ok28:"notifier_snackbar_type_ok",loudspeaker28:"notifier_snackbar_type_loudspeaker"};function m(e){return k.apply(this,arguments)}function k(){return(k=(0,r._)((function*({id:e,type:t,text:i,subtitle:r,action:s,before:o,after:a,link:c,timeout:l,align:d,onClick:u,onClose:m}){var k,v,C;let P;yield Promise.resolve();const I={id:e,link:S(c),timeout:l,onClick:u?()=>((0,g.assertNotNull)(P),u(P)):void 0,onHide:m},L={author_link:S(null==(v=o)||null==(k=v.avatar)?void 0:k.link),add_photo:S(null==(C=a)?void 0:C.url),tooltipHandler:e=>{var i,r,n,c,l,u,_,m,k,v;e.classList.add("notifier_snackbar"),t&&h[t]?(e.classList.add("notifier_snackbar_with_custom_before"),e.classList.add(f[t])):(null==(r=o)||null==(i=r.avatar)?void 0:i.url)||(null==(c=o)||null==(n=c.avatar)?void 0:n.content)?o.avatar.fill&&e.classList.add("notifier_snackbar_with_filled_avatar"):!(null==(u=o)||null==(l=u.avatar)?void 0:l.content)&&(null==(_=o)?void 0:_.content)&&e.classList.add("notifier_snackbar_with_custom_before"),(null==(v=null==(m=a)?void 0:m.rounded)||v)&&e.classList.add("notifier_snackbar_with_rounded_after");const w=d?p[d]:void 0;if(w&&e.classList.add(w),null==(k=s)?void 0:k.onClick){var S;null==(S=e.querySelector(".notifier_snackbar_action"))||S.addEventListener("click",(e=>{var t,i;(0,g.assertNotNull)(P),null==(t=(i=s).onClick)||t.call(i,e,P)}))}}};if(t&&h[t])L.avatar_custom_content=h[t];else if(o){var x,b,A,M;(null==(x=o.avatar)?void 0:x.url)?L.author_photo=S(o.avatar.url):(null==(b=o.avatar)?void 0:b.content)?L.avatar_custom_content=w(o.avatar.content):o.content&&(L.avatar_custom_content=w(o.content)),(null==(A=o.icon)?void 0:A.type)?L.icon_type=o.icon.type:(null==(M=o.icon)?void 0:M.url)&&(L.icon_custom={image_url:y(o.icon.url)})}const R=w((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"notifier_snackbar_text",children:i}),r&&(0,n.jsx)("div",{className:"notifier_snackbar_subtitle",children:r}),s&&(0,n.jsx)("div",{children:(0,n.jsx)("a",{className:"notifier_snackbar_action",href:s.href,children:s.label})})]}));return P=yield(0,_.showDoneBoxAsync)(R,I,L),P}))).apply(this,arguments)}function v(e){var t;null==(t=window.Notifier)||t.hideEvent(e)}function w(e){const t=document.createElement("div");return(0,o.flushSync)((()=>{(0,o.render)((0,s.createElement)(s.Fragment,null,e),t)})),t.innerHTML}function S(e){return e&&y(e)}function y(e){return encodeURI(e).replace(/'/g,"%27")}},898718:(e,t,i)=>{i.d(t,{getCache:()=>l,getPackByStickerId:()=>p,getSticker:()=>u,getStickers:()=>_,updateCache:()=>d});var r=i(434788),n=i(363444),s=i(874162),o=i(899033),a=i(581522),c=i(531730);const l=()=>{if(!window.stickersCache){const e=c.ls.get("stickers_cache");window.stickersCache=(0,r._)({},s.DEFAULT_CACHE,e)}return window.stickersCache},d=e=>{window.stickersCache=(0,r._)({},l(),e)},u=e=>l().stickers.get(e),_=e=>{const{stickers:t}=l();return e.map((e=>t.get(e)))},g=e=>{const t=u(e);if(!t||!t.pack_id)return null;const i=(0,a.getProductFromCache)(t.pack_id);return i&&(0,o.isBasePack)(i)?i:null},p=e=>{const t=g(e);return t?Promise.resolve(t):new Promise((t=>{n.ajax.post("stickers.php",{act:"get_products",sticker_ids:[e]},{onDone(i){(0,a.cacheProductsData)(i),t(g(e))},onFail:e=>(console.error(e),t(null),!0)})}))}},902220:(e,t,i)=>{i.d(t,{Cart:()=>d});var r=i(434788),n=i(820224),s=i(363444),o=i(383320),a=i(874162),c=i(581522),l=i(584356);class d{static create(e,t=[]){const i=e.map((e=>({product_id:e,amount:1})));return new d(i,t)}copy(){const e=new d(this.getItems(),this.getRecipientIds());return e.setOrder(this.getOrder()),e}getItems(){return Array.from(this.items.values())}setItems(e){this.items=new Map(e.map((e=>[e.product_id,e])))}loadItems(){const e=Array.from(this.items.keys());return(0,c.getProducts)(e).then((()=>{for(const e of Array.from(this.items.values()))e.product=(0,c.getProductFromCache)(e.product_id)}))}getProducts(){return(0,c.getProductsFromCache)(Array.from(this.items.keys()))}hasProduct(e){return this.items.has(e)}addProduct(e,t=!1){if(!this.hasProduct(e)){const i={product_id:e,amount:1};t?this.setItems([...this.getItems(),i]):this.setItems([i,...this.getItems()]),this.onChange&&this.onChange()}}removeProduct(e){this.hasProduct(e)&&(this.items.delete(e),this.onChange&&this.onChange())}getRecipientIds(e=!1){return this.recipientIds.size?Array.from(this.recipientIds.values()):this.isGift&&e?[a.SAMPLE_RECIPIENT_ID]:[]}setRecipientIds(e){this.recipientIds=new Set(e)}hasRecipientId(e){return this.recipientIds.has(e)}addRecipientId(e){this.hasRecipientId(e)||(this.recipientIds.add(e),this.onChange&&this.onChange())}removeRecipientId(e){this.hasRecipientId(e)&&(this.recipientIds.delete(e),this.onChange&&this.onChange())}setOrder(e){if(this._order=e,e){this.recipientIds.clear();for(const t of e.items)t.recipient_id!==a.SAMPLE_RECIPIENT_ID&&this.recipientIds.add(t.recipient_id)}}loadOrder(e){const t=e.items.map((e=>e.product_id));return(0,c.getProducts)(t).then((t=>(0,r._)({},e,{items:e.items.map(((e,i)=>(0,r._)({},e,{product:t[i]})))})),(()=>e))}getOrder(){return this._order}getRecipientsMap(){return this.recipients}getRecipients(){return Array.from(this.recipients.values())}getRecipientById(e){return this.recipients.get(e)}addRecipients(e){this.recipients=new Map([...this.getRecipients(),...e].map((e=>[e[0],e])))}getJSON(){return JSON.stringify({items:this.getItems().map((e=>(0,r._)({},e,{product:void 0}))),recipient_ids:this.getRecipientIds(!0)})}isLoaded(){return null!==this.getOrder()}cancelLoad(){this.loadTimeout&&(window.clearTimeout(this.loadTimeout),this.loadTimeout=null),this.loadCancellationToken&&(this.loadCancellationToken.cancel(),this.loadCancellationToken=null)}load(e=!1){return this.cancelLoad(),new Promise((t=>{this.loadTimeout=window.setTimeout((()=>{this.loadCancellationToken=new o.AjaxCancellationToken,s.ajax.post("stickers.php",{act:"preview_products_order",cart:this.getJSON(),with_suggested_recipients:e?1:0},{cancellationToken:this.loadCancellationToken,onDone:e=>{(0,c.cacheProductsData)(e),Promise.all([this.loadItems(),this.loadOrder(e.order)]).then((([,i])=>{this.setOrder(i),e.recipients&&this.addRecipients(e.recipients),t(this)}),(()=>{}))},onFail:e=>(e&&window.__dev&&console.error(e),t(this),!0)})}),300)}))}order(e={}){var{ignoreEmptyError:t,emptyErrorLoader:i}=e,r=(0,n._)(e,["ignoreEmptyError","emptyErrorLoader"]);return new Promise((e=>{var n;s.ajax.post("stickers.php",{act:"order_products",cart:this.getJSON(),hash:r.hash||(null==(n=this.getOrder())?void 0:n.hash),message:r.message,is_private:r.is_private?1:0,ref:r.ref,gift_ref:r.gift_ref,v:r.v},{onDone:t=>{requestAnimationFrame((()=>{(0,l.hideBoxLoader)()})),(0,c.cacheProductsData)(t),t.result.random_selector_result=t.random_selector_result,Promise.all([this.loadOrder(t.order),this.loadOrder(t.result)]).then((([t,i])=>{this.setOrder(t),e(i)}),(()=>{}))},onFail:r=>!r&&t?(i&&requestAnimationFrame((()=>{(0,l.showBoxLoader)()})),!0):(r&&console.error(r),e(null),!0)})}))}constructor(e,t=[]){this.loadTimeout=null,this.loadCancellationToken=null,this.isGift=!1,this.onChange=null,this._order=null,this.setItems(e),this.recipientIds=new Set(t),this.recipients=new Map}}},580284:(e,t,i)=>{i.d(t,{default:()=>S});var r=i(434788),n=i(785893),s=i(667294),o=i(401840),a=i(584356),c=i(221780),l=i(29271),d=i(549309),u=i(562329),_=i(92116),g=i(866781),p=i(899033),h=i(457299),f=i(138255),m=i(445664),k=i(260795),v=i(358740),w=i(659397);const S=({cart:e,options:{ref:t,gift_ref:i},closeBox:S,updateBox:y})=>{var C,P;const[I,L]=(0,f.useCart)(e),x=!I.isLoaded()&&L;(0,s.useEffect)((()=>{y()}),[x]);const b=I.getRecipientIds(),A=I.getOrder(),M=A&&!A.error&&A.items.find((e=>!e.error&&!(0,h.isSampleOrderItem)(e))),[R,E]=function(e){if(!e)return[null,null];let t;for(const i of e.items){const{product:e}=i;if(e&&(0,p.isPackProduct)(e)){t=e;break}}let i=e.items.filter((({product:e})=>{var t;return null==(t=e)?void 0:t.can_gift}));const r=i.filter((e=>!e.error&&!(0,h.isSampleOrderItem)(e)));r.length&&(i=r);const n=new p.ProductsByType(i.map((e=>e.product))),s=n.pack.values().next().value,o=Array.from(n.style);let a="",d="";if(1===o.length)a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_1_style"),"title",o[0].title),s?d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_with_pack"),"title",s.title):t&&(d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_for_pack"),"title",t.title));else if(s){if(a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_pack"),"title",s.title),o.length)switch(o.length){case 2:d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_with_2_styles"),"title1",o[0].title,"title2",o[1].title);break;case 3:d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_with_3_styles"),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title);break;case 4:d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_with_3_styles_and_1_more"),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title);break;default:const e=o.length-3;d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_with_3_styles_and_n_more",e),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title,"n",e)}}else if(o.length){switch(o.length){case 2:a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_2_styles"),"title1",o[0].title,"title2",o[1].title);break;case 3:a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_3_styles"),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title);break;case 4:a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_3_styles_and_1_more"),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title);break;default:const e=o.length-3;a=(0,c.langStr)(l.getLang("purchases_stickers_gift_title_3_styles_and_n_more",e),"title1",o[0].title,"title2",o[1].title,"title3",o[2].title,"n",e)}t&&(d=(0,c.langStr)(l.getLang("purchases_stickers_gift_description_for_pack"),"title",t.title))}o.length?d+=" "+l.getLang("purchases_stickers_gift_description_styles"):d+=" "+l.getLang("purchases_stickers_gift_description");return[a,d]}(A),[,N]=(0,s.useState)(null);(0,s.useLayoutEffect)((()=>{const e=I.getRecipients();if(N(window.WideDropdown.init("StickerProductsGiftRecipientsDropdown",{defaultItems:e,items:e,noResult:l.getLang("gifts_nobody_found"),introText:l.getLang("gifts_start_typing_recipient"),maxItems:20,onChange:(e,t)=>{1===e?I.addRecipientId(+t):I.removeRecipientId(+t)}})),b.length)for(const e of b){const t=I.getRecipientById(e);t&&window.WideDropdown.select("StickerProductsGiftRecipientsDropdown",!1,t)}else window.WideDropdown.focus("StickerProductsGiftRecipientsDropdown");return()=>{window.WideDropdown.deinit("StickerProductsGiftRecipientsDropdown")}}),[x]);const[O,j]=(0,s.useState)(""),[G,T]=(0,s.useState)(!1),[D,B]=(0,s.useState)(!1),H=()=>{D||(B(!0),I.order({message:O,is_private:G,ref:t,gift_ref:i}).then((e=>{B(!1),e&&!e.error&&((0,a.showDoneBox)(function(e,t){const i=new p.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),r=function(e){const t=e.getPack(),i=e.getStyles();if(t)return i.length?(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_pack_and_styles",i.length),"title",t.title,"styles_num",i.length):(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_pack"),"title",t.title);if(i.length)switch(i.length){case 1:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_1_style"),"title",i[0].title);case 2:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_2_styles"),"title1",i[0].title,"title2",i[1].title);case 3:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_3_styles"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);case 4:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_3_styles_and_1_more"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);default:{const e=i.length-3;return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_products_3_styles_and_n_more",e),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title,"n",e)}}return null}(i);if(!r)return null;const n=new Set;for(const i of e.items){const{error:e,recipient_id:r}=i;if(e)continue;const s=t(r);s&&n.add(s)}const s=function(e,t){const i=Array.from(e.values());switch(i.length){case 0:return null;case 1:{const e=1===t?l.getLang("purchases_stickers_gift_result_1_recipient_single","raw"):l.getLang("purchases_stickers_gift_result_1_recipient_multiple","raw");return(0,c.langStr)((0,l.langSex)(i[0][8],e),"name",i[0][8])}case 2:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_2_recipients",t),"name1",i[0][8],"name2",i[1][8]);case 3:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_3_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8]);case 4:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_4_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8]);case 5:return(0,c.langStr)(l.getLang("purchases_stickers_gift_result_5_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8],"name5",i[4][8]);default:{const e=i.length-4,r=1===t?l.getLang("purchases_stickers_gift_result_4_recipients_and_n_more_single"):l.getLang("purchases_stickers_gift_result_4_recipients_and_n_more_multiple");return(0,c.langStr)(r,"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8],"n",e)}}return null}(n,i.getCount());if(!s)return null;return(0,c.langStr)(s,"products",r)}(e,(e=>I.getRecipientById(e)))),S())}),(()=>{})))};return(0,s.useEffect)((()=>{window.WideDropdown.disable("StickerProductsGiftRecipientsDropdown",D)}),[D]),(0,n.jsxs)("article",{className:"StickerProductsGift",children:[(0,n.jsx)(d.ModalHeader,{className:"StickerProductsGift__header",title:l.getLang("purchases_stickers_gift_box_title"),onClose:S}),x?(0,n.jsx)("section",{className:"StickerProductsGift__content StickerProductsGift__content--loading",children:(0,n.jsx)(u.default,{size:24})}):(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("section",{className:"StickerProductsGift__content",children:[(0,n.jsx)(m.default,{order:A,forceValid:!M}),(0,n.jsx)("h1",{className:"StickerProductsGift__productsTitle",children:(0,w.decodeHTMLEntities)(R||"")}),(0,n.jsx)("p",{className:"StickerProductsGift__productsDescription",children:(0,w.decodeHTMLEntities)(E||"")}),A&&(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("dl",{className:"StickerProductsGift__price",children:[(0,n.jsx)("dt",{className:"StickerProductsGift__priceLabel",children:l.getLang("purchases_gift_price_label")})," ",(0,n.jsx)("dd",{className:"StickerProductsGift__priceValue",children:l.getLang("global_n_votes",A.price.current)})]}),(0,n.jsx)("div",{className:"StickerProductsGift__balance",children:(0,c.langStr)(l.getLang("gifts_you_have_X_votes"),"votes",l.getLang("global_n_votes",A.balance))})]}),(0,n.jsxs)("div",{className:"StickerProductsGift__recipients",children:[(0,n.jsx)("label",{className:"StickerProductsGift__recipientsLabel",htmlFor:"StickerProductsGiftRecipientsInput",children:l.getLang("gifts_receiver")}),(0,n.jsxs)("div",{className:"wdd StickerProductsGift__recipientsDropdown",id:"StickerProductsGiftRecipientsDropdown",children:[(0,n.jsx)("div",{className:"fl_r wdd_arr"}),(0,n.jsx)("input",{className:"wdd_text fl_l",id:"StickerProductsGiftRecipientsInput",placeholder:l.getLang("gifts_choose_recipients")})]})]}),(0,n.jsxs)("div",{className:"StickerProductsGift__message",children:[(0,n.jsx)("label",{className:"StickerProductsGift__messageLabel",htmlFor:"StickerProductsGiftMessageInput",children:l.getLang("purchases_gift_your_message")}),(0,n.jsx)(_.Textarea,{className:"StickerProductsGift__messageInput",id:"StickerProductsGiftMessageInput",value:O,onChange:e=>j(e.currentTarget.value),onResize:()=>y(),style:{height:80},disabled:D})]}),(0,n.jsx)(g.default,{className:"StickerProductsGift__isPrivate",checked:G,disabled:D,onChange:()=>T(!G),children:l.getLang("gifts_receiver_only")})]}),(0,n.jsxs)("footer",{className:"StickerProductsGift__footer",children:[(0,n.jsx)("div",{className:"StickerProductsGift__footerNote",children:!L&&A&&(0,n.jsxs)("div",{className:"StickerProductsGift__details",children:[l.getLang("purchases_stickers_gift_details_label"),(0,n.jsx)(o.HintIcon,{gap:"l",tooltip:(0,r._)({placement:"top"},(0,k.stickerProductsGiftDetails)({order:A,recipients:I.getRecipientsMap()}))})]})}),(0,n.jsx)("div",{className:"StickerProductsGift__footerButtons",children:(0,n.jsx)(v.default,{className:"StickerProductsGift__gift",mode:M?"primary":"secondary",size:"m",loading:L||D,disabled:!M,price:null==(C=A)?void 0:C.price,text:M?(0,c.langStr)(l.getLang("purchases_stickers_gift_send_for"),"price",l.getLang("global_n_votes",null==(P=A)?void 0:P.price.current)):l.getLang("purchases_stickers_gift_send"),onClick:()=>H()})})]})]})]})}},260795:(e,t,i)=>{i.d(t,{stickerProductsGiftDetails:()=>u});var r=i(785893),n=i(667294),s=i(659397),o=i(331533),a=i(221780),c=i(29271),l=i(457299),d=i(899033);const u=({order:e,recipients:t})=>{const i=function(e){if(!e)return null;let t=e.items.filter((({product:e})=>{var t;return null==(t=e)?void 0:t.can_gift}));const i=t.filter((e=>!e.error&&!(0,l.isSampleOrderItem)(e)));i.length&&(t=i);const r=[],n=[];for(const e of t){const{product:t}=e;t&&((0,d.isPackProduct)(t)?r.push(e):(0,d.isStyleProduct)(t)&&n.push(e))}const s=n.reduce(((e,t)=>{var i;return e+((null==(i=t.price)?void 0:i.current)||0)}),0);if(r.length){const e=r.reduce(((e,t)=>{var i;return e+((null==(i=t.price)?void 0:i.current)||0)}),0);return n.length?(0,a.langStr)(c.getLang("purchases_stickers_gift_details_summary_pack_with_styles",n.length),"pack_price_sum",c.getLang("global_n_votes",e),"styles_num",n.length,"styles_price_sum",c.getLang("global_n_votes",s)):(0,a.langStr)(c.getLang("purchases_stickers_gift_details_summary_pack"),"pack_price_sum",c.getLang("global_n_votes",e))}if(n.length)return(0,a.langStr)(c.getLang("purchases_stickers_gift_details_summary_styles",n.length),"styles_num",n.length,"styles_price_sum",c.getLang("global_n_votes",s));return null}(e)||"",u=new Map;for(const i of e.items){const{error:e,product:r,recipient_id:n}=i;if(e)continue;const s=t.get(n);if(!s)continue;let o=u.get(s);o||(o=new d.ProductsByType,u.set(s,o)),o.add(r)}const g=Array.from(u.entries()),p=g.length,h={maxWidth:291,text:g.map((([e,t])=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(o.InnerHTML,{Component:"span",children:e[1]}),": ",(0,s.decodeHTMLEntities)(_(t)||"")," "]},e[0])))};return h[i&&p?"header":"text"]=(0,r.jsx)(o.InnerHTML,{children:i}),h};function _(e){const t=e.getPack(),i=e.getStyles();let r="";return i.length&&(r=i.map((e=>(0,a.langStr)(c.getLang("purchases_stickers_gift_details_recipient_style_title"),"title",e.title))).join(", ")),t?r?(0,a.langStr)(c.getLang("purchases_stickers_gift_details_recipient_pack_and_styles"),"pack_title",t.title,"style_titles",r):(0,a.langStr)(c.getLang("purchases_stickers_gift_details_recipient_pack"),"title",t.title):r?(0,a.langStr)(c.getLang("purchases_stickers_gift_details_recipient_styles"),"style_titles",r):null}},445664:(e,t,i)=>{i.d(t,{default:()=>c});var r=i(785893),n=i(659397),s=i(899033),o=i(457299);const a={s:56,m:96,l:168},c=({order:e,forceValid:t=!1})=>{var i;const c=new Map,l=new Map;if(e)for(const t of e.items){const{product:e}=t;var d;if(e)if((0,s.isPackProduct)(e))if(c.has(e))null==(d=c.get(e))||d.push(t);else c.set(e,[t]);else if((0,s.isStyleProduct)(e)){var u;if(l.has(e))null==(u=l.get(e))||u.push(t);else l.set(e,[t])}}const _=c.keys().next().value,g=(_?1:0)+l.size,p=g>1?g>2?"s":"m":"l",h=a[p],f=Array.from(l.entries());t||f.sort((([,e],[,t])=>t.filter((e=>!e.error)).length-e.filter((e=>!e.error)).length));const m=f.slice(0,3);let k=f.slice(3),v=!0;if(!t){const e=k.filter((([,e])=>e.find((e=>!e.error))));e.length?k=e:v=!1}return(0,r.jsxs)("ul",{className:"StickerProductsGiftIcons",children:[_&&(0,r.jsx)("li",{className:(0,n.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${p}`,"StickerProductsGiftIcons__icon--pack",{"StickerProductsGiftIcons__icon--invalid":!t&&!(null==(i=c.get(_))?void 0:i.find((e=>!e.error)))}),style:{backgroundImage:`url(${(0,o.getStickerPackIconUrl)(_,h,h)})`}},_.id),m.map((([e,i])=>(0,r.jsx)("li",{className:(0,n.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${p}`,"StickerProductsGiftIcons__icon--style",{"StickerProductsGiftIcons__icon--invalid":!t&&!i.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,o.getStickerPackIconUrl)(e,h,h)})`}},e.id))),k.length?(0,r.jsxs)("li",{className:(0,n.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${p}`,"StickerProductsGiftIcons__icon--more",{"StickerProductsGiftIcons__icon--invalid":!v}),children:["+",k.length]},"more"):null]})}},358740:(e,t,i)=>{i.d(t,{default:()=>d});var r=i(434788),n=i(820224),s=i(785893),o=i(667294),a=i(832550),c=i(659397),l=i(29271);const d=e=>{var t,i,{className:d,price:u,text:_,placeholder:g}=e,p=(0,n._)(e,["className","price","text","placeholder"]);let h=(0,o.useMemo)((()=>{if(u){let e;u.current!==u.regular&&u.regular&&(e=(0,s.jsx)("span",{className:"StickersPriceButton__regular",children:u.current?u.regular:(0,l.langStr)(l.getLang("purchases_stickers_n_for_m"),"%n","","%m",l.getLang("global_n_votes",u.regular))},"regular"));const t=(0,s.jsx)("span",{className:"StickersPriceButton__current",children:u.current?l.getLang("global_n_votes",u.current):l.getLang("purchases_for_free_btn").toLowerCase()},"current");return _?_.split(/(\{regular_price\}|\{price\})/).map(((i,r)=>"{regular_price}"===i?e:"{price}"===i?t:i?(0,s.jsx)("span",{className:"StickersPriceButton__label",children:i},`label${r}`):void 0)):[e,t]}return[g]}),[_,g,null==(t=u)?void 0:t.regular,null==(i=u)?void 0:i.current]);return(0,s.jsx)(a.Button,(0,r._)({className:(0,c.classNames)("StickersPriceButton",d)},p,{children:h}))}},138255:(e,t,i)=>{i.d(t,{useCart:()=>n});var r=i(667294);const n=e=>{const[t,i]=(0,r.useState)(e),[n,s]=(0,r.useState)(null),o=(0,r.useCallback)((()=>{const e=t.load();s(e),e.then((t=>{i(t),s((t=>t===e?null:t))}),(()=>{}))}),[t]);return(0,r.useEffect)((()=>(t.onChange=o,t.isLoaded()||o(),()=>{t.onChange=null,t.cancelLoad()})),[t]),[t,null!==n]}},581522:(e,t,i)=>{i.d(t,{activateProduct:()=>g,cacheProductsData:()=>o,getProduct:()=>_,getProductFromCache:()=>a,getProducts:()=>u,getProductsFromCache:()=>c,updateUserProductState:()=>p});var r=i(434788),n=i(363444),s=i(898718);const o=(e,t=[])=>{const i=(0,s.getCache)();if(e.stickers){const{stickers:t}=i;for(const i of e.stickers)t.has(i.id)?t.set(i.id,(0,r._)({},t.get(i.id),i)):t.set(i.id,i)}if(e.products)for(const t of e.products)i.products.set(t.id,t),i.productPromises.delete(t.id);for(const e of t)i.products.has(e)||i.products.set(e,null),i.productPromises.delete(e);e.emoji&&window.Emoji&&window.Emoji.updateTabs(e.emoji.stickers,e.emoji.keywords,!0),(0,s.updateCache)(i)},a=e=>(0,s.getCache)().products.get(e),c=e=>{const t=(0,s.getCache)().products;return e.map((e=>t.get(e)))};function l(){let{productsPromise:e}=(0,s.getCache)();return e||(e=new Promise((e=>setTimeout((()=>{const t=(0,s.getCache)().productIdsQueue,i=Array.from(t);t.clear(),(0,s.updateCache)({productIdsQueue:t,productsPromise:void 0}),n.ajax.post("stickers.php",{act:"get_products",product_ids:i},{onDone(t){o(t,i),e([])},onFail:t=>(console.error(t),o({},i),e([]),!0)})}),300))),(0,s.updateCache)({productsPromise:e})),e}const d=e=>{if(!e.length)return Promise.resolve([]);const{productPromises:t,productIdsQueue:i}=(0,s.getCache)(),r=new Set;for(const n of e)if(t.has(n)){const e=t.get(n);e&&r.add(e)}else{i.add(n);const e=l();t.set(n,e),r.add(e)}return(0,s.updateCache)({productIdsQueue:i,productPromises:t}),Promise.all(r).then((()=>c(e)))},u=(e,t=!0)=>{const i=t?e.filter((e=>void 0===a(e))):e;return i.length?d(i).then((()=>c(e))):Promise.resolve(c(e))},_=(e,t=!0)=>{if(t){const t=a(e);if(void 0!==t)return Promise.resolve(t)}return d([e]).then((()=>a(e)))},g=e=>new Promise((t=>{n.ajax.post("stickers.php",{act:"activate_product",product_id:e.id,hash:e.csrf_hash},{onDone(e){o(e),t()},onFail:e=>(console.error(e),t(),!0)})})),p=(e,t,i,r=!0)=>new Promise((s=>{n.ajax.post("stickers.php",{act:"update_user_product_state",product_ids:[e],key:t,value:i},{onDone(e){r&&o(e),s()},onFail:e=>(console.error(e),s(),!0)})}))},753884:(e,t,i)=>{i.d(t,{giftStickerProducts:()=>g,giftStickersCart:()=>_});var r=i(434788),n=i(785893),s=i(973935),o=i(869048),a=i(514986),c=i(902220),l=i(991243),d=i(898718),u=i(580284);function _(e,t){const{productsGiftLock:i}=(0,d.getCache)();if(i)return null;let c;(0,d.updateCache)({productsGiftLock:!0});const _=(0,r._)({},t);function g(){var e;return null==(e=c)?void 0:e.bodyNode.querySelector(".StickersProductsGift")}function p(){var e;null==(e=c)||e.hide()}function h(){var e;null==(e=c)||e.updateBoxCoords()}return(0,l.showLoader)(),e.isGift=!0,Promise.all([e.load(!0),window.stManager.add(["stickers.css",window.jsc("web/wide_dd.js"),"wide_dd.css"])]).then((([e])=>{(0,l.hideLoader)(),c=new a.MessageBox({hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:450,onShow(){!function(e){const t=g();t&&s.render((0,n.jsx)(o.AppRootProvider,{children:(0,n.jsx)(u.default,{cart:e,options:_,closeBox:p,updateBox:h})}),t)}(e),requestAnimationFrame((()=>{h()}))},onHideAttempt:()=>(function(){const e=g();e&&s.unmountComponentAtNode(e)}(),!0),onHide(){(0,d.updateCache)({productsGiftLock:!1})}}),c.content('<div class="StickersProductsGift"></div>'),c.show()}),(()=>{})),{hide:p}}function g(e,t=[],i){return _(c.Cart.create(e,t),i)}},719876:(e,t,i)=>{i.d(t,{ViewId:()=>r,views:()=>d});var r,n=i(667294);i(849246);!function(e){e.LAYER="layer",e.LAYER_PURCHASE_DETAILS="layer_purchase_details",e.RANDOM_SELECTOR="random_selector",e.RANDOM_SELECTOR_PACKS="RANDOM_SELECTOR_packs",e.RANDOM_SELECTOR_RESULT="RANDOM_SELECTOR_result"}(r||(r={}));const s=(0,n.lazy)((()=>Promise.all([i.e(2067),i.e(84400),i.e(36834),i.e(868),i.e(58086),i.e(7103)]).then(i.bind(i,470325)).then((({Layer:e})=>({default:e}))))),o=(0,n.lazy)((()=>i.e(37211).then(i.bind(i,481558)).then((({PurchaseDetails:e})=>({default:e}))))),a=(0,n.lazy)((()=>Promise.all([i.e(2067),i.e(84400),i.e(36834),i.e(868),i.e(39457)]).then(i.bind(i,175915)).then((({Main:e})=>({default:e}))))),c=(0,n.lazy)((()=>Promise.all([i.e(84400),i.e(36834),i.e(58086),i.e(78177)]).then(i.bind(i,577903)).then((({Packs:e})=>({default:e}))))),l=(0,n.lazy)((()=>Promise.all([i.e(36834),i.e(34757)]).then(i.bind(i,899725)).then((({Result:e})=>({default:e}))))),d=new Map([["layer",{Component:s,width:640}],["layer_purchase_details",{Component:o}],["random_selector",{Component:a}],["RANDOM_SELECTOR_packs",{Component:c}],["RANDOM_SELECTOR_result",{Component:l}]])},849246:(e,t,i)=>{i(606448)},606448:(e,t,i)=>{var r=i(798116),n=i(933494),s=i(390433);const o=(0,r.createEffect)((({title:e,subtitle:t})=>{(0,s.showSnackbar)({text:e,subtitle:t})}));(0,r.sample)({clock:n.showSnackbar,target:o})},30173:(e,t,i)=>{i.d(t,{openView:()=>l});var r=i(11010),n=i(434788),s=i(785893),o=i(719876),a=i(537783),c=i(359639);function l(e){return d.apply(this,arguments)}function d(){return(d=(0,r._)((function*(e){const{view:t}=e,{width:i,Component:r}=o.views.get(t)||{};if(r)return(0,c.showMessageBoxModalSuspense)((({onClose:t,refreshCoordinates:i})=>(0,s.jsx)(a.InitOptionsProvider,{value:(0,n._)({payload:{}},e,{init:i,destroy:t}),children:(0,s.jsx)(r,{})})),{width:i})}))).apply(this,arguments)}},256013:(e,t,i)=>{i.d(t,{openLayerPurchaseDetails:()=>s});var r=i(719876),n=i(30173);function s(e){return(0,n.openView)({payload:e,view:r.ViewId.LAYER_PURCHASE_DETAILS})}},385036:(e,t,i)=>{i.d(t,{openStickersLayerView:()=>u});var r=i(11010),n=i(434788),s=i(798116),o=i(719876),a=i(30173),c=i(256013),l=i(390420),d=i(276782);function u(e){return _.apply(this,arguments)}function _(){return(_=(0,r._)((function*(e){return(0,a.openView)({payload:(0,n._)({},e,{onPurchaseDetailsOpen:e=>(0,c.openLayerPurchaseDetails)({details:e})}),view:o.ViewId.LAYER})}))).apply(this,arguments)}const g=l.stickers.createEffect(u);(0,s.sample)({clock:d.openProductModal,target:g})},374884:(e,t,i)=>{i.d(t,{openStickersRandomSelectorView:()=>u});var r=i(798116),n=i(30173),s=i(719876),o=i(390420),a=i(153536),c=i(438470),l=i(727211),d=i(584356);function u(e){return(0,n.openView)({view:s.ViewId.RANDOM_SELECTOR,payload:e})}const _=o.stickers.createEffect((()=>{(0,d.hideBoxLoader)(),(0,d.curBox)()||u({preventReload:!0})})),g=o.stickers.createEffect((()=>{(0,n.openView)({view:s.ViewId.RANDOM_SELECTOR_PACKS})}));(0,r.sample)({clock:c.openRandomSelectorPacksModal,target:g});const p=o.stickers.createEffect((()=>{(0,n.openView)({view:s.ViewId.RANDOM_SELECTOR_RESULT})}));(0,r.sample)({clock:l.openRandomSelectorResultModal,target:p}),(0,r.sample)({clock:a.buyFx.finally,target:_})},800325:(e,t,i)=>{function r(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M14.96 9.26a.9.9 0 0 1 1.28 1.28l-4.6 4.6a.9.9 0 0 1-1.28 0l-2.6-2.6a.9.9 0 0 1 1.28-1.28L11 13.23l3.96-3.97Z"/><path fill-rule="evenodd" d="M12 2.1a9.9 9.9 0 1 1 0 19.8 9.9 9.9 0 0 1 0-19.8Zm0 1.8A8.1 8.1 0 0 0 3.9 12a8.1 8.1 0 0 0 8.1 8.1 8.1 8.1 0 0 0 8.1-8.1A8.1 8.1 0 0 0 12 3.9Z" clip-rule="evenodd"/></svg>',name:"check_circle_outline_24"}}i.d(t,{getIcon24CheckCircleOutline:()=>r})},417873:(e,t,i)=>{function r(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M4.93 4.93A9.97 9.97 0 0 1 12 2a9.97 9.97 0 0 1 7.07 2.93A9.97 9.97 0 0 1 22 12a9.97 9.97 0 0 1-2.93 7.07A9.97 9.97 0 0 1 12 22a9.97 9.97 0 0 1-7.07-2.93A9.97 9.97 0 0 1 2 12a9.97 9.97 0 0 1 2.93-7.07ZM12 3.8a8.17 8.17 0 0 0-5.8 2.4A8.17 8.17 0 0 0 3.8 12a8.17 8.17 0 0 0 2.4 5.8 8.17 8.17 0 0 0 5.8 2.4 8.17 8.17 0 0 0 5.8-2.4 8.17 8.17 0 0 0 2.4-5.8 8.17 8.17 0 0 0-2.4-5.8A8.17 8.17 0 0 0 12 3.8ZM13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1-9a.9.9 0 0 1 .9.9v5.2a.9.9 0 0 1-1.8 0V7.9A.9.9 0 0 1 12 7Z" clip-rule="evenodd"/></svg>',name:"error_circle_outline_24"}}i.d(t,{getIcon24ErrorCircleOutline:()=>r})},228042:(e,t,i)=>{function r(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="M9.49 4.55a2.9 2.9 0 0 1 5.02 0l6.93 12a2.9 2.9 0 0 1-2.51 4.35H5.07a2.9 2.9 0 0 1-2.51-4.35zm3.46.9a1.1 1.1 0 0 0-1.9 0l-6.93 12c-.42.73.1 1.65.95 1.65h13.86c.85 0 1.37-.92.95-1.65z" fill-rule="evenodd"/><path clip-rule="evenodd" d="M12 8c.5 0 .9.37.9.84v4.82c0 .47-.4.84-.9.84s-.9-.37-.9-.84V8.84c0-.47.4-.84.9-.84z" fill-rule="evenodd"/><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></g></svg>',name:"warning_triangle_outline_24"}}i.d(t,{getIcon24WarningTriangleOutline:()=>r})},773693:(e,t,i)=>{function r(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="check_circle_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="check_circle_outline_28__check_circle_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm4.29 6.29a1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42l-7 7a1 1 0 0 1-1.42 0l-3.5-3.5a1 1 0 0 1 1.42-1.42L12 16.6Z" id="check_circle_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"check_circle_outline_28"}}i.d(t,{getIcon28CheckCircleOutline:()=>r})},667465:(e,t,i)=>{function r(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M21.46 7.16a1 1 0 0 1 1.38.3A1 1 0 0 1 23 8v12.35a1 1 0 1 0 2 0V8a3 3 0 0 0-4.61-2.53L16.42 8h-3.77a1 1 0 1 0 0 2H15v2.34a1 1 0 1 0 2 0V10z"/><path clip-rule="evenodd" d="M16.75 17.34a1.01 1.01 0 0 0-.09-.1L4.71 5.3A1 1 0 0 0 3.3 6.7L5.48 8.9c-.18.12-.34.25-.5.37a5.52 5.52 0 0 0-.37 8.12 5.49 5.49 0 0 0 2.98 1.53l.45 2.6a3 3 0 1 0 5.91-1.04L13.7 19h1.9l6.7 6.71a1 1 0 0 0 1.42-1.41zm-9.82-7a7.37 7.37 0 0 0-.9.68 3.49 3.49 0 0 0 0 4.95c.63.64 1.5 1.03 2.47 1.03h5.08zM10 21.17 9.63 19h2.03l.32 1.82a1 1 0 0 1-.8 1.16 1 1 0 0 1-1.17-.8z" fill-rule="evenodd"/></g></svg>',name:"loudspeaker_slash_outline_28"}}i.d(t,{getIcon28LoudspeakerSlashOutline:()=>r})},798418:(e,t,i)=>{i.d(t,{StickersAnimation:()=>r});let r=function(){let e,t,i,n=!1,s=!1,o={},a={},c={},l={};const d={};function u(e){let t=attr(e,"data-uid");return t||(t=attr(e,"data-uid",Math.random().toString(32).substr(2))),t}function _(e,t){d[u(e)]=t}function g(e){let t=attr(e,"data-uniq-id");if(!geByClass1("svg_sticker_animation",e))return!1;let i=c[t];return i||!1}function p(e){if(d[u(e)])return;_(e,!0);let t=g(e),n=attr(e,"data-uniq-id");const s=attr(e,"data-uid");if(hasClass(e,"animation_play"))return;let l=attr(e,"data-animation-path"),p=attr(e,"data-sticker-id"),h=!1;const m=a[p];if(p&&(h=(m||l)&&f(e)),h){const d=attr(e,"data-animation-class")||"";let u={containers:[e],loop:!0,autoplay:!0,name:s,group:"sticker",lazyLoading:!1,className:`svg_sticker_animation ${d}`};m?u.animationData=m:u.animationUrl=l;let _=geByClass1("svg_sticker_animation",e);_&&re(_),t=i.loadAnimation(u),o[p]||t.then((t=>{const i=t.animationData;a[p]=i,c[n]=t,t.addEventListener("firstFrame",(()=>{hide(geByClass1("sticker_img",e)),addClass(e,"animation_play")}),{once:!0}),t.addEventListener("destroy",(()=>{r.stopAnimation(e)}))})).catch((()=>null))}}function h(){return t().then((e=>(i=e,i)))}return{init(e){t=e.animatorLoader},checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){let t=ge("fc_msg"+e),i=geByClass1("sticker_animation",t);r.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(e){if(StickersSettings.getAutoplay()){let t=$(`.msg_id_${e} .sticker_animation`);r.loadAndPlaySticker(t)}},loadStickerInMvkIMAndPlay:function(e,t){let i="_msg"+e;t&&(i="msg_id_"+e);let n=geByClass1("sticker_animation",geByClass1(i));r.loadAndPlayStickerWithTimer(n,500)},loadAutoplayAnimationStickers:function(e){if(!i)return void h().then((()=>{r.loadAutoplayAnimationStickers(e)}));if(e){if(s)return;s=!0}if(n)return;n=!0;let t=geByClass("sticker_animation_autoplay");t&&each(t,(function(e,t){p(t)})),n=!1},loadAndPlaySticker:function(e){e&&(i?requestAnimationFrame((()=>{p(e)})):h().then((()=>{r.loadAndPlaySticker(e)})))},loadAndPlayStickerWithTimer:function(e,t){if(!e)return;if(l[e])return;t||(t=1e3);let i=ge(e);hasClass(i,"sticker_animation_disabled_timer")||(l[e]=setTimeout((function(){!i&&(i=ge(e),hasClass(i,"sticker_animation_disabled_timer"))||(r.loadAndPlaySticker(i),clearTimeout(l[e]),l[e]=!1)}),t))},reloadStickers:function(){c={}},touchStartSticker:function(t){t.addEventListener("contextmenu",r.preventContextMenu,!1),e=setTimeout((function(){r.loadAndPlaySticker(t)}),500)},touchEndSticker:function(){e&&clearTimeout(e)},preventContextMenu:function(e){e.preventDefault(),e.stopPropagation()},stopAnimation(e){const t=g(e);t&&t.pause();const i=attr(e,"data-uniq-id");removeClass(e,"animation_play"),show(geByClass1("sticker_img",e)),_(e,!1),delete c[i]}};function f(e){let t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;return t<window.innerHeight&&i>=0&&isVisible(e)}}()},814323:(e,t,i)=>{i.d(t,{StickersAnimation:()=>n.StickersAnimation});var r=i(659397),n=i(798418);n.StickersAnimation.init({animatorLoader:()=>(0,r.asyncImportLoader)((()=>Promise.all([i.e(868),i.e(97066)]).then(i.bind(i,749511)).then((({LottieManager:e})=>e))))})}}]);try{stManager.done("dist/web/chunks/cdc4c1fc.35888929.js")}catch(e){}