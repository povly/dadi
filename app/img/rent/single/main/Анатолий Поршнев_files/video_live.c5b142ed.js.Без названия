(()=>{"use strict";var e,t,o,i,n,r,a={449342:(e,t,o)=>{var i,n,r,a=o(813565),s=o(283452);(null==(n=window.vk)||null==(i=n.pe)?void 0:i.static_manager_dynamic_imports)&&(null==(r=window.vk)?void 0:r.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.VideoLive=a.VideoLive,(0,s.tq)().setStartupHandler("VideoView/live_info_button",(e=>{const{video_id:t,owner_id:o}=e.payload.data;window.VideoLive.initLiveInfoButton({videoId:parseInt(t,10),ownerId:parseInt(o,10)})}));try{window.stManager.done(window.jsc("web/video_live.js"))}catch(e){}},741311:(e,t,o)=>{o.d(t,{LiveInfoButton:()=>u});var i=o(785893),n=o(832550),r=o(898672),a=o(667294),s=o(791850),l=o(504190),d=o(118992),c=o(404282),v=o(29271);const u=({ownerId:e,videoId:t,disabled:o=!1})=>{var u,f,h,w;const _=(0,l.useStore)(s.sharedLiveStatsInfoService.$liveStatsInfo),p=(0,l.useStore)(s.sharedLiveStatsInfoService.$isDisabled)||o;let g="color_text_positive",m="color_text_positive";if(null!==_){g=(0,c.getUnitLabelInfo)(_.bitrate||0,_.bitrate_thresholds).color;m=(0,c.getUnitLabelInfo)(_.fps||0,_.fps_thresholds).color}let b=Boolean((null==(u=_)?void 0:u.fps)||(null==(f=_)?void 0:f.bitrate));(0,a.useEffect)((()=>{if(p)return;const o=()=>{s.sharedLiveStatsInfoService.getLiveStats({owner_id:e,video_id:t,need_history:1})};o();const i=window.setInterval(o,30*d.SECOND);return()=>{window.clearInterval(i),s.sharedLiveStatsInfoService.resetStore()}}),[p]);return(0,i.jsx)(n.Button,{mode:"outline",appearance:"neutral",disabled:p||!b,size:"s",onClick:()=>{_&&window.Videoview.showLiveInfo()},loading:null===_,before:(0,i.jsxs)(i.Fragment,{children:[(null==(h=_)?void 0:h.bitrate)?(0,c.getBitrateLabel)(_.bitrate,g):null,(null==(w=_)?void 0:w.fps)?(0,c.getFpsLabel)(_.fps,m):null]}),children:(0,i.jsx)("span",{className:(0,r.getColorClass)("color_text_secondary"),children:v.getLang("video_live_info_more_button")})})}},791850:(e,t,o)=>{o.d(t,{sharedLiveStatsInfoService:()=>l});var i=o(798116),n=o(599809),r=o(367431);const a=(0,i.createDomain)("LiveInfo"),s=(0,r.makeSharedState)("live-stats-info",(()=>(({domain:e})=>{const t=e.createStore(null,{name:"liveStatsInfo"}),o=e.createEvent("resetStore");e.onCreateStore((e=>{e.reset([o])}));const r=e.createEvent("setIsDisabled"),a=(0,i.restore)(r,!1),s=e.createEvent("getLiveStats"),l=e.createEffect((e=>(0,n.api)("video.getLiveStats",e)));return(0,i.sample)({clock:s,target:l}),(0,i.sample)({clock:l.doneData,target:t}),{$liveStatsInfo:t,getLiveStats:s,resetStore:o,setIsDisabled:r,$isDisabled:a}})({domain:a})),{version:0}),l=s()},410497:(e,t,o)=>{var i;o.d(t,{ThresholdItemName:()=>i}),function(e){e.TOO_LOW="too_low",e.LOW="low",e.GOOD="good",e.TOO_MUCH="too_much"}(i||(i={}))},404282:(e,t,o)=>{o.d(t,{getBitrateLabel:()=>d,getDataset:()=>v,getFpsLabel:()=>c,getUnitLabelInfo:()=>l,showWarningBanner:()=>s});var i=o(785893),n=o(410497),r=o(898672),a=o(29271);const s=e=>[n.ThresholdItemName.TOO_LOW,n.ThresholdItemName.TOO_MUCH].includes(e),l=(e,t)=>{const o=((e,t)=>{let o=n.ThresholdItemName.GOOD;return t.forEach((({name:t,min:i,max:n})=>{(void 0!==i&&void 0!==n&&i<=e&&e<=n||void 0===i&&void 0!==n&&e<=n||void 0===n&&void 0!==i&&e>=i)&&(o=t)})),o})(e,t);switch(o){case"too_low":return{text:a.getLang("video_live_info_status_label_too_low"),color:"color_text_negative",name:o};case"low":return{text:a.getLang("video_live_info_status_label_low"),color:"color_accent_orange",name:o};case"too_much":return{text:a.getLang("video_live_info_status_label_too_much"),color:"color_accent_orange",name:o};default:return{text:a.getLang("video_live_info_status_label_good"),color:"color_text_positive",name:o}}},d=(e,t)=>(0,i.jsxs)(i.Fragment,{children:[a.getLang("video_live_info_modal_bitrate_title")," ",(0,i.jsx)("span",{className:(0,r.getColorClass)(t),children:(0,a.langNumeric)(e,a.getLang("video_bitrate_units","raw"))})," "]}),c=(e,t)=>(0,i.jsxs)(i.Fragment,{children:[a.getLang("video_live_info_modal_fps_title")," ",(0,i.jsx)("span",{className:(0,r.getColorClass)(t),children:(0,a.langNumeric)(e,a.getLang("video_fps_units","raw"))})]}),v=(e,t,o)=>({id:e,label:"",hidden:!1,borderWidth:2,data:o,borderColor:t,backgroundColor:t,pointBorderWidth:0,pointHitRadius:10,pointHoverRadius:3,pointRadius:1})},813565:(e,t,o)=>{o.d(t,{VideoLive:()=>g});var i=o(725296),n=o(795558),r=o(490093),a=o(514986),s=o(953908),l=o(584356),d=o(29271),c=o(82161),v=o(636274),u=o(409753),f=o(854099),h=o(243859),w=o(741311),_=o(293579);let p;const g={loadMoreLiveSpectators(e){var t;if((0,i.isButtonLocked)(e))return;const{mvcur:o}=window,r=o.liveSpectatorsPerPage,a=o.liveSpectatorsShown,s=o.liveSpectatorsList.slice(a,a+r);if(!s.length)return;const l=null==(t=window.Videoview)?void 0:t.getMvData();l&&window.ajax.post("al_video.php?act=live_spectators_box",{owner_id:l.oid,video_id:l.vid,more:s.join(","),hash:l.hash},{onDone:function(t){const i=document.getElementById("video_spectators_rows");if(i&&(i.insertAdjacentHTML("beforeend",t),o.liveSpectatorsShown=a+r,o.liveSpectatorsShown>=o.liveSpectatorsList.length&&(0,n.hide)(e),o.liveSpectatorsShown>=o.liveSpectatorsLimit)){(0,n.hide)(e);const t=document.getElementById("video_spectators_bottom");t&&(i.appendChild(t),(0,n.show)(t))}},showProgress:()=>(0,i.lockButton)(e),hideProgress:()=>(0,i.unlockButton)(e)})},checkOtherLives(e){const{mvcur:t}=window;t.mvShown&&!t.minimized&&t.videoRaw==e&&(window.ajax.post("al_video.php?act=live_other_videos",{video:e},{onDone:function(t){g.updateOtherLives(e,t)},onFail:function(){return!0}}),setTimeout(g.checkOtherLives.bind(e),6e4))},updateOtherLives(e,t){const{mvcur:o}=window;if(!o.mvShown||o.videoRaw!=e)return;const i=(0,n.domByClass)(window.mvLayer,"mv_info_narrow_column");var r;((0,n.val)(i,t),o.mvData.is_active_live)||(null==(r=window.Videoview)||r.adaptRecomsHeight())},finishLivePreparation(e){var t;const o=null==(t=window.Videoview)?void 0:t.getMvData();window.ajax.post("al_video.php?act=live_finish_preparation",{oid:o.oid,vid:o.vid,notify_followers:(0,i.isChecked)("mv_live_preparation_notify_followers"),hash:e},{onDone:()=>setTimeout((()=>{var e;return null==(e=window.Videoview)?void 0:e.reload()}),500)})},showLiveSpectatorsBox(){var e;if(!window.vk.id)return void(0,r.showQuickLoginBox)();const t=null==(e=window.Videoview)?void 0:e.getMvData();t&&(0,a.showBox)("al_video.php?act=live_spectators_box",{owner_id:t.oid,video_id:t.vid,hash:t.hash},{params:{grey:!0,hideButtons:!0,width:638,bodyStyle:"padding: 0; border: 0;",onShow:function(){(0,s.addEvent)(window.boxLayerWrap,"scroll",g.onLiveSpectatorsScroll),setTimeout(g.onLiveSpectatorsScroll,0)},onHide:function(){(0,s.removeEvent)(window.boxLayerWrap,"scroll",g.onLiveSpectatorsScroll)}},onFail:function(e){var t;return null==(t=(0,l.curBox)())||t.hide(),(0,a.showFastBox)(d.getLang("global_error_occured"),e),!0}})},onLiveSpectatorsScroll(){const e=window.lastWindowHeight,t=document.getElementById("video_spectators_more_link");t&&(0,n.isVisible)(t)&&e>(0,n.getXY)(t,!0)[1]&&t.click()},updateLiveViewersCount(e,t){const{mvcur:o}=window,i=document.getElementById("mv_views");if(i){if(void 0!==e){const t=o.viewers_count||0,n=parseInt(e,10);if(n!==t){o.viewers_count=n;const t=i.querySelector(".mv_live_spectators_count_text");t&&(t.innerHTML=d.getLang("video_live_N_watching",e,!0))}}if(t){const e=o.spectators_friends||[];if(!(JSON.stringify(e)===JSON.stringify(t))){o.spectators_friends=t;const e=i.querySelector(".mv_live_spectators_friends");e&&(e.innerHTML=t.map((e=>(0,c.getTemplate)("video_live_spectators_friend",e))).reverse().join(""))}}}},subscribeLive(e,t){var o;const i=null==(o=window.Videoview)?void 0:o.getMvData();if(!i)return;const n=!i.liveNotifySubscribed;window.ajax.post("al_video.php?act=a_subscribe_live",{owner_id:i.authorId,subscribe:(0,c.intval)(n),hash:t}),i.liveNotifySubscribed=!i.liveNotifySubscribed;const r=n?(0,v.getIcon20NotificationOutline)().icon:(0,u.getIcon20NotificationSlashOutline)().icon;f.FlatButton.setLabel(e,r),g.onSubscribeLiveOver(e),window.tooltips&&e.tt&&window.tooltips.rePositionTT(e.tt)},onSubscribeLiveOver(e){var t;const o=null==(t=window.Videoview)?void 0:t.getMvData();o&&window.showTooltip(e,{text:()=>o.liveNotifySubscribed?d.getLang("video_live_notify_subscribed"):d.getLang("video_live_notify_unsubscribed"),black:1,shift:[0,10,0],needLeft:1})},initLiveInfoButton(e){p=(0,h.createReactInitiator)(w.LiveInfoButton,(0,_.getReactRootEl)("LiveInfoButton")),p.render(e)},destroyLiveInfoButton(){var e;null==(e=p)||e.unmount()}}},636274:(e,t,o)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 8a4.5 4.5 0 0 1 9 0v1.67c0 .3.1.58.3.8l1.52 1.8a.75.75 0 0 1-.57 1.23H4.25a.75.75 0 0 1-.57-1.24l1.52-1.78c.2-.23.3-.52.3-.81V8zm-1.49-.39A6 6 0 0 1 16 7.75v1.82l1.46 1.72c1.25 1.46.21 3.71-1.7 3.71h-2.08a3.75 3.75 0 0 1-7.35 0H4.25a2.25 2.25 0 0 1-1.71-3.7L4 9.56V7.75l.01-.14zM10 16.5c-.98 0-1.81-.63-2.12-1.5h4.24c-.3.87-1.14 1.5-2.12 1.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"notification_outline_20"}}o.d(t,{getIcon20NotificationOutline:()=>i})},409753:(e,t,o)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" d="M10 3.5c-.75 0-1.45.18-2.07.5a.75.75 0 0 1-1-.32.75.75 0 0 1 .31-1A5.97 5.97 0 0 1 10 2a6 6 0 0 1 5.98 5.61c.03.13.02.26.02.39v1.57l1.46 1.72c.43.5.65 1.22.49 1.87a.75.75 0 0 1-1.46-.34.74.74 0 0 0-.17-.56l-1.52-1.78a1.25 1.25 0 0 1-.3-.81V7.99A4.5 4.5 0 0 0 10 3.5Z"/><path fill="currentColor" fill-rule="evenodd" d="m4.52 5.57-2.3-2.29a.75.75 0 0 1 0-1.06.75.75 0 0 1 1.06 0l14.5 14.5a.75.75 0 0 1 0 1.06.75.75 0 0 1-1.06 0L13.94 15h-.27a3.75 3.75 0 0 1-7.34 0H4.25a2.25 2.25 0 0 1-1.7-3.7L4 9.56V7.75a.76.76 0 0 1 .02-.14 5.97 5.97 0 0 1 .5-2.04Zm7.92 7.93L5.68 6.74A4.5 4.5 0 0 0 5.5 8v1.67c0 .3-.1.58-.3.8l-1.52 1.8a.75.75 0 0 0 .57 1.23h8.19ZM7.88 15a2.25 2.25 0 0 0 4.24 0H7.88Z" clip-rule="evenodd"/></svg>',name:"notification_slash_outline_20"}}o.d(t,{getIcon20NotificationSlashOutline:()=>i})}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return a[e].call(o.exports,o,o.exports,l),o.exports}l.m=a,e=[],l.O=(t,o,i,n)=>{if(!o){var r=1/0;for(c=0;c<e.length;c++){for(var[o,i,n]=e[c],a=!0,s=0;s<o.length;s++)(!1&n||r>=n)&&Object.keys(l.O).every((e=>l.O[e](o[s])))?o.splice(s--,1):(a=!1,n<r&&(r=n));if(a){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,i,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var r={};t=t||[null,o({}),o([]),o(o)];for(var a=2&i&&e;"object"==typeof a&&!~t.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,l.d(n,r),n},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,o)=>(l.f[o](e,t),t)),[])),l.u=e=>25394===e?"web/chunks/AudioLongtapModal.5c994570.js":24817===e?"web/chunks/hls.b496ce21.js":75980===e?"web/chunks/menu_settings.ad849031.js":9375===e?"web/chunks/voice_message_player.1c43f503.js":28762===e?"web/chunks/speech.d9867703.js":57468===e?"web/chunks/SilentModeForms.6c78e68c.js":28872===e?"web/chunks/feed-client-nav-skeleton.23b1194f.js":35953===e?"web/chunks/feed-client-nav-async-right-block.6f6f61b6.js":22197===e?"chunks/"+e+".fd9e68c0.js":77950===e?"chunks/"+e+".f03dc111.js":void 0,l.miniCssF=e=>25394===e?"web/chunks/5e3e105f.css":75980===e?"web/chunks/5bbee2c9.css":57468===e?"web/chunks/a2979e7d.css":void 0,l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},l.l=(e,t,o,n)=>{if(i[e])i[e].push(t);else{var r,a;if(void 0!==o)for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var c=s[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+o){r=c;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.setAttribute("data-webpack","vk:"+o),r.src=e),i[e]=[t];var v=(t,o)=>{r.onerror=r.onload=null,clearTimeout(u);var n=i[e];if(delete i[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(o))),t)return t(o)},u=setTimeout(v.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=v.bind(null,r.onerror),r.onload=v.bind(null,r.onload),a&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/dist/",n=e=>new Promise(((t,o)=>{var i=l.miniCssF(e),n=l.p+i;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var n=(a=o[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===e||n===t))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){var a;if((n=(a=r[i]).getAttribute("data-href"))===e||n===t)return a}})(i,n))return t();((e,t,o,i)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=r=>{if(n.onerror=n.onload=null,"load"===r.type)o();else{var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,n.parentNode.removeChild(n),i(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,o)})),r={96464:0},l.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(r[e]=n(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={96464:0};l.f.j=(t,o)=>{var i=l.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else{var n=new Promise(((o,n)=>i=e[t]=[o,n]));o.push(i[2]=n);var r=l.p+l.u(t),a=new Error;l.l(r,(o=>{if(l.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",a.name="ChunkLoadError",a.type=n,a.request=r,i[1](a)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,o)=>{var i,n,[r,a,s]=o,d=0;if(r.some((t=>0!==e[t]))){for(i in a)l.o(a,i)&&(l.m[i]=a[i]);if(s)var c=s(l)}for(t&&t(o);d<r.length;d++)n=r[d],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(c)},o=self.webpackChunkvkweb=self.webpackChunkvkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var d=l.O(void 0,[213,2067,83737,57451,71610,5038,95167],(()=>l(449342)));d=l.O(d)})();