(()=>{var e,t,n,o,i,r,s={428817:e=>{e.exports={reactions_preview_item:'<div class="ReactionsPreviewItem ReactionsPreviewItem--stackOverlay %class%" style="background-image: url(\'%image_url%\');" aria-label="%title%"></div>'}},58255:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var o=n(111132);function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,n)=>{"use strict";function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>o})},374277:(e,t,n)=>{"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>i})},376125:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o={root:"BadgesEntrypoint-module__root--irU6C",separatorWrapper:"BadgesEntrypoint-module__separatorWrapper--YS6lL",separator:"BadgesEntrypoint-module__separator--oIIFM"}},429697:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var o=n(487462),i=n(263366),r=n(894578),s=n(58255),a=n(374277),c=n(667294),l=n(696630),u=n(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},p=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1];t.removeClasses(i,"exit"),t.addClass(i,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.addClass(i,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.removeClasses(i,r),t.addClass(i,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,i=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:o?i+"-active":n[e+"Active"],doneClassName:o?i+"-done":n[e+"Done"]}},t}(0,r.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(o+=" "+i),"active"===n&&e&&(0,u.forceReflow)(e),o&&(this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))}(e,o))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,i=n.active,r=n.done;this.appliedClasses[t]={},o&&d(e,o),i&&d(e,i),r&&d(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.default)(e,["classNames"]));return c.createElement(l.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);p.defaultProps={classNames:""},p.propTypes={};const v=p},696630:(e,t,n)=>{"use strict";n.d(t,{default:()=>b});var o=n(263366),i=n(894578),r=n(667294),s=n(973935),a=n(806035),c=n(500220),l=n(559391),u="unmounted",d="exited",p="entering",v="entered",f="exiting",g=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var i,r=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?r?(i=d,o.appearStatus=p):i=v:i=t.unmountOnExit||t.mountOnEnter?u:d,o.state={status:i},o.nextCallback=null,o}(0,i.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==v&&(t=p):n!==p&&n!==v||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&(0,l.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,i=this.props.nodeRef?[o]:[s.findDOMNode(this),o],r=i[0],c=i[1],l=this.getTimeouts(),u=o?l.appear:l.enter;!e&&!n||a.default.disabled?this.safeSetState({status:v},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,c),this.safeSetState({status:p},(function(){t.props.onEntering(r,c),t.onTransitionEnd(u,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(r,c)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!a.default.disabled?(this.props.onExit(o),this.safeSetState({status:f},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=i[0],a=i[1];this.props.addEndListener(r,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(c.default.Provider,{value:null},"function"==typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function m(){}g.contextType=c.default,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},g.UNMOUNTED=u,g.EXITED=d,g.ENTERING=p,g.ENTERED=v,g.EXITING=f;const b=g},500220:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o=n(667294).createContext(null)},806035:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o={disabled:!1}},559391:(e,t,n)=>{"use strict";n.d(t,{forceReflow:()=>o});var o=function(e){return e.scrollTop}},580301:(e,t,n)=>{"use strict";n.d(t,{useEventListenerOnRef:()=>i});var o=n(667294);const i=(e,t,n)=>{(0,o.useLayoutEffect)((()=>{const{current:o}=e;if(o)return o.addEventListener(t,n,{passive:!0}),()=>{o.removeEventListener(t,n)}}),[e.current])}},799695:(e,t,n)=>{"use strict";n.d(t,{useOnClickOutside:()=>i});var o=n(667294);const i=(e,t)=>{(0,o.useEffect)((()=>{const n=n=>{!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},828109:(e,t,n)=>{"use strict";n.d(t,{preservePositionBetween:()=>r});var o=n(75272),i=n(659397);function r(e,{scrollByImpl:t=window.scrollBy}={}){let n=e;return{start:(0,i.once)((function(e){e&&(n=e);const r=(0,o.getElementOffset)(n);return(0,i.once)((function(e){if(e&&(n=e),n.isConnected){const e=(0,o.getElementOffset)(n);t(0,e.top-r.top)}}))}))}}},59985:(e,t,n)=>{"use strict";n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>o,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>u,REACTION_ID_DEFAULT:()=>r,REACTION_ID_MAX:()=>s,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>l,SHOW_TOOLTIP_TIMEOUT:()=>i});const o=600,i=140,r=0,s=7,a=0,c=void 0,l=2,u=r},419328:(e,t,n)=>{"use strict";n.d(t,{makePendingRequestState:()=>o});const o=(e={})=>{const t=Object.create(null);return{cancel:e=>{var n;null==(n=t[e])||n.abort(),delete t[e]},register:(n,o)=>{var i;const r=t[n],s=(e=>{var n;return void 0!==(null==(n=t[e])?void 0:n.throttleTimerId)})(n);if(r){if(s)return!1;console.warn(`Reactions pending request for key '${n}' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()`),r.abort()}let a;t[n]={abort:o},void 0!==(null==(i=e)?void 0:i.throttleMs)&&(a=((e,n)=>{const o=t[e];if(!o)return;o.throttleTimerId&&window.clearTimeout(o.throttleTimerId);const i=window.setTimeout((()=>{const n=t[e];n&&(n.throttleTimerId=void 0)}),n);return o.throttleTimerId=i,i})(n,e.throttleMs));return()=>{var e;(null==(e=t[n])?void 0:e.abort)===o&&delete t[n],window.clearTimeout(a)}}}}},457972:(e,t,n)=>{"use strict";n.d(t,{isDebugEnabled:()=>r});var o=n(531730);let i;const r=()=>(void 0!==i||(i=!!o.ls.get("reactions.debug_enabled")),i)},192441:(e,t,n)=>{"use strict";n.d(t,{reactionCountsBrandUnwrap:()=>i,reactionCountsBrandWrap:()=>r});var o=n(640971);const i=e=>(0,o.unwrap)(e),r=e=>(0,o.wrap)(e)},698216:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>r});var o=n(970978);const i="reactions";function r({error:e,reportError:t=!1}){t&&(0,o.logError)(e,{environment:i}),console.error(e)}},822715:(e,t,n)=>{"use strict";n.d(t,{areCountersEqual:()=>k,calcCounters:()=>h,calcCountersSum:()=>_,calcCountersWeightedSum:()=>w,counterForReactionId:()=>S,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>u,getReaction:()=>c,hasReactionsForCounts:()=>y,isReactionIdSet:()=>v,isReactionIdUnset:()=>f,isUnknownObject:()=>a,isValidReactionId:()=>g,parseReactionId:()=>m,parseReactionIdOrUnset:()=>b,parseReactionMenuConfig:()=>R,prepareReactionMenuSet:()=>p,validateReactionSetPayloaditems:()=>E});var o=n(59985),i=n(192441),r=n(659397);const s=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),a=e=>null!==e&&"object"==typeof e,c=(e,t)=>e.itemsById[t],l=e=>c(e,o.REACTION_ID_DEFAULT),u=e=>{var t;return null==(t=l(e))?void 0:t.title},d=(e,t)=>0===e.length?"":((e,t,n=!0)=>e.reduce(((e,o)=>{const i=t(o),r=t(e);return r===i?n?e:o:r<i?e:o})))(e,(e=>Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)),!1).url,p=(e,t,n)=>{const o=t.map((({asset:e,color_sets:t,id:o,score:i,title:r})=>{var s,a;return{animationURL:e.animation_url||void 0,backgroundColor:null==(s=t)?void 0:s.background,id:o,imageMenuURL:d(e.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?d(e.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?d(e.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?d(e.images,n.imageStoryPreviewSize):void 0,score:i,title:r,titleColor:null==(a=t)?void 0:a.foreground}})),i={};return o.forEach((e=>{i[e.id]=e})),{id:e,items:o,itemsById:i}},v=e=>e!==o.REACTION_ID_UNSET,f=e=>e===o.REACTION_ID_UNSET,g=e=>s(e)&&e>=o.REACTION_ID_MIN&&e<=o.REACTION_ID_MAX,m=e=>{const t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},b=e=>{const t=m(e);return t.isValid?t.value:o.REACTION_ID_UNSET},E=(e,t)=>{if(e.length<o.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},R=e=>{if(!a(e))return;const t={},{animationShowStaticAfterEnd:n,menuShowDelay:i,openedDefaultReactionId:r,reportJsErrors:s}=e;return"number"!=typeof i&&void 0!==i||(t.menuShowDelay=i),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof s&&(t.reportJsErrors=s),"number"==typeof r||null===r?null===r?t.openedDefaultReactionId=void 0:g(r)&&(t.openedDefaultReactionId=r):t.openedDefaultReactionId=o.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},h=(e,t)=>{const n=(0,i.reactionCountsBrandWrap)({});return Object.entries((0,i.reactionCountsBrandUnwrap)(e)).forEach((([e,o])=>{var i,r,s;const a=e;var c;const l=null!=(c=null==(s=t)||null==(r=s.itemsById)||null==(i=r[a])?void 0:i.score)?c:1;n[a]=l*(o||0)})),n},_=e=>Object.values((0,i.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),w=e=>_((0,i.reactionCountsBrandWrap)(e)),y=e=>_(e)>0;var C;const S=(e,t)=>null!=(C=e[t])?C:void 0,k=(e,t)=>e&&t?(0,r.isEqual)(e,t):e===t},640971:(e,t,n)=>{"use strict";n.d(t,{unwrap:()=>o,wrap:()=>i});const o=e=>e,i=e=>e},216833:(e,t,n)=>{"use strict";n.d(t,{isBadgesEnabled:()=>i,isBadgesRenderingEnabled:()=>r,isOneTimeDonutWithoutBadges:()=>s});var o=n(839470);const i=()=>(0,o.partConfigEnabled)("badges"),r=()=>(0,o.partConfigEnabled)("badges_rendering"),s=()=>(0,o.partConfigEnabled)("groups_one_time_donut_without_badges")},849307:(e,t,n)=>{"use strict";var o,i,r,s=n(412818);(null==(i=window.vk)||null==(o=i.pe)?void 0:o.static_manager_dynamic_imports)&&(null==(r=window.vk)?void 0:r.stDomain)&&(n.p=window.vk.stDomain+"/dist/"),window.Reactions=s.ReactionsEntryGlobal,(0,s.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},508087:(e,t,n)=>{"use strict";n.d(t,{stripPercentVars:()=>o});const o=e=>e.replace(/%[-\w]+%/g,"")},693982:(e,t,n)=>{"use strict";function o(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,n,o]=t;return{objectType:n,objectId:o}}n.d(t,{getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>l,getElementLikeButtonLabel:()=>d,likePostObjectId:()=>i,likeReplyObjectId:()=>r,parseLikeObjectId:()=>o});const i=e=>`wall${e}`,r=e=>`wall_reply${e}`;var s;const a=e=>{var t;return null!=(s=null==(t=e)?void 0:t.querySelector(".like_button_count, ._like_button_count"))?s:void 0};var c;const l=e=>{var t;return null!=(c=null==(t=e)?void 0:t.querySelector(".like_button_icon, ._like_button_icon"))?c:void 0};var u;const d=e=>null!=(u=e.querySelector(".like_button_label, ._like_button_label"))?u:void 0},424952:(e,t,n)=>{"use strict";n.d(t,{BadgesEntrypointSkeleton:()=>s});var o=n(785893),i=n(444972),r=n(238071);const s=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Separator,{}),(0,o.jsx)(i.Skeleton,{circle:!0,width:36,height:36})]})},238071:(e,t,n)=>{"use strict";n.d(t,{Separator:()=>r});var o=n(785893),i=n(376125);const r=()=>(0,o.jsx)("div",{className:i.default.separatorWrapper,children:(0,o.jsx)("div",{className:i.default.separator})})},409549:(e,t,n)=>{"use strict";n.d(t,{LazyBadgesEntryPoint:()=>l});var o=n(434788),i=n(785893),r=n(667294),s=n(895145),a=n(424952);const c=(0,s.asyncComponent)((()=>Promise.all([n.e(2067),n.e(71610),n.e(26464),n.e(32522),n.e(31902)]).then(n.bind(n,620209))),(({BadgesEntrypoint:e})=>e)),l=e=>(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(a.BadgesEntrypointSkeleton,{}),children:(0,i.jsx)(c,(0,o._)({},e))})},135683:(e,t,n)=>{"use strict";n.d(t,{ATTR_USER_REACTION_ID:()=>o});const o="data-reaction-user-reaction-id"},299156:(e,t,n)=>{"use strict";n.d(t,{getLastOwnReactionChangeTime:()=>k,setDataCurrentId:()=>I,updateReactionButtonContainerForCounts:()=>y,updateReactionButtonCounts:()=>S,updateReactionButtonForCurrentReaction:()=>C});var o=n(11010),i=n(434788),r=n(936392),s=n(664988),a=(n(75272),n(29271)),c=n(457972),l=n(822715),u=n(795558),d=n(893106),p=n(135683),v=n(775060),f=n(577698),g=n(908088);const m="data-reaction-last-own-change-time",b="PostButtonReactions__icon--animationActive";const E="post_button";r.LottieManager.observer.ignoreGroup(E);const R=e=>{var t;const n=null==(t=e.__reactionIconAnimation)?void 0:t.player;n&&(n.destroy(),delete e.__reactionIconAnimation)},h=(0,o._)((function*(e,t,n,o){var i;if(!(e!==(null==(i=n.__reactionIconAnimation)?void 0:i.animationURL))&&e||(R(n),t.innerHTML="",n.classList.remove(b)),!o||!e)return;const s=yield r.LottieManager.loadAnimation({group:E,animationUrl:e,containers:[t],loop:!1,autoplay:!0});s.addEventListener("firstFrame",(()=>{n.classList.add(b)})),s.addEventListener("loopComplete",(()=>{var e;!0===(null==(e=(0,g.getReactionConfig)())?void 0:e.animationShowStaticAfterEnd)&&(n.classList.remove(b),R(n))})),n.__reactionIconAnimation={player:s,animationURL:e}})),_=(e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-icon"]');if(!n)return;const{currentOption:o,isUserAction:i}=t;if(o.isReactionSet){var r,s;const e=o.current,t=null==(r=e)?void 0:r.imageMenuURL;n.style.backgroundImage=`url('${t}')`,n.setAttribute("aria-label",null==(s=e)?void 0:s.title)}else{var a;const e=o.default;var c;if(n.style.backgroundImage="",null==(a=e)?void 0:a.title)n.setAttribute("aria-label",null==(c=e)?void 0:c.title)}n.classList.toggle("PostButtonReactions__icon--custom",o.isReactionSet);{const e=o.isReactionSet?o.current.animationURL:void 0,t=(e=>{let t=e.querySelector(".PostButtonReactions__iconAnimation");return t||(t=(0,u.se)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),e.appendChild(t),t)})(n);h(e,t,n,i)}},w=(e,t,n)=>{e.classList.toggle("PostButtonReactions--icon-active",t),e.classList.toggle("PostButtonReactions--active",t)},y=(e,t)=>{const n=!t||!(0,l.hasReactionsForCounts)(t);e.classList.toggle("PostBottomAction--empty",n)},C=(e,t,n,o)=>{const r=!(0,l.isReactionIdUnset)(t),s=((e,t)=>{let n,o=(0,l.getDefaultReaction)(e);if((0,l.isReactionIdUnset)(t)){if(o)return{isReactionSet:!1,default:o}}else{if(n=e.itemsById[t],n)return{isReactionSet:!0,current:n};console.error(new Error(`Missing reaction meta for ${t} in set '${e.id}'`))}return{_error:!0}})(n,t);"_error"in s||(_(e,{currentOption:s,isUserAction:o}),((e,t)=>{const{currentOption:n}=t,o=n.isReactionSet?n.current.titleColor:void 0,r=n.isReactionSet?n.current.backgroundColor:void 0,s=o?{"--reaction-button-title-color-light":o.light,"--reaction-button-title-color-dark":o.dark}:{"--reaction-button-title-color-light":null,"--reaction-button-title-color-dark":null},a=r?{"--reaction-button-background-color-light":r.light,"--reaction-button-background-color-dark":r.dark}:{"--reaction-button-background-color-light":null,"--reaction-button-background-color-dark":null},c=(0,i._)({},s,a);Object.entries(c).forEach((([t,n])=>{e.style.setProperty(t,n)}))})(e,{currentOption:s}),((e,t)=>{const{currentOption:n}=t;let o="";o=n.isReactionSet?(0,a.langReplace)(a.getLang("reactions_button_unset_reaction_title")||"",{reaction_name:n.current.title||""}):(0,a.langReplace)(a.getLang("reactions_button_set_reaction_with_name")||"",{reaction_name:n.default.title||""})||a.getLang("reactions_button_title")||"",e.setAttribute("aria-label",o||"")})(e,{currentOption:s}),(0,v.isCounterEnabledForBtn)(e)||((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{currentOption:o}=t,i=o.isReactionSet?o.current.title:o.default.title;i?n.innerText=i:(0,c.isDebugEnabled)()&&console.log("reactions: setReactionNameTitle: missing title",o)})(e,{currentOption:s})),w(e,r),o&&function(e,t){e.setAttribute(m,String(t))}(e,Date.now())},S=(e,t,n,o,i)=>{const r=(0,v.getCounterForTitle)(e,t,o,i);if((0,v.isCounterEnabled)(r)&&(((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{counterForTitle:o}=t;if((0,v.isCounterAvailable)(o)){const e=o.buttonText;(0,d.animateCount)(n,e,{allowZero:o.allowZeroAnimation,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}else(0,c.isDebugEnabled)()&&console.log("reactions: setReactionTitle: missing title",o)})(e,{counterForTitle:r}),o)){((e,t)=>{var n;const o=null==(n=(0,f.getClosestLikeBtnContainerElem)(e))?void 0:n.querySelector('[data-section-ref="reactions-button-screen-reader-counter"]');if(!o)return;const i=(0,a.langNumeric)(t,a.getLang("reactions_n_reacted","raw")||"%s",!0);o.innerText=i})(e,(0,l.calcCountersSum)(o))}},k=e=>{const t=e.getAttribute(m);if(t&&(0,s.isNumeric)(t))try{return new Date(Number.parseInt(t)).getTime()||void 0}catch(e){return void console.error(e)}};const I=(e,t)=>{e.setAttribute(p.ATTR_USER_REACTION_ID,(0,l.isReactionIdUnset)(t)?"":String(t))}},536943:(e,t,n)=>{"use strict";n.d(t,{ReactionImage:()=>c});var o=n(434788),i=n(785893),r=n(667294),s=n(659397),a=n(607338);const c=(0,r.forwardRef)((({animationURL:e,isPlaying:t,image:n,loadAnimationParams:r},c)=>{const{lottieRendered:l,lottieContainerRef:u}=(0,a.useLottie)((0,o._)({group:"reaction_image",animationUrl:e},r),{play:t}),d=l&&t;return(0,i.jsx)("div",{className:"ReactionImage",style:{backgroundImage:!d&&n?`url(${n})`:void 0},ref:c,children:(0,i.jsx)("div",{className:(0,s.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!d}),ref:u})})}))},418559:(e,t,n)=>{"use strict";n.d(t,{PreloadImages:()=>r});var o=n(249823),i=n(667294);const r=(0,i.memo)((function({imageURLs:e}){return(0,i.useEffect)((()=>{Promise.all(e.map((e=>(0,o.preloadImage)(e)))).catch((()=>{}))}),[e]),null}))},858789:(e,t,n)=>{"use strict";n.d(t,{ReactedUsersStack:()=>a,stackConfigForVisibleCount:()=>c,userPhotoStub:()=>s});var o=n(785893),i=n(659397),r=n(82161);const s={kind:"stub"};function a({photos:e,size:t,totalCount:n,visibleCount:s}){const a=null!=n?n:e.length;let c=Math.min(e.length,s);a===c+1&&e.length>=c+1&&(c+=1);let l=Math.max(0,a-c),u=l>0;const d=e.slice(0,c),p=(0,r.formatCount)(l);return(0,o.jsx)("div",{className:(0,i.classNames)("ReactedUsersStack",`ReactedUsersStack--size-${t}`,{"ReactedUsersStack--others":u}),children:(0,o.jsxs)("div",{className:"ReactedUsersStack__photos",role:"presentation",children:[d.map(((e,t)=>function(e){return"profile"===e.kind}(e)?(0,o.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:`url(${e.imageURL})`},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,o.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null)),u&&(0,o.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:`+${p}`}})]})})}function c(e){const t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:e=>Math.min(e,t)}}},820161:(e,t,n)=>{"use strict";n.d(t,{Reaction:()=>l});var o=n(785893),i=n(953908),r=n(659397),s=n(249917),a=n(731262),c=n(536943);const l=({animationURL:e,image:t,isOpenedDefault:n,onMouseEnter:l,onReactionClick:u,reactionId:d,reactionTitle:p})=>{const v=(0,a.useReactedUsersConfig)(d),f=()=>{var e;null==(e=u)||e(d)};return(0,o.jsxs)("div",{className:(0,r.classNames)("Reaction",{"Reaction--openedDefault":n&&v.shouldShowReactedUsers}),onClick:e=>{f(),e.stopPropagation()},onKeyDown:e=>{[i.KEY.RETURN,i.KEY.SPACE].includes(e.keyCode)&&(f(),e.stopPropagation())},onMouseEnter:l,tabIndex:0,role:"button","aria-label":p||void 0,children:[(0,o.jsx)("div",{className:"Reaction__hoverArea"}),(0,o.jsx)("div",{className:"Reaction__title",children:(0,o.jsx)(s.ReactionTitle,{reactedUsersConfigResult:v,reactionId:d,title:p})}),(0,o.jsx)("div",{className:"Reaction__image",children:(0,o.jsx)(c.ReactionImage,{isPlaying:!0,image:t,animationURL:e})})]})}},282795:(e,t,n)=>{"use strict";n.d(t,{ReactionMenuTitleVariants:()=>r,TITLE_VARIANT_DEFAULT:()=>i,TitleVariantWithLikedUsers:()=>o});const o="WithLikedUsers",i=o,r=[o,"TitleOnly"]},249917:(e,t,n)=>{"use strict";n.d(t,{ReactionTitle:()=>a});var o=n(785893),i=n(667294),r=n(659397),s=n(763832);const a=({reactedUsersConfigResult:e,reactionId:t,title:n})=>{const a=(0,i.useRef)(null),{reactedUsersConfig:c,shouldShowReactedUsers:l}=e;return(0,o.jsxs)("div",{className:(0,r.classNames)("ReactionTitle",{"ReactionTitle--withUsers":l}),ref:a,children:[(0,o.jsx)("div",{className:"ReactionTitle__name",children:n}),(0,o.jsx)("div",{className:(0,r.classNames)({"ReactionTitle__reactedUsers--visible":l}),children:(0,o.jsx)(s.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:a,reactedUsersConfig:c,reactionId:t})})]})}},674953:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>v});var o=n(785893),i=n(667294),r=n(659397),s=n(953908),a=n(820161),c=n(921881),l=n(805827),u=n(32375),d=n(216833),p=n(409549);const v=(0,i.forwardRef)((function({close:e,currentReactionId:t,onReactionChoose:n,position:v=c.PopperVerticalPosition.TOP,reactionsOptions:f,onMouseEnter:g,onMouseLeave:m,badgesProps:b},E){var R;const h=(0,l.useReactionMenuConfig)(),_=v===c.PopperVerticalPosition.TOP?null==(R=h)?void 0:R.openedDefaultReactionId:void 0,[w,y]=(0,i.useState)(_),C=(0,i.useCallback)((t=>{var n;t.keyCode===s.KEY.ESC&&(null==(n=e)||n())}),[]),S=(0,i.useCallback)((()=>{y(void 0)}),[]);return(0,o.jsx)("div",{className:(0,r.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":v===c.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":v===c.PopperVerticalPosition.BOTTOM}),onKeyDown:C,onMouseEnter:g,onMouseLeave:m,ref:E,children:(0,o.jsxs)("div",{className:"ReactionsMenu__inner",children:[f.items.map((e=>(0,o.jsx)(a.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===w,isSelected:e.id===t,onMouseEnter:S,onReactionClick:n,reactionId:e.id,reactionTitle:e.title},e.id))),(0,d.isBadgesEnabled)()&&(0,u.verifyPayloadForBadges)(b)&&(0,o.jsx)(p.LazyBadgesEntryPoint,{onClick:e,badgesProps:b})]})})}))},40165:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuContextProvider:()=>l,useReactionsMenuContext:()=>c});var o=n(434788),i=n(785893),r=n(667294),s=n(921414);const a=(0,r.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:s.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:()=>{}}),c=()=>(0,r.useContext)(a),l=({value:e,children:t})=>{const n=(0,s.useRemoteResource)();return(0,i.jsx)(a.Provider,{value:(0,o._)({},e,{reactedUsers:n}),children:t})}},763832:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var o=n(785893),i=n(667294),r=n(198508),s=n(858789),a=n(40165),c=n(580301),l=n(731262);const u="s";function d({parentClickContainerRef:e,reactionId:t,reactedUsersConfig:n}){const{likeObjectId:d,triggerClose:p}=(0,a.useReactionsMenuContext)(),v=(0,i.useCallback)((function(e){var o;if(e.stopPropagation(),!d)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");(null==(o=n)?void 0:o.hasSomeReactions)&&(p(),(0,r.showReactedModal)(t,d))}),[]);return(0,c.useEventListenerOnRef)(e,"click",v),(0,o.jsx)("div",{className:"ReactionsMenuReactedUsersPreview",children:n&&n.userPhotos?(0,o.jsx)(s.ReactedUsersStack,{visibleCount:l.visibleCount,totalCount:n.totalPhotosCount,photos:n.userPhotos,size:u}):null})}},976873:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuStateContainer:()=>r});var o=n(785893),i=n(40165);const r=({children:e,contextValue:t})=>(0,o.jsx)(i.ReactionsMenuContextProvider,{value:t,children:e})},705967:(e,t,n)=>{"use strict";n.d(t,{getUsersForReactionId:()=>i,isTitleVariantWithUsers:()=>r});var o=n(282795);function i(e,t){var n;const o=null==(n=e.byReactionId)?void 0:n[t];if(void 0!==o)return o}function r(e){return e===o.TitleVariantWithLikedUsers}},731262:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersConfig:()=>d,visibleCount:()=>u});var o=n(40165),i=n(858789),r=n(880549),s=n(282795),a=n(705967),c=n(822715);const{stubItemsForPhotos:l,visibleCount:u}=(0,i.stackConfigForVisibleCount)(3);function d(e){var t;const{currentReactionId:n,reactedUsers:{valueMaybeStale:u}}=(0,o.useReactionsMenuContext)(),d=function(e){const{titleVariant:t=s.TITLE_VARIANT_DEFAULT,reactedUsers:{valueMaybeStale:n},reactedUsersCounts:i}=(0,o.useReactionsMenuContext)();if(!(0,a.isTitleVariantWithUsers)(t))return;return function(e,t,n){const o=t?(0,a.getUsersForReactionId)(t,e):void 0;if(o)return{kind:"reacted_users",reactedUsersForReaction:o};const i=n?(0,c.counterForReactionId)(n,e):void 0;if(i&&i>0)return{kind:"count_only_stub",counter:i};return}(e,n,i)}(e);let v,f;if(d&&"reacted_users"===d.kind&&d.reactedUsersForReaction.users){var g;let{reactedUsersForReaction:{users:t=[],totalCount:o}}=d;const i=(0,r.withCurrentUser)(t,o,e,n,null==(g=u)?void 0:g.currentUser);o=i.totalCount,t=i.users,f=null!=o?o:t.length,v=t.map(p)}else if(d&&function(e){return"count_only_stub"===e.kind}(d)){var m;let t=d.counter;const o=(0,r.withCurrentUser)([],t,e,n,null==(m=u)?void 0:m.currentUser);t=o.totalCount;const s=o.users;t&&(f=t,v=[...s.map(p),...Array.from({length:l(t)},(()=>i.userPhotoStub))])}else{var b;const t=(0,r.withCurrentUserAddedOnly)(e,n,null==(b=u)?void 0:b.currentUser);f=t.totalCount,v=t.users.map(p)}var E;f=null!=(E=null!=f?f:null==(t=v)?void 0:t.length)?E:0;const R=Boolean(f&&f>0);return R?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:R,totalPhotosCount:f,userPhotos:v}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},880549:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersPreview:()=>v,withCurrentUser:()=>m,withCurrentUserAddedOnly:()=>b});var o=n(11010),i=n(434788),r=n(822715),s=n(647434),a=n(512637),c=n(705967),l=n(40165),u=n(851793),d=n(667294),p=n(991059);function v({attemptRefetch:e}){const{likeObjectId:t,titleVariant:n,reactedUsers:i}=(0,l.useReactionsMenuContext)(),{counts:r}=(0,u.useReactionsGlobalStateForObject)(t,{payloadIsSuitable:f}),[p,v]=(0,d.useState)(!1);(0,d.useEffect)((()=>{r&&v(!0)}),[r]),(0,d.useEffect)((()=>{if(!t||!(0,c.isTitleVariantWithUsers)(n))return;function r(){return(r=(0,o._)((function*(){if(!t)return;p&&v(!1),i.setLoading(!0);const e=(0,s.requestGetReacted)(t);try{const t=function(e){const{reactedMenuStats:t}=e;if(!t)return;let n;const{byReactionId:o}=t;if(o){n={};for(const[e,t]of Object.entries(o)){var i,r,s;n[e]={totalCount:null!=(r=t.totalCount)?r:void 0,users:null!=(s=null==(i=t.users)?void 0:i.map((e=>g(e))))?s:void 0}}}const a=t.currentUser?g(t.currentUser):t.currentUser;return{byReactionId:n,currentUser:a}}(yield e.promise);if(!t){const e=new Error("useReactedUsersTooltip: failed to transform response");return(0,a.isDebugEnabled)()&&console.error(e),void i.setFailed(e)}i.setLoaded(t)}catch(e){i.setFailed(e)}}))).apply(this,arguments)}e&&("initial"===i.resource.kind||"loading"!==i.resource.kind&&p)&&function(){r.apply(this,arguments)}()}),[n,t,p,e])}function f(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function g(e){return(0,i._)({},e,{ownerName:e.ownerName?(0,p.stringWithHTMLEntitiesDecode)(e.ownerName):void 0})}function m(e,t,n,o,i){const s=null!=t?t:0,a=window.vk.id;if((0,r.isReactionIdSet)(o)&&o===n&&i){var c;const t=function(e,t,n,o,i){if(!i)return;const{ownerImageURL:r,ownerName:s}=i;if(!r)return;if(n.find((t=>t.ownerId===e)))return;return{currentUser:{ownerId:e,ownerImageURL:r,ownerName:s},totalCount:o+1}}(a,0,e,s,i);if(null==(c=t)?void 0:c.currentUser){const n={ownerId:t.currentUser.ownerId,ownerImageURL:t.currentUser.ownerImageURL,ownerName:t.currentUser.ownerName};return{totalCount:t.totalCount,users:[n].concat(e||[])}}}else if((0,r.isReactionIdUnset)(o)||o!==n){const t=function(e,t,n,o){const i=n&&n.filter((t=>t.ownerId!==e)),r=i&&n&&i.length<n.length;if(r)return{totalCount:r?o-1:o,users:i}}(a,0,e,s);if(t)return{totalCount:t.totalCount,users:t.users}}return{totalCount:s,users:e}}function b(e,t,n){return m([],0,e,t,n)}},445031:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuSet:()=>r});var o=n(667294),i=n(908088);const r=e=>(0,o.useMemo)((()=>(0,i.getReactionSet)(e)),[e])},851793:(e,t,n)=>{"use strict";n.d(t,{useReactionsGlobalStateForObject:()=>c,useReactionsGlobalUpdateEventsForObject:()=>l});var o=n(667294),i=n(822715),r=n(505426),s=n(693982),a=n(249823);function c(e,{payloadIsSuitable:t}={}){const[n,r]=(0,o.useState)(void 0),s=(0,a.usePreviousRef)(n);return l(e,(0,o.useCallback)((function(e){var n;t&&!t(e)||e.counts&&!(0,i.areCountersEqual)(e.counts,null!=(n=s.current)?n:void 0)&&r(e.counts)}),[e])),{counts:n}}function l(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,o.useEffect)((()=>(0,r.registerNonGlobalNonUniqueListener)(r.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,o.useCallback)((function(n){(0,s.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},921414:(e,t,n)=>{"use strict";n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>r,useRemoteResource:()=>c});var o=n(667294);const i={kind:"initial"},r={valueMaybeStale:void 0,value:void 0,reset:()=>{},setFailed:()=>{},setLoaded:()=>{},setLoading:()=>{},resource:i};function s(e){if("value"in e&&void 0!==e.value)return e.value}function a(e){const t=s(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function c(){const[e,t]=(0,o.useState)(i);return{valueMaybeStale:a(e),value:s(e),resource:e,setFailed:(0,o.useCallback)(((e,n=!1)=>{t((t=>({kind:"failed",error:e,staleValue:n?a(t):void 0})))}),[]),setLoaded:(0,o.useCallback)((e=>{t({kind:"loaded",value:e})}),[]),setLoading:(0,o.useCallback)(((e=!1)=>{t((t=>({kind:"loading",staleValue:e?a(t):void 0})))}),[]),reset:(0,o.useCallback)((()=>{t((()=>i))}),[])}}},753566:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuButton:()=>m});var o=n(785893),i=n(667294),r=n(512637),s=n(805827),a=n(123799),c=n(418559),l=n(655154),u=n(674953),d=n(445031),p=n(407089),v=n(577698),f=n(976873),g=n(32375);const m=({objectId:e,onReactionChoose:t,reactionButtonContainerElem:n,reactionHiddenButtonContainerElem:m,reactionIdInitial:b,reactionSetId:E,reactionsCounts:R,styleVariant:h,triggerMouseenterOnInitial:_,titleVariant:w})=>{var y,C;const{isAllowedReenter:S,tooltipVisibility:k,triggerClose:I}=(0,a.useTooltipVisibility)(),[P,T]=(0,i.useState)(b);(0,i.useEffect)((()=>{const t=[(0,l.addReactionChooseListener)(e,(()=>{I()})),(0,l.addDataUpdateListener)(e,(e=>{T(e.currentReactionId)}))];return()=>{t.forEach((e=>{e()}))}}),[]);const L=(0,d.useReactionMenuSet)(E),A=(0,s.useReactionMenuConfig)();var U;const O=(0,i.useMemo)((()=>{var e;return null!=(U=null==(e=L)?void 0:e.items.map((e=>e.imageMenuURL)))?U:[]}),[null==(y=L)?void 0:y.id]);(0,i.useEffect)((()=>{var e;L&&void 0!==P&&!(null==(e=L.items)?void 0:e.find((e=>e.id===P)))&&console.warn(`Current reaction ID ${P} is not found in set '${E}'`)}),[L]);if(!L)return console.warn(`ReactionsMenuButton init error, unavailable reaction set: ${E}`),null;const B={close:I,currentReactionId:P,onReactionChoose:e=>{(I(),e!==P)&&t(e)},reactionsOptions:L,badgesProps:(0,g.reactionsElemPayloadForBadges)(n)},j={currentReactionId:P,likeObjectId:e,reactedUsersCounts:R,titleVariant:w,triggerClose:I};return(0,o.jsxs)(f.ReactionsMenuStateContainer,{contextValue:j,children:[(0,o.jsx)(p.ReactionsMenuTooltip,{delayShow:null==(C=A)?void 0:C.menuShowDelay,getAttachElem:e=>{if(!e)return;const t=(0,v.getClosestLikeBtnContainerElem)(e);return t||(0,r.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t},isAllowedReenter:S,popup:u.ReactionsMenu,popupProps:B,reactionButtonContainer:n,reactionHiddenButtonContainer:m,styleVariant:h,triggerMouseenterOnInitial:_,visibility:k}),(0,o.jsx)(c.PreloadImages,{imageURLs:O})]})}},407089:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuTooltip:()=>g});var o=n(434788),i=n(785893),r=n(667294),s=n(59985),a=n(880549),c=n(249823),l=n(310707),u=n(544311),d=n(123799),p=n(746257);const v=["--post-padding-lr"],f=()=>document.createElement("div"),g=({getAttachElem:e,initialIsOpen:t=!1,isAllowedReenter:n,reactionButtonContainer:g,reactionHiddenButtonContainer:m,popup:b,popupProps:E,delayHide:R=s.HIDE_TOOLTIP_TIMEOUT,delayShow:h=s.SHOW_TOOLTIP_TIMEOUT,onOpenStateChange:_,onPopperVisibilityChange:w,styleVariant:y,triggerMouseenterOnInitial:C=!0,visibility:S=d.TooltipVisibility.uncontrolled})=>{const k=void 0!==e,[I,P]=(0,r.useState)(t),T=S!==d.TooltipVisibility.uncontrolled,L=(0,c.usePrevious)(S),A=(0,r.useRef)(null),U=(0,r.useRef)(null),O=(0,r.useRef)(null);(0,a.useReactedUsersPreview)({attemptRefetch:I});const{style:B}=(0,p.useCSSVarsPropagation)({elementWithPropsRef:U,properties:v}),j=(0,r.useMemo)((()=>{var t;if(e)return e(null!=(t=O.current)?t:void 0)}),[e,O.current]),x=(0,r.useCallback)(((e,t)=>{!t&&T||P(e)}),[T]);(0,r.useEffect)((()=>{var e;null==(e=_)||e(I,O.current)}),[I]),(0,r.useEffect)((()=>{I&&n&&(n.current=d.IS_ALLOWED_REENTER_DEFAULT)}),[I]);const M=(0,u.useTooltipTrigger)({afterHide:x,afterShow:x,cancelCloseOnContentHover:n,delayHide:R,delayShow:h,ignoreMouseTriggers:T,popperPopupRef:A,reactionButtonContainer:g,reactionHiddenButtonContainer:m,triggerMouseenterOnInitial:C});return(0,r.useEffect)((()=>{if(T){const e=S===d.TooltipVisibility.opened;return e||M.cancelDelayedOpening(),void P(e)}I&&L===d.TooltipVisibility.opened&&P(!1)}),[S,T]),(0,i.jsx)(l.TransitionPopper,{attachTarget:j,isOpen:I,content:b,contentProps:(0,o._)({},E,M.contentProps),mode:"side",onPopperVisibilityChange:w,position:"t",popperContentStyle:B,popperPopupRef:A,ref:k?O:U,renderNodeFactory:f,styleVariant:y,children:(0,i.jsx)("div",{className:"ReactionsMenuButtonPopperReference"})})}},310707:(e,t,n)=>{"use strict";n.d(t,{TransitionPopper:()=>v});var o=n(434788),i=n(820224),r=n(785893),s=n(667294),a=n(659397),c=n(429697),l=n(515190),u=n(921881),d=n(814833);const p={appear:150,enter:150,exit:150},v=(0,s.forwardRef)((function(e,t){var{attachTarget:n,isOpen:v=!1,content:f,contentProps:g,onPopperVisibilityChange:m,popperContentStyle:b,popperPopupRef:E,styleVariant:R}=e,h=(0,i._)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]);const{isVisible:_,onEnter:w,onHidden:y}=(e=>{const[t,n]=(0,s.useState)(!!e);return{isVisible:!!e||t,onEnter:(0,s.useCallback)((()=>{n(!0)}),[]),onHidden:(0,s.useCallback)((()=>{n(!1)}),[])}})(v),C=(0,s.useRef)(null),S=(0,d.useCombinedRefs)(t,C);var k;const I=(0,u.usePopperTopAutoPosition)(null!=(k=C.current)?k:void 0,146,_),P=(()=>{const e=(0,s.useRef)(!0);return(0,s.useEffect)((()=>{e.current=!1}),[]),e.current})();(0,s.useEffect)((()=>{var e;P||null==(e=m)||e(_)}),[_]);const T=(0,a.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===R,"ReactionsMenuPopper--popperBottom":I===u.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":I===u.PopperVerticalPosition.TOP}),L=(0,r.jsx)(f,(0,o._)({},g,{position:I})),A=(0,r.jsx)(c.default,{appear:!0,in:v,classNames:"ReactionsMenuPopperTransition",onEnter:w,onExited:y,timeout:p,children:(0,r.jsx)("div",{className:T,ref:E,style:b,children:L})});return(0,r.jsx)(l.Popper,(0,o._)({},h,{align:"left",attachTarget:n,content:A,open:_,position:I,ref:S}))}))},225960:(e,t,n)=>{"use strict";n.d(t,{ButtonStyleVariant:()=>o});const o={Post:"post",Reply:"reply"}},746257:(e,t,n)=>{"use strict";n.d(t,{useCSSVarsPropagation:()=>i});var o=n(667294);const i=({elementWithPropsRef:e,properties:t})=>(0,o.useMemo)((()=>{const n=e.current;if(!n)return{style:{}};const o=window.getComputedStyle(n),i={};return t.forEach((e=>{const t=o.getPropertyValue(e);t&&(i[e]=t)})),{style:i}}),[e.current,t])},921881:(e,t,n)=>{"use strict";n.d(t,{PopperVerticalPosition:()=>o,usePopperTopAutoPosition:()=>s});var o,i=n(667294),r=n(759876);!function(e){e.BOTTOM="b",e.TOP="t"}(o||(o={}));const s=(e,t,n)=>(0,i.useMemo)((()=>((e,t)=>{if(!e)return"t";const n=(0,r.default)(e),o=window.pageYOffset||document.documentElement.scrollTop;return n.top-o<t?"b":"t"})(e,t)),[e,t,n])},805827:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuConfig:()=>r});var o=n(667294),i=n(908088);const r=()=>(0,o.useMemo)((()=>(0,i.getReactionConfig)()),[])},544311:(e,t,n)=>{"use strict";n.d(t,{useTooltipTrigger:()=>r});var o=n(799695),i=n(667294);const r=({afterHide:e,afterShow:t,cancelCloseOnContentHover:n,delayHide:r=0,delayShow:s=0,ignoreMouseTriggers:a=!1,reactionButtonContainer:c,reactionHiddenButtonContainer:l,popperPopupRef:u,triggerMouseenterOnInitial:d})=>{const p=(0,i.useRef)(null),v=(0,i.useRef)(void 0),f=(0,i.useRef)(void 0),g=(0,i.useCallback)((()=>{var e;window.clearTimeout(null!=(e=v.current)?e:void 0)}),[]),m=(0,i.useCallback)((()=>{var e;g(),null==(e=t)||e(!1)}),[t]),b=(0,i.useCallback)((()=>{var e;g(),null==(e=t)||e(!0)}),[t]);(0,o.useOnClickOutside)(u,m),(0,i.useEffect)((()=>()=>{window.clearTimeout(v.current),window.clearTimeout(f.current)}),[]);const E=(0,i.useCallback)((t=>window.setTimeout((()=>{var t;null==(t=e)||t(!1)}),null!=t?t:0)),[e]),R=()=>{var e,t;(window.clearTimeout(null!=(e=f.current)?e:void 0),a)||(v.current=(t=s,window.setTimeout((()=>{b()}),null!=t?t:0)))},h=e=>{var t,n,o;if(window.clearTimeout(null!=(o=v.current)?o:void 0),a)return;e.relatedTarget instanceof HTMLElement&&(null==(n=p)||null==(t=n.current)?void 0:t.contains(e.relatedTarget))||(f.current=E(r))};(0,i.useEffect)((()=>{d&&R()}),[]),(0,i.useEffect)((()=>{var e,t,n;return null==(e=c)||e.addEventListener("mouseenter",R,{passive:!0}),null==(t=c)||t.addEventListener("mouseleave",h,{passive:!0}),null==(n=l)||n.addEventListener("click",R,{passive:!0}),()=>{var e,t,n;null==(e=c)||e.removeEventListener("mouseenter",R),null==(t=c)||t.removeEventListener("mouseleave",h),null==(n=l)||n.removeEventListener("click",R)}}),[c]);return{cancelDelayedOpening:g,contentProps:{ref:p,onMouseEnter:(0,i.useCallback)((()=>{var e,t;window.clearTimeout(null!=(t=f.current)?t:void 0),(null==(e=n)?void 0:e.current)&&b()}),[a,b]),onMouseLeave:(0,i.useCallback)((e=>{a||c&&e.target instanceof HTMLElement&&c.contains(e.target)||(f.current=E(r))}),[E,r,a,c])}}}},123799:(e,t,n)=>{"use strict";n.d(t,{IS_ALLOWED_REENTER_DEFAULT:()=>r,TooltipVisibility:()=>o,useTooltipVisibility:()=>s});var o,i=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(o||(o={}));const r=!0,s=()=>{const[e,t]=(0,i.useState)("uncontrolled"),n=(0,i.useRef)(r),o=(0,i.useCallback)((o=>{"closed"!==e&&(void 0!==o&&(n.current=o),t("closed"),window.setTimeout((()=>{t("uncontrolled")})))}),[]);return{isAllowedReenter:n,tooltipVisibility:e,setTooltipVisibility:t,triggerClose:o}}},398948:(e,t,n)=>{"use strict";n.d(t,{renderPreviewItems:()=>u});var o=n(659397),i=n(822715),r=n(795558),s=n(428817),a=n.n(s),c=n(225960),l=n(908088);const u=(e,t,n,s,u)=>{const d=((e,t,n=!1)=>{let o=[];for(const t of Object.keys(e)){const n=(0,i.parseReactionId)(t);n.isValid&&e[n.value]>0&&o.push(n.value)}return o=o.sort(((t,n)=>(e[n]||0)-(e[t]||0))).slice(0,t),n&&o.reverse(),o})(t,3),p=e.querySelector(".ReactionsPreview__items"),v=(0,l.getReactionSet)(n),f=0===(0,i.calcCountersSum)(t),g=a().reactions_preview_item;p&&v&&"string"==typeof g?(p.innerHTML=d.map((e=>{const t=v.itemsById[e];if(!t)return"";const n=(0,o.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":u===c.ButtonStyleVariant.Reply,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":u===c.ButtonStyleVariant.Post});return(0,r.rs)(g,{image_url:t.imagePreviewURL,title:t.title,class:n})})).join(""),e.classList.toggle("ReactionsPreview--empty",f),e.classList.toggle("ReactionsPreview--active",void 0!==s)):console.warn("Unable to render reaction previews",{itemsContainer:p,previewItemTemplate:g,reactionSet:v})}},898298:(e,t,n)=>{"use strict";n.d(t,{isIntentPreviewHidden:()=>c,isIntentPreviewInActionStatusBar:()=>a,isIntentPreviewUseCurrent:()=>l,isVariantHidden:()=>r,isVariantInActionStatusBar:()=>i,parsePreviewVariant:()=>d,previewVisibilityIntentForVariant:()=>u,previewVisibilityUseCurrent:()=>s});var o=n(580151);const i=e=>e===o.PreviewVariantActionStatusBar,r=e=>e===o.PreviewVariantHidden,s={kind:"useCurrent"},a=e=>e.kind===o.PreviewVariantActionStatusBar,c=e=>e.kind===o.PreviewVariantHidden,l=e=>"useCurrent"===e.kind,u=e=>e?{kind:e}:s,d=e=>o.PreviewVariants.includes(e)?e:void 0},580151:(e,t,n)=>{"use strict";n.d(t,{PreviewVariantActionStatusBar:()=>o,PreviewVariantHidden:()=>i,PreviewVariants:()=>r});const o="action_status_bar",i="hidden",r=[o,i]},682951:(e,t,n)=>{"use strict";n.d(t,{REACTIONS_COUNTS_RESPONSE_FIELD:()=>c,SIZE_128:()=>a,SIZE_32:()=>i,SIZE_40:()=>r,SIZE_96:()=>s,SUPPORTED_OBJECT_TYPES:()=>o,WK_SECTION_PREFIX_REACTIONS:()=>l});const o={wall:"wall",wall_reply:"wall_reply"},i={width:32,height:32},r={width:40,height:40},s={width:96,height:96},a={width:128,height:128},c="reactions_counts",l="reactions"},189841:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonMount:()=>g});var o=n(785893),i=n(973935),r=n(198508),s=n(512637),a=n(32375),c=n(282795),l=n(753566),u=n(655154),d=n(225960),p=n(577698),v=n(321850);const f=d.ButtonStyleVariant.Post,g=(e,t={})=>{var n;if("__isMounted"in e)return;const d=(0,p.getLikeBtn)(e),g=(0,p.getHiddenLikeBtn)(e),m=(0,p.getMenuMount)(e);if(!d||!m)return void((0,s.isDebugEnabled)()&&console.error("Init reactions button failed",m,d));const b=(0,a.reactionsElemPayload)(d);if(!(null==(n=b)?void 0:n.objectRaw))return void((0,s.isDebugEnabled)()&&console.error("Init reactions button failed",b));const{counts:E,csrfHash:R,objectRaw:h,reactionSetId:_,styleVariant:w=f,userReactionId:y}=b;var C;const S=null!=(C=b.titleVariant)?C:c.TITLE_VARIANT_DEFAULT;null===R&&console.warn("Missing reactions csrf hash"),(0,s.isDebugEnabled)()&&console.log("Init reactions button",h,_);i.render((0,o.jsx)(l.ReactionsMenuButton,{objectId:h,onReactionChoose:e=>{const t=(0,a.reactionsElemPayload)(d);null!==R&&t&&((0,u.emitReactionChoose)(h),(0,r.reactionButtonSetReaction)(e,t.userReactionId,h,R,d))},reactionButtonContainerElem:d,reactionHiddenButtonContainerElem:g,reactionIdInitial:y,reactionSetId:_,reactionsCounts:E,styleVariant:w,titleVariant:S,triggerMouseenterOnInitial:!!t.isMouseenterEvent}),m),(0,v.pushNavDestroy)((function(){m&&(i.unmountComponentAtNode(m),delete e.__isMounted)})),e.__isMounted=!0}},198508:(e,t,n)=>{"use strict";n.d(t,{reactionButtonSetReaction:()=>b,showReactedModal:()=>E});var o=n(434788),i=n(95432),r=n(192441),s=n(682951),a=n(898298),c=n(999237),l=n(72569),u=n(647434),d=n(512637),p=n(32375),v=n(249823),f=n(767176),g=n(809053);const m=(e,{counts:t,isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:i=!1,objectRaw:r,previewVisibility:s,reactionId:a,suggestSubscribe:l})=>{(0,c.triggerReactionsUpdate)(r,t,{id:a},{isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:i,previewVisibility:s,suggestSubscribe:l})},b=(e,t,n,i,s,c)=>{var b,E,R,h;if((0,d.isDebugEnabled)()&&console.log(`Change reaction for object ${n}: ${e}`),!(0,v.isValidEnvironment)())return;const _=(0,p.reactionsElemPayload)(s),w=null==(b=_)?void 0:b.counts,y=((e,t,n)=>{const i=(0,o._)({},e);return void 0!==t&&(i[t]=(i[t]||0)+1),void 0!==n&&(i[n]=Math.max(0,(i[n]||0)-1)),i})((null==(E=_)?void 0:E.counts)||(0,r.reactionCountsBrandWrap)({}),e,t),C=null==(R=c)?void 0:R.isPrimaryLikeButtonClick,S=(0,l.isWkLayerWallPostOpen)(),k=(0,a.previewVisibilityIntentForVariant)(null==(h=_)?void 0:h.previewVariant),I=(0,g.getTrackCodeFromPost)(s);m(0,{counts:y,isFromWkLayer:S,isPrimaryLikeButtonClick:C,isUserAction:!0,objectRaw:n,previewVisibility:k,reactionId:e}),(0,u.requestPostReactionSet)(e,n,i,{trackCode:I}).promise.then((t=>{var o;const i=(0,u.validateLikesChangeResponse)(t),r=null==(o=i)?void 0:o.userReaction;i&&void 0!==r&&m(0,{counts:i.counts,isFromWkLayer:S,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:k,reactionId:r.id,suggestSubscribe:i.suggestSubscribe});let s=n.replace("wall","post"),a=document.getElementById(s);if(a){let t=a.getAttribute("data-ad");if(t){let n=void 0===e?"unlike":"like";f.AdsEvents.register(n,t)}}}),(e=>{var o;(null==(o=e)?void 0:o.isAborted)||m(0,{counts:w,isFromWkLayer:S,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:k,reactionId:t})}))};function E(e,t){!function(e){(0,i.showWiki)({w:e},!1,void 0,{queue:1})}(`${s.WK_SECTION_PREFIX_REACTIONS}_${e}/${t}`)}},647434:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>o.requestGetReacted,requestPostReactionSet:()=>i.requestPostReactionSet,validateLikesChangeResponse:()=>i.validateLikesChangeResponse});var o=n(585386),i=n(913923)},585386:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>s});var o=n(434788),i=n(822715),r=n(363444);const s=e=>{const t={act:"reactions_get_reacted",object:e};return{promise:new Promise(((e,n)=>{r.ajax.post("/like.php",t,{onDone:t=>{const r=function(e){let t;if(!(0,i.isUnknownObject)(e))return t;const{reactedMenuStats:n}=e;n&&(t||(t={}),t=(0,o._)({},t,{reactedMenuStats:n}));return t}(t);if(!r){const e=new Error("requestGetReacted: Invalid response");return console.error(e,t),void n(e)}e(r)},onFail:e=>(n({err:e}),!1)})}))}}},991059:(e,t,n)=>{"use strict";n.d(t,{stringWithHTMLEntitiesDecode:()=>r});var o=n(640971),i=n(659397);const r=e=>(0,i.decodeHTMLEntities)((0,o.unwrap)(e));o.unwrap},913923:(e,t,n)=>{"use strict";n.d(t,{requestPostReactionSet:()=>d,validateLikesChangeResponse:()=>p});var o=n(419328),i=n(822715),r=n(363444),s=n(383320),a=n(584356),c=n(682951),l=n(878021);const u=(0,o.makePendingRequestState)(),d=(e,t,n,o)=>{var i,c,d,p;(null==(p=null==(i=o)?void 0:i.abortPendingRequests)||p)&&u.cancel(t);const v={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null==(c=window.Likes)?void 0:c._getReference(t),track_code:null==(d=o)?void 0:d.trackCode},f=new s.AjaxCancellationToken,g=new Promise(((e,t)=>{const n=r.ajax.post("like.php",v,{cancellationToken:f,onDone:n=>{var o,i;if(null==(o=n)?void 0:o.unauth_action_box)return l.UnauthActionBox.show(n.unauth_action_box),void t();(null==(i=n)?void 0:i.done_box)&&(0,a.showDoneBox)("",{},n.done_box),e(n)},onFail:e=>{const o=(e=>{return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t})(n);return t({err:e,isAborted:o}),!!o}})})),m=()=>{f.cancel()},b=u.register(t,m);return g.catch((()=>{})).finally((()=>{b&&b()})),{abort:m,promise:g}},p=e=>{var t,n,o;if(void 0===(null==(t=e)?void 0:t.reactions_my))return void console.warn("Invalid reaction change response format",e);const r=null!=(o=null==(n=e)?void 0:n[c.REACTIONS_COUNTS_RESPONSE_FIELD])?o:void 0,s=e.reactions_my,a=e.suggest_subscribe;let l;return null===s?l={id:void 0}:(0,i.isValidReactionId)(s)&&(l={id:s}),{counts:r,userReaction:l,suggestSubscribe:a}}},512637:(e,t,n)=>{"use strict";n.d(t,{ENABLED_IN_POST_REPLY:()=>i,isDebugEnabled:()=>o.isDebugEnabled});var o=n(457972);const i=!1},775060:(e,t,n)=>{"use strict";n.d(t,{getCounterForTitle:()=>s,isCounterAvailable:()=>c,isCounterEnabled:()=>a,isCounterEnabledForBtn:()=>r});var o=n(822715),i=n(29271);const r=e=>!!e.getAttribute("data-reaction-button-text-is-counter");function s(e,t,n,s){if(!r(e))return{kind:"disabled"};if(!n)return{kind:"error"};const a=0!==(s?(0,o.calcCountersSum)(s):0);if(!(0,o.hasReactionsForCounts)(n))return{kind:"enabled",allowZeroAnimation:a,buttonText:""};const c=(0,o.calcCounters)(n,t),l=(0,o.calcCountersWeightedSum)(c);return{kind:"enabled",allowZeroAnimation:a,buttonText:(0,i.langNumeric)(l,"%s",!0)}}function a(e){return!!e&&"disabled"!==e.kind}function c(e){return"enabled"===e.kind}},655154:(e,t,n)=>{"use strict";n.d(t,{addDataUpdateListener:()=>s,addReactionChooseListener:()=>c,emitDataUpdate:()=>a,emitReactionChoose:()=>l});var o=n(980602);const i=(0,n(367431).makeSharedState)("reactions-menu-events",(()=>({emitter:new o.default})),{version:0}),r=()=>i().emitter,s=(e,t)=>{const n=r(),o={[`${e}:data_update`]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},a=(e,t)=>{r().emit(`${e}:data_update`,t)},c=(e,t)=>{const n=r(),o={[`${e}:reaction_choose`]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},l=e=>{r().emit(`${e}:reaction_choose`)}},32375:(e,t,n)=>{"use strict";n.d(t,{getPreviewVariantForLikeBtn:()=>f,reactionsElemPayload:()=>g,reactionsElemPayloadForBadges:()=>m,shouldReactionsPreviewBeVisible:()=>h,updateReactionsButtonForCounts:()=>y,updateReactionsPreview:()=>w,verifyPayloadForBadges:()=>b});var o=n(265865),i=n(822715),r=n(893106),s=n(29271),a=n(908088),c=n(577698),l=n(249823),u=n(898298),d=n(398948),p=n(135683);const v=e=>{const t=e.getAttribute("data-reaction-counts");if(null===t)return{};const n=t?(0,o.parseJSON)(t):void 0;return"object"==typeof n&&null!==n?n:void 0},f=e=>{const t=e.getAttribute("data-reaction-preview-variant");if(t)return(0,u.parsePreviewVariant)(t)},g=e=>{const t=e.getAttribute("data-reaction-target-object"),n=e.getAttribute("data-reaction-hash"),o=e.getAttribute("data-reaction-set-id");if(null===o)return;const r=e.getAttribute(p.ATTR_USER_REACTION_ID),s=r?(0,i.parseReactionIdOrUnset)(r):void 0,a=e.getAttribute("data-reaction-style-variant"),c=a&&(0,l.isValidButtonStyleVariant)(a)?a:void 0,u=e.getAttribute("data-reaction-menu-title-variant"),d=u&&(0,l.isValidButtonTitleVariant)(u)?u:void 0,g=f(e);return{counts:v(e),csrfHash:n,objectRaw:t,reactionSetId:o,styleVariant:c,titleVariant:d,userReactionId:s,previewVariant:g}},m=e=>({objectId:e.getAttribute("data-badges-object-id"),objectOwnerId:e.getAttribute("data-badges-object-owner-id"),objectType:e.getAttribute("data-badges-object-type"),ref:e.getAttribute("data-badges-ref"),showOnboarding:e.getAttribute("data-badges-show-onboarding")}),b=e=>{const{objectId:t,objectOwnerId:n,objectType:o}=e;return t&&n&&o};var E;const R=(e,t,n,o)=>{const i=(0,s.langNumeric)(n,s.getLang("reactions_n_reacted","raw")||"%s",!0);e.setAttribute("aria-label",i);const a=null!=(E=e.querySelector('[data-section-ref="like-button-count"]'))?E:void 0;if(!a)return;if(e.tt&&"object"==typeof e.tt){var c,l;if(!(e.tt.shown||e.tt.showing))null==(l=e.tt)||null==(c=l.destroy)||c.call(l)}const u=(0,s.langNumeric)(t,"%s",!0);(0,r.animateCount)(a,u,{allowZero:0!==o,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})},h=e=>(0,i.hasReactionsForCounts)(e),_=(e,t,n)=>{const o=g(e);o&&o.objectRaw&&((e,{counts:t,countsPrevious:n,objectRaw:o,reactionId:r,reactionSetId:s,styleVariant:l})=>{const u=(0,a.getReactionSet)(s),p=(0,i.calcCounters)(t,u),v=(0,i.calcCountersWeightedSum)(p),f=(0,i.calcCountersSum)(t),g=n?(0,i.calcCountersSum)(n):0,m=(0,c.getPreviewElem)(o);m&&((0,d.renderPreviewItems)(m,t,s,r,l),R(m,v,f,g))})(0,{counts:t,countsPrevious:n,objectRaw:o.objectRaw,reactionId:o.userReactionId,reactionSetId:o.reactionSetId,styleVariant:o.styleVariant})},w=(e,t)=>{const n=(0,c.getLikeBtnElem)(e),o=t.counts;n&&o?_(n,o,t.countsPrevious):console.warn("Unable to update object reactions",{objectRaw:e,options:t})},y=(e,{counts:t})=>{const n=(0,c.getLikeBtnElem)(e);n&&((e,t)=>{e.setAttribute("data-reaction-counts",JSON.stringify(t))})(n,t)}},412818:(e,t,n)=>{"use strict";n.d(t,{ReactionsEntryGlobal:()=>f,init:()=>p});var o=n(953908),i=n(189841),r=n(557530),s=n(259036),a=n(835821),c=n(908088),l=n(530517),u=n(839470),d=n(577698);const p=()=>{(0,l.postRenderReactionsInit)(),(0,a.initResponseHandlers)()},v=e=>"1"===e.dataset.reactionsMenuDisabled,f={onReactionKeyDown:(e,t)=>{(0,r.isEventFromMenu)(t)||(0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||[o.KEY.RETURN,o.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,r.toggleReactionOnClick)(e))},initReactionByMouseEvent:(e,t)=>{if(t.target!==e)return;const n=(0,d.getButtonContainer)(e);n&&((0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||(0,s.reactionsButtonInit)(n,{isMouseenterEvent:!0}))},onReactionClick:(e,t)=>{(0,o.checkEvent)(t)||(0,r.isEventFromMenu)(t)||((0,r.toggleReactionOnClick)(e),(0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||(0,s.reactionsButtonInit)(e))},reactionsButtonMount:i.reactionsButtonMount,storageAddSets:c.storageAddSets,storageSetConfig:c.storageSetConfig}},557530:(e,t,n)=>{"use strict";n.d(t,{isEventFromMenu:()=>a,toggleReactionOnClick:()=>c});var o=n(59985),i=n(198508),r=n(655154),s=n(32375);const a=e=>{var t,n;return e.target instanceof HTMLElement&&(null==(t=(n=e.target).closest)?void 0:t.call(n,"._ReactionsMenuPopperRoot"))},c=e=>{var t;const n=(0,s.reactionsElemPayload)(e);if(!(null==(t=n)?void 0:t.objectRaw))return void console.warn("Missing reactions object raw",e);const{csrfHash:a,objectRaw:c,userReactionId:l}=n;if((0,r.emitReactionChoose)(c),null===a)return void console.warn("Missing reactions csrf hash",e);const u=void 0===l?o.REACTION_ID_DEFAULT:void 0;(0,i.reactionButtonSetReaction)(u,l,c,a,e,{isPrimaryLikeButtonClick:!0})}},259036:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonInit:()=>o});const o=(...e)=>{const t=window.Reactions;t?t.reactionsButtonMount(...e):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((()=>{window.Reactions?o(...e):console.error("Reactions module is unavailable")}))}},403702:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>r});var o=n(698216),i=n(908088);const r=({error:e})=>{var t;var n;const r=null!=(n=null==(t=(0,i.getReactionConfig)())?void 0:t.reportJsErrors)&&n;(0,o.reactionLogError)({error:e,reportError:r})}},835821:(e,t,n)=>{"use strict";n.d(t,{initResponseHandlers:()=>c});var o=n(541140),i=n(908088);const r=e=>{var t;const n=null==(t=e)?void 0:t.reaction_sets;n&&(0,i.storageAddSets)(n)},s=e=>{e&&(0,i.storageSetConfig)(e)};let a=!1;const c=()=>{a||((0,o.replaceExtraHandler)("reactionsConfig",s),(0,o.replaceExtraHandler)("reactions",r),a=!0)}},577698:(e,t,n)=>{"use strict";var o;n.d(t,{getButtonContainer:()=>l,getClosestLikeBtnContainerElem:()=>s,getHiddenLikeBtn:()=>g,getLikeBtn:()=>v,getLikeBtnElem:()=>i,getLikeWrap:()=>c,getMenuMount:()=>d,getPreviewElem:()=>m});const i=e=>null!=(o=document.querySelector(`[data-section-ref="reactions-button"][data-reaction-target-object="${e}"]`))?o:void 0;var r;const s=e=>null!=(r=e.closest('[data-section-ref="reactions-button-container"]'))?r:void 0;var a;const c=e=>{const t=i(e);if(t)return null!=(a=t.closest(".like_wrap"))?a:void 0},l=e=>e.closest('[data-section-ref="reactions-button-container"]');var u;const d=e=>null!=(u=e.querySelector('[data-section-ref="reactions-menu-mount"]'))?u:null;var p;const v=e=>null!=(p=e.querySelector('[data-section-ref="reactions-button"]'))?p:null;var f;const g=e=>null!=(f=e.querySelector('[data-section-ref="reactions-hidden-button"]'))?f:void 0,m=e=>document.querySelector(`[data-section-ref="reactions-preview-items"][data-reaction-target-object="${e}"]`)},908088:(e,t,n)=>{"use strict";n.d(t,{getReactionConfig:()=>g,getReactionSet:()=>v,storageAddSets:()=>p,storageSetConfig:()=>f});var o=n(434788),i=n(659397),r=n(822715),s=n(367431),a=n(403702),c=n(682951),l=n(512637);const u=(0,s.makeSharedState)("reactions-storage",(()=>new Map),{version:0}),d=(0,s.makeSharedState)("reactions-config",(()=>({config:void 0})),{version:0}),p=e=>{(0,l.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((([e,t])=>{const n=(0,r.validateReactionSetPayloaditems)(t,e);if(n)return void(0,a.reactionLogError)({error:n.error});const s=t.map((e=>(0,o._)({},e,{title:(0,i.decodeHTMLEntities)(e.title)})));u().set(e,(0,r.prepareReactionMenuSet)(e,s,{imageMenuSize:c.SIZE_96,imagePreviewSize:c.SIZE_32,imageStoryPanelSize:c.SIZE_128,imageStoryPreviewSize:c.SIZE_40}))}))},v=e=>{const t=u().get(e);if(t)return t;{const t=new Error(`Reaction set not found: ${e}`);(0,a.reactionLogError)({error:t})}},f=e=>{(0,l.isDebugEnabled)()&&console.log(e);const t=(0,r.parseReactionMenuConfig)(e);t?d().config=t:console.warn("Reactions: invalid menu config passed",e)},g=()=>{var e;return null==(e=d())?void 0:e.config}},249823:(e,t,n)=>{"use strict";n.d(t,{isValidButtonStyleVariant:()=>p,isValidButtonTitleVariant:()=>d,isValidEnvironment:()=>s,preloadImage:()=>a,usePrevious:()=>c,usePreviousRef:()=>l});var o=n(667294),i=n(282795),r=n(225960);const s=()=>{var e,t,n;return"function"==typeof(null==(e=window.cur)?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null==(n=window.Widgets)||null==(t=n.oauth)||t.call(n),!1)},a=e=>new Promise(((t,n)=>{const o=new Image;o.src=e,o.onload=()=>t(),o.onerror=()=>n()})),c=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t.current},l=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t},u=Object.values(r.ButtonStyleVariant),d=e=>i.ReactionMenuTitleVariants.includes(e),p=e=>u.includes(e)},109454:(e,t,n)=>{"use strict";n.d(t,{isReactionsFullUpdatePayload:()=>s,reactionsCountsOnlyUpdatePayload:()=>a,reactionsCountsUpdatePayload:()=>r});var o=n(434788),i=n(900641);const r=(e,t)=>(0,o._)({kind:i.PayloadKindFull},e,{reactionIdState:{reactionId:t.id}}),s=e=>e.kind===i.PayloadKindFull,a=e=>(0,o._)({kind:i.PayloadKindCountsOnly},e)},900641:(e,t,n)=>{"use strict";n.d(t,{PayloadKindCountsOnly:()=>o,PayloadKindFull:()=>i});const o="counts_only",i="counts_with_current_reaction"},999237:(e,t,n)=>{"use strict";n.d(t,{triggerReactionsUpdate:()=>a});var o=n(693982),i=n(682951),r=n(505426),s=n(109454);const a=(e,t,n,a)=>{const c=(0,o.parseLikeObjectId)(e);c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,n,o){var i,r,a;const c={counts:e,isFromWkLayer:null==(i=t)?void 0:i.isFromWkLayer,isPrimaryLikeButtonClick:null==(r=t)?void 0:r.isPrimaryLikeButtonClick,isQueueUpdate:null==(a=t)?void 0:a.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,s.reactionsCountsUpdatePayload)(c,o):(0,s.reactionsCountsOnlyUpdatePayload)(c)}(t,a,c,n)):c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:c.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},530517:(e,t,n)=>{"use strict";n.d(t,{postRenderReactionsInit:()=>L});var o=n(299156),i=n(659397),r=n(828109),s=n(795558),a=n(508087),c=n(693982),l=n(512637),u=n(32375),d=n(898298),p=n(577698),v=n(109454),f=n(358496),g=n(170864),m=n(72569),b=n(839470),E=n(655154),R=n(580151),h=n(908088),_=n(216833);const w=(e,t,n=(()=>{var e;return null==(e=window.cur)?void 0:e.wallTpl})())=>{var o;const i=null==(o=n)?void 0:o[e];if(i)return(0,a.stripPercentVars)((0,s.rs)(i,t));console.warn(`renderTemplate: missing template '${e}'`,n)},y=({isUserAction:e=!1},...t)=>{e?console.error(...t):(0,l.isDebugEnabled)()&&console.warn(...t)},C=e=>(0,_.isBadgesEnabled)()&&e.classList.contains("PostActionStatusBar--withBadges");const S=(e,t,{isActionStatusBarVisible:n,isReactionsPreviewVisible:o,positionTrackingEnd:r})=>{const a=((e,t)=>{var n,o,i;const r=(0,p.getLikeWrap)(e);if(!r)return;const a=null==(n=(0,g.getPostElem)(t,r))?void 0:n.querySelector('[data-section-ref="post-action-status-bar"]');if(a)return{actionStatusBar:a};const c=(0,m.isWkLayerWallPostOpen)()?null==(o=window.wkcur)?void 0:o.wallTpl:null==(i=window.cur)?void 0:i.wallTpl,l=(0,s.se)(w("post_action_status_bar",{class:"PostActionStatusBar--hidden"},c));return l?((0,b.partConfigEnabled)("feed_redesign_post_bottom_2023_enabled")?(0,s.domInsertAfter)(l,r):(0,s.domInsertBefore)(l,r),{actionStatusBar:l}):void 0})(e,t.postFullId);if(!a)return void y({},"Unable to init ActionStatusBar in post",t);const{actionStatusBar:c}=a;if(c.classList.toggle("PostActionStatusBar--hidden",!n),C(c)&&c.classList.toggle("PostActionStatusBar--withReactions",o),n&&!(0,p.getPreviewElem)(e)){const t=(0,s.se)(function(e,t,n={}){var o,r;const s=(0,m.isWkLayerWallPostOpen)()?null==(o=window.wkcur)?void 0:o.wallTpl:null==(r=window.cur)?void 0:r.wallTpl,a=(0,i.classNames)({"ReactionsPreview--empty":!e,"ReactionsPreview--isInActionStatusBar":!!n.isInActionStatusBar});return w("post_reactions_preview",{class:a,object_raw:t},s)}(o,e,{isInActionStatusBar:!0}));if(C(c)){const e=c.querySelector(".PostActionStatusBar__leftInner");e&&e.prepend(t)}else c.prepend(t)}if(r){var l;const t=(0,p.getLikeBtnElem)(e);null==(l=r)||l(t)}},k=e=>{var t;if(!(e=>void 0!==e.counts)(e))return void y(e,"Counts is invalid or missing");const n=(0,c.likePostObjectId)(e.postFullId),o=(0,g.getPostElem)(e.postFullId,(0,p.getLikeWrap)(n));o||y(e,"Missing post element for reactions preview update",{payload:e,likeWrap:(0,p.getLikeWrap)(n)});const i=(0,p.getLikeBtnElem)(n);if(!i)return void y(e,"Unable to find reactions button",{likeObjectId:n});const r=(0,u.reactionsElemPayload)(i),s=null==(t=r)?void 0:t.counts;I({elemPayload:r,likeBtnElem:i,likeObjectId:n,payload:e}),P({countsPrevious:s,likeBtnElem:i,likeObjectId:n,payload:e,postEl:o})},I=({elemPayload:e,likeBtnElem:t,likeObjectId:n,payload:i})=>{const{counts:r}=i;if(!!i.isQueueUpdate&&(e=>{const t=(0,o.getLastOwnReactionChangeTime)(e);if(!t)return!1;const n=t+1e4;return Date.now()<n})(t))(0,l.isDebugEnabled)()&&console.log("Ignoring reactions update from queue",i);else{if(e){const{counts:n,reactionSetId:s}=e,a=(0,h.getReactionSet)(s);if((0,v.isReactionsFullUpdatePayload)(i)){const e=i.reactionIdState.reactionId;a&&(0,o.updateReactionButtonForCurrentReaction)(t,e,a,i.isUserAction)}a&&((0,o.updateReactionButtonCounts)(t,a,i.isUserAction,r,n),(0,o.updateReactionButtonContainerForCounts)(t,r))}if((0,v.isReactionsFullUpdatePayload)(i)){var s;const n=i.reactionIdState.reactionId;(0,o.setDataCurrentId)(t,n),i.isUserAction&&(null==(s=e)?void 0:s.objectRaw)&&(0,E.emitDataUpdate)(e.objectRaw,{currentReactionId:n})}(0,u.updateReactionsButtonForCounts)(n,{counts:r})}},P=({countsPrevious:e,likeBtnElem:t,likeObjectId:n,payload:o,postEl:i})=>{const{counts:s,previewVisibility:a=d.previewVisibilityUseCurrent}=o,c=((e,t)=>{if((0,d.isIntentPreviewInActionStatusBar)(e))return{previewVariant:R.PreviewVariantActionStatusBar};if((0,d.isIntentPreviewHidden)(e))return{previewVariant:R.PreviewVariantHidden};if((0,d.isIntentPreviewUseCurrent)(e)){const e=(0,u.getPreviewVariantForLikeBtn)(t);if(e)return{previewVariant:e}}})(a,t);if(!c)return;const{previewVariant:l}=c,p=(0,d.isVariantInActionStatusBar)(l),v=(0,u.shouldReactionsPreviewBeVisible)(s),f=(0,d.isVariantHidden)(l)||p&&!v;if(p){let e;o.isPrimaryLikeButtonClick&&!o.isFromWkLayer&&(e=(0,r.preservePositionBetween)(t).start());const s=v;var g;if(!(0,_.isBadgesEnabled)())null==(g=i)||g.classList.toggle("post--withActionStatusBar",s);S(n,o,{isActionStatusBarVisible:s,isReactionsPreviewVisible:v,positionTrackingEnd:e})}f||(0,u.updateReactionsPreview)(n,{counts:s,countsPrevious:e})},T=e=>{if(!l.ENABLED_IN_POST_REPLY)return!1;const{counts:t}=e;if(!t)return;const n=(0,c.likeReplyObjectId)(e.replyFullId);(0,u.updateReactionsPreview)(n,{counts:t,countsPrevious:void 0}),(0,u.updateReactionsButtonForCounts)(n,{counts:t})},L=()=>{let e=[(0,f.registerUniqueListener)("wall-post-action-status-bar",f.WallDataEvents.post_reactions_counts_update,k),(0,f.registerUniqueListener)("wall-reply-reactions-counts",f.WallDataEvents.reply_reactions_counts_update,T)];return{onDestroy:()=>{e.forEach((e=>{e()})),e=[]}}}},505426:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>s,emitEvent:()=>d,registerNonGlobalNonUniqueListener:()=>u,registerUniqueListener:()=>l});var o=n(434788),i=n(980602),r=n(367431);const s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,r.makeSharedState)("wall-data",(()=>({emitter:new i.default,keyedListeners:Object.create(null)})),{version:0}),c=(e,t,n)=>{var i,r;const s=a(),c=null==(r=s.keyedListeners)||null==(i=r[e])?void 0:i[t];return c&&s.emitter.removeListener(e,c),((e,t,n)=>{const i=a();return i.emitter.addListener(e,n),i.keyedListeners[e]=(0,o._)({},i.keyedListeners[e],{[t]:n}),()=>{var o,r;i.emitter.removeListener(e,n),(null==(o=i.keyedListeners[e])?void 0:o[t])===n&&(null==(r=i.keyedListeners[e])||delete r[t])}})(e,t,n)},l=(e,t,n)=>c(t,e,n),u=(e,t)=>((e,t)=>{const n=a();return n.emitter.addListener(e,t),()=>{n.emitter.removeListener(e,t)}})(e,t),d=(e,t)=>{a().emitter.emit(e,t)}},358496:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>o.WallDataEvents,registerUniqueListener:()=>o.registerUniqueListener});var o=n(505426)},767176:(e,t,n)=>{"use strict";n.d(t,{AdsEvents:()=>p});var o=n(599809),i=n(936134),r=n(795558),s=n(796943),a=n(866310),c=n(95432),l=n(9480);let u=[];const d=(0,i.debounce)((()=>{if(0===u.length)return;const e=u.splice(0,u.length);(0,o.api)("adsint.registerAdEvents",{events:JSON.stringify(e)}).catch((t=>{for(;e.length;)u.unshift(e.pop())}))}),1e3);const p={register:(e,t)=>{(e=>["like","unlike","share","music_pause","music_play","music_track_to_profile","music_playlist_to_profile","music_track_share","music_playlist_share","music_track_share_to_story","music_playlist_share_to_story"].includes(e))(e)&&(e=>!!e)(t)&&(u.push({event_type:e,ad_data:t}),d())},handleShareEvent:(e,t,n)=>{const o=e&&e.dataset&&e.dataset.ad;if(!o||!t)return null;let i="share";0===t.indexOf("audio")&&(window.Wall&&Wall.triggerAdStat(e,"audio_click"),0===t.indexOf("audio_playlist")?i=2==n?"music_playlist_share_to_story":"music_playlist_share":0===t.indexOf("audio")&&(i=2==n?"music_track_share_to_story":"music_track_share")),p.register(i,o)}};(0,s.onDomReady)((()=>{const e="adsEvents",t=(0,c.getAudioPlayer)();if(!t||t.subscribers&&t.subscribers.filter((t=>t.context===e)).length>0)return;const n={[a.AudioPlayerEventType.PLAY]:"music_play",[a.AudioPlayerEventType.PAUSE]:"music_pause",[a.AudioPlayerEventType.MUSIC_AUDIOS_ADD]:"music_track_to_profile",[a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD]:"music_playlist_to_profile"},o=e=>{if(n[e]){const o=l.AudioUtils.audioTupleToAudioObject(t.getCurrentAudio()),i=o?document.querySelector("._audio_row_"+o.fullId+"."+l.AudioUtils.AUDIO_CURRENT_CLS):null,s=(0,r.domClosest)("post",i);let a=s&&s.dataset&&s.dataset.ad;a||(a=(e=>{if(!e)return null;const t=0===e.indexOf("feed:")?e.replace("feed:","post"):null,n=t&&document.getElementById(t);return n&&n.dataset&&n.dataset.ad})(t._getPlayingContext())),a&&(window.Wall&&Wall.triggerAdStat(s,"audio_click"),p.register(n[e],a))}};t.on(e,a.AudioPlayerEventType.PLAY,(()=>o(a.AudioPlayerEventType.PLAY))),t.on(e,a.AudioPlayerEventType.PAUSE,(()=>o(a.AudioPlayerEventType.PAUSE))),t.on(e,a.AudioPlayerEventType.MUSIC_AUDIOS_ADD,(()=>o(a.AudioPlayerEventType.MUSIC_AUDIOS_ADD))),t.on(e,a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD,(()=>o(a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD)))}))},607338:(e,t,n)=>{"use strict";n.d(t,{useLottie:()=>c});var o=n(11010),i=n(434788),r=n(667294),s=n(674694),a=n(936392);function c(e,{play:t,show:n}={}){const{animationUrl:c,animationData:l}=e,u=(0,r.useRef)(!1),d=(0,r.useRef)(null),p=(0,r.useRef)(null),[v,f]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),R=(0,s.useIsMounted)(),h=(0,o._)((function*(){const t=p.current;t?u.current=!1:(m(!0),E(!1));const n=d.current;if((c||l)&&n&&!u.current){u.current=!0,f(!1);try{const t=yield a.LottieManager.loadAnimation((0,i._)({containers:[n]},e));t.addEventListener("firstFrame",(()=>{E(!0)}),{once:!0}),m(!1),p.current=t}catch(e){f(!0)}var o;if(R())null==(o=t)||o.destroy()}}));(0,r.useEffect)((()=>{const e=p.current;e&&!g&&(void 0!==t&&(t?e.play():e.pause()),void 0!==n&&(n?e.show():e.hide()))}),[g,t,n]),(0,r.useEffect)((()=>(h(),()=>{var e;null==(e=p.current)||e.destroy()})),[c,l]);return{lottieError:v,lottieLoading:g,lottieLoaded:!g&&!v,lottieRendered:b,lottiePlayerRef:p,lottieContainerRef:d}}}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e].call(n.exports,n,n.exports,c),n.exports}c.m=s,e=[],c.O=(t,n,o,i)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],s=!0,a=0;a<n.length;a++)(!1&i||r>=i)&&Object.keys(c.O).every((e=>c.O[e](n[a])))?n.splice(a--,1):(s=!1,i<r&&(r=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);c.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,c.d(i,r),i},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>25394===e?"web/chunks/AudioLongtapModal.5c994570.js":24817===e?"web/chunks/hls.b496ce21.js":75980===e?"web/chunks/menu_settings.ad849031.js":9375===e?"web/chunks/voice_message_player.1c43f503.js":28762===e?"web/chunks/speech.d9867703.js":57468===e?"web/chunks/SilentModeForms.6c78e68c.js":28872===e?"web/chunks/feed-client-nav-skeleton.23b1194f.js":35953===e?"web/chunks/feed-client-nav-async-right-block.6f6f61b6.js":26464===e?"web/chunks/6fb20e5b.async.cddef5dc.js":32522===e?"web/chunks/c4b5a755.async.64e308b8.js":31902===e?"web/chunks/BadgesEntrypoint.aff5ec46.js":14930===e?"web/chunks/d250583b.async.8610a34b.js":18669===e?"web/chunks/BadgesCatalog.5954c8dd.js":83803===e?"web/chunks/BadgesObjectInfo.8a6262c1.js":27772===e?"web/chunks/badges_status_bar_onboarding_init.1a93899a.js":60456===e?"web/chunks/BadgesRestrictedModal.50e5f057.js":64369===e?"web/chunks/BadgesTaskModal.93a0c1cf.js":72728===e?"web/chunks/OneTimeDonut.3ee81c0f.js":44221===e?"web/chunks/IconBadges.d64917ff.js":9202===e?"chunks/9202.72ad8960.js":79118===e?"chunks/"+e+".1f93e9b5.js":22197===e?"chunks/"+e+".fd9e68c0.js":77950===e?"chunks/"+e+".f03dc111.js":void 0,c.miniCssF=e=>25394===e?"web/chunks/5e3e105f.css":75980===e?"web/chunks/5bbee2c9.css":57468===e?"web/chunks/a2979e7d.css":31902===e?"web/chunks/7f268873.css":18669===e?"web/chunks/9740d83d.css":83803===e?"web/chunks/4eaf46f2.css":72728===e?"web/chunks/5ad88fce.css":void 0,c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},c.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var r,s;if(void 0!==n)for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l++){var u=a[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+n){r=u;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),o[e]=[t];var d=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var i=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),s&&document.head.appendChild(r)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="/dist/",i=e=>new Promise(((t,n)=>{var o=c.miniCssF(e),i=c.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=(s=n[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===e||i===t))return s}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){var s;if((i=(s=r[o]).getAttribute("data-href"))===e||i===t)return s}})(o,i))return t();((e,t,n,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=r=>{if(i.onerror=i.onload=null,"load"===r.type)n();else{var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,i.parentNode.removeChild(i),o(c)}},i.href=t,document.head.appendChild(i)})(e,i,t,n)})),r={70724:0},c.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{18669:1,25394:1,31902:1,57468:1,72728:1,75980:1,83803:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{c.b=document.baseURI||self.location.href;var e={70724:0};c.f.j=(t,n)=>{var o=c.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,i)=>o=e[t]=[n,i]));n.push(o[2]=i);var r=c.p+c.u(t),s=new Error;c.l(r,(n=>{if(c.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,o[1](s)}}),"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[r,s,a]=n,l=0;if(r.some((t=>0!==e[t]))){for(o in s)c.o(s,o)&&(c.m[o]=s[o]);if(a)var u=a(c)}for(t&&t(n);l<r.length;l++)i=r[l],c.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return c.O(u)},n=self.webpackChunkvkweb=self.webpackChunkvkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=c.O(void 0,[213,2067,83737,57451,71610,5038,84400,95167,15201],(()=>c(849307)));l=c.O(l)})();